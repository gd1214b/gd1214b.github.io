<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="gd1214b&#39;s blog">
<meta name="description" content="念念不忘，必有回响">
<meta name="theme-color" content="#f8f9fa">
<title>gd1214b&#39;s blog</title>
<link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/favicon.ico?v=1623925641622">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/media/css/gemini.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/media/fonts/font-awesome.css">
<link
  href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Rosario:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"
  rel="stylesheet" type="text/css">

<link href="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/media/hljs/styles/default.css"
  rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/styles/main.css">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/media/js/jquery.js"></script>
<script src="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/media/hljs/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
  integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">


<script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ["\\(", "\\)"]],
      displayMath: [['$$', '$$'], ["\\[", "\\]"]]
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code', 'a', 'annotation', 'annotation-xml'],
      ignoreHtmlClass: 'tex2jax_ignore|crayon-.*', // 'crayon-' 开头的类，属于Wordpress代码高亮库，这部分不需要处理，否则会导致显示不正确,这部分是正则式，多条之间用'|'分割
      processHtmlClass: 'tex2jax_process'
    },
    //禁用右键菜单	
    renderActions: {
      addMenu: [0, '', '']
    }
  };
</script>
<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>




<script>
  var _hmt = _hmt || [];
  (function () {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?f14e8fdfc369f6d5beb066e83eb968f5";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>



</head>

<body>
  <div class="head-top-line"></div>
  <div class="header-box">
    
<div class="gemini">
  <header class="header  ">
    <div class="blog-header box-shadow-wrapper bg-color " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="brand">
              <span>gd1214b&#39;s blog</span>
            </a>  
          
        </div>
        
          <p class="subtitle">念念不忘，必有回响</p>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/" target="_self">
                  <i class="fa fa-home"></i> 首页
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/archives/" target="_self">
                  <i class="fa fa-archive"></i> 归档
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/tags/" target="_self">
                  <i class="fa fa-tags"></i> 标签
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/post/tools/" target="_self">
                  <i class="fa fa-globe"></i> 工具
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="/post/about/" target="_self">
                  <i class="fa fa-user"></i> 关于
                </a>
              
            </li>
          
          
            
              <li class="nav-item ">
                <a href="/friends/" target="_self">
                  
                    <i class="fa fa-address-book"></i> 友链
                  
                </a>
              </li>
            
          
          
            <li id="fa_search" class="nav-item">
              <a href="javascript:void(0);">
                <i class="fa fa-search"></i> <span class="language" data-lan="search">搜索</span>
              </a>
            </li>
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
  </div>
  <div class="main-continer">
    
    <div
      class="section-layout  gemini">
      <div class="section-layout-wrapper">
        <div id="sidebarMeta" class="sidebar">
    
<div class="sidebar-wrapper box-shadow-wrapper bg-color">
  <div class="sidebar-item">
    <img class="site-author-image right-motion" src="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/images/avatar.png"/>
    <p class="site-author-name">gd1214b</p>
    
    <div class="site-description right-motion">
      
        <p id="binft">念念不忘，必有回响</p>
      
    </div>
    
  </div>
  <div class="sidebar-item side-item-stat right-motion">
    <div class="sidebar-item-box">
      <a href="/archives/">
        
        <span class="site-item-stat-count">17</span>
        <span class="site-item-stat-name language" data-lan="article">文章</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="">
        <span class="site-item-stat-count">15</span>
        <span class="site-item-stat-name language" data-lan="category">分类</span>
      </a>
    </div>
    <div class="sidebar-item-box">
      <a href="/tags/">
        <span class="site-item-stat-count">15</span>
        <span class="site-item-stat-name language" data-lan="tag">标签</span>
      </a>
    </div>
  </div>
  
    
      <div class="sidebar-item">
        <span class="site-item-rss">
            <i class="fa fa-rss"></i>
            <a href="https://blog.gd1214b.icu/atom.xml" target="_blank">RSS</a>
        </span>
      </div>
    
  
  
    <div class="sidebar-item sidebar-item-social">
      <div class="social-item">
        
          
            <a href="https://github.com/gd1214b">
              <i class="fa fa-github" title="GitHub"></i>
            </a>
          
            <a href="https://t.me/gd1214b">
              <i class="fa fa-telegram" title="Telegram"></i>
            </a>
          
            <a href="https://twitter.com/gd1214b">
              <i class="fa fa-twitter" title="Twitter"></i>
            </a>
          
            <a href="https://www.facebook.com/gd1214b/">
              <i class="fa fa-facebook" title="Facebook"></i>
            </a>
          
            <a href="https://www.instagram.com/gd1214b5/">
              <i class="fa fa-instagram" title="Instagram"></i>
            </a>
          
            <a href="https://gd1214b.tumblr.com/">
              <i class="fa fa-tumblr" title="Tumblr"></i>
            </a>
          
        
        
      </div>
    </div>
  



  <div style="width: 100%; position: relative;">
    <canvas id="canvasDiyBlock" style="width:100%;">当前浏览器不支持canvas，请更换浏览器后再试</canvas>
    <script src="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/media/js/magic/clock.js"></script>
  </div>

</div>
</div>
<script>
  let sidebarMeta = document.querySelector('#sidebarMeta');
  let scheme = 'gemini';
  let sidebarWrapper = document.querySelector('.sidebar-wrapper');
  if (sidebarMeta && (scheme === 'pisces' || scheme === 'gemini')) {
    document.addEventListener('scroll', function(e) {
      if (document.scrollingElement.scrollTop > parseInt(sidebarMeta.style.marginTop) + 10) {
        sidebarWrapper.classList.add('home-sidebar-fixed')
      } else {
        sidebarWrapper.classList.remove('home-sidebar-fixed')
      }
    });
  }
  </script>
        <div class="section-box tag-line box-shadow-wrapper">
          <section class="section tags-section posts-expand bg-color">
            <div class="padding-wrapper">
  <div class="tag-timeline-box">
    <div class="tag-timeline-wrapper">
      <div class="tag-timeline-title">
        <h2>
          v2ray
          <small class="language" data-lan="tag">标签</small>
        </h2>
      </div>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <a href="https://blog.gd1214b.icu/post/P9MODAcdP/">
        <div class="motion-warpper">
          <div class="tag-post-node">
            <h1>
              06-09
              <small>使用Cloudflare自选IP加速Heroku-v2ray</small>
            </h1>
          </div>
        </div>
      </a>
      
      
      
      
      
      
      
      
      
      
      
      
      
      <a href="https://blog.gd1214b.icu/post/NbdQntVCG/">
        <div class="motion-warpper">
          <div class="tag-post-node">
            <h1>
              06-08
              <small>在Heroku上部署v2ray</small>
            </h1>
          </div>
        </div>
      </a>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    </div>
  </div>
</div>
          </section>
        </div>
      </div>
    </div>
    <div class="footer-box">
  <footer class="footer">
    <span id="busuanzi_container_site_pv">浏览数 <span id="busuanzi_value_site_pv"></span> 次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">访客数 <span id="busuanzi_value_site_uv"></span> 人</span>
    <div class="poweredby">
      <p> <b> 本站访问次数：</b> <br><img src="https://count.getloli.com/get/@gd1214b" alt="访问次数"></br></p>
<p><img src="https://apibug.cn/api/ipqm/?wd=%E6%AC%A2%E8%BF%8E%E5%85%89%E4%B8%B4gd1214b%27s%20blog&apiKey=60829979f01d212c351a634101d764d8"  width="400" height="168" /> </p>
<p><img src="https://www.aigeek.top/api/rili.php"  width="345" height="503"></p>
<p><b> gd1214b保留所有权利。 Copyright © 2021 gd1214b. All Rights Reserved. </b></p>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Q2CHCZ9J41"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Q2CHCZ9J41');
</script>
    </div>
  </footer>
  
  
  <div class="gemini back-to-top" id="back_to_top">
    <i class="fa fa-arrow-up"></i>
    
    <span class="scrollpercent">
      <span id="back_to_top_text">0</span>%
    </span>
    
  </div>
  
  
  
  <div class="bg-img">
    <img src="https://api.apibug.com/api/ecy/&amp;apiKey=72c1f1258741e617b805dd938a387639" />
  </div>
  
  
  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/media/live2d/css/live2d.css" />
<div class="box-scale">
  <div id="landlord" style="left: 5px;bottom: px;"
    data-key="">
    <canvas id="live2d" width="500" height="560" class="live2d"></canvas>
    

      <div class="message" style="opacity:0"></div>
      <div class="live_talk_input_body">
        <div class="live_talk_input_name_body">
          <input name="name" type="text" class="live_talk_name white_input" id="AIuserName" autocomplete="off"
            placeholder="你的名字" />
        </div>
        <div class="live_talk_input_text_body">
          <input name="talk" type="text" class="live_talk_talk white_input" id="AIuserText" autocomplete="off"
            placeholder="要和我聊什么呀？" />
          <button type="button" class="live_talk_send_btn" id="talk_send">发送</button>
        </div>
      </div>
      <input name="live_talk" id="live_talk" value="1" type="hidden" />
      <div class="live_ico_box">
        <div class="live_ico_item type_info" id="showInfoBtn"></div>
        <div class="live_ico_item type_talk" id="showTalkBtn"></div>
        
        <div class="live_ico_item type_youdu" id="youduButton"></div>
        <div class="live_ico_item type_quit" id="hideButton"></div>
        <input name="live_statu_val" id="live_statu_val" value="0" type="hidden" />
        <audio src="" style="display:none;" id="live2d_bgm" data-bgm="0" preload="none"></audio>
        <input id="duType" value="douqilai" type="hidden">
        
      </div>
    
  </div>
</div>
<div id="open_live2d">召唤看板娘</div>
<script>
  var message_Path = 'https://cdn.jsdelivr.net/gh/hsxyhao/live2d.github.io@master/';
  let landlord = document.querySelector('#landlord');
  var apiKey = landlord.dataset.key;
</script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/media/live2d/js/live2d.js"></script>
<script>
	var home_Path = document.location.protocol + '//' + window.document.location.hostname + ":" + window.document.location.port + '/';
	var userAgent = window.navigator.userAgent.toLowerCase();
	var norunAI = ["android", "iphone", "ipod", "ipad", "windows phone", "mqqbrowser", "msie", "trident/7.0"];
	var norunFlag = false;

	for (var i = 0; i < norunAI.length; i++) {
		if (userAgent.indexOf(norunAI[i]) > -1) {
			norunFlag = true;
			break;
		}
	}

	if (!window.WebGLRenderingContext) {
		norunFlag = true;
	}

	if (!norunFlag) {
		var hitFlag = false;
		var AIFadeFlag = false;
		var liveTlakTimer = null;
		var sleepTimer_ = null;
		var AITalkFlag = false;
		var talkNum = 0;
		(function () {
			function renderTip(template, context) {
				var tokenReg = /(\\)?\{([^\{\}\\]+)(\\)?\}/g;
				return template.replace(tokenReg, function (word, slash1, token, slash2) {
					if (slash1 || slash2) {
						return word.replace('\\', '');
					}
					var variables = token.replace(/\s/g, '').split('.');
					var currentObject = context;
					var i, length, variable;
					for (i = 0, length = variables.length; i < length; ++i) {
						variable = variables[i];
						currentObject = currentObject[variable];
						if (currentObject === undefined || currentObject === null) return '';
					}
					return currentObject;
				});
			}

			String.prototype.renderTip = function (context) {
				return renderTip(this, context);
			};

			var re = /x/;
			re.toString = function () {
				showMessage('哈哈，你打开了控制台，是想要看看我的秘密吗？', 5000);
				return '';
			};

			$(document).on('copy', function () {
				showMessage('你都复制了些什么呀，转载要记得加上出处哦~~', 5000);
			});

			function initTips() {
				$.ajax({
					cache: true,
					url: message_Path + 'message.json',
					dataType: "json",
					success: function (result) {
						$.each(result.mouseover, function (index, tips) {
							$(tips.selector).mouseover(function () {
								var text = tips.text;
								if (Array.isArray(tips.text)) text = tips.text[Math.floor(Math.random() * tips.text.length + 1) - 1];
								text = text.renderTip({ text: $(this).text() });
								showMessage(text, 3000);
								talkValTimer();
								clearInterval(liveTlakTimer);
								liveTlakTimer = null;
							});
							$(tips.selector).mouseout(function () {
								showHitokoto();
								if (liveTlakTimer == null) {
									liveTlakTimer = window.setInterval(function () {
										showHitokoto();
									}, 15000);
								};
							});
						});
						$.each(result.click, function (index, tips) {
							$(tips.selector).click(function () {
								if (hitFlag) {
									return false
								}
								hitFlag = true;
								setTimeout(function () {
									hitFlag = false;
								}, 8000);
								var text = tips.text;
								if (Array.isArray(tips.text)) text = tips.text[Math.floor(Math.random() * tips.text.length + 1) - 1];
								text = text.renderTip({ text: $(this).text() });
								showMessage(text, 3000);
							});
							clearInterval(liveTlakTimer);
							liveTlakTimer = null;
							if (liveTlakTimer == null) {
								liveTlakTimer = window.setInterval(function () {
									showHitokoto();
								}, 15000);
							};
						});
					}
				});
			}
			initTips();

			var text;
			if (document.referrer !== '') {
				var referrer = document.createElement('a');
				referrer.href = document.referrer;
				text = '嗨！来自 <span style="color:#0099cc;">' + referrer.hostname + '</span> 的朋友！';
				var domain = referrer.hostname.split('.')[1];
				if (domain == 'baidu') {
					text = '嗨！ 来自 百度搜索 的朋友！<br>欢迎访问<span style="color:#0099cc;">「 ' + document.title.split(' - ')[0] + ' 」</span>';
				} else if (domain == 'so') {
					text = '嗨！ 来自 360搜索 的朋友！<br>欢迎访问<span style="color:#0099cc;">「 ' + document.title.split(' - ')[0] + ' 」</span>';
				} else if (domain == 'google') {
					text = '嗨！ 来自 谷歌搜索 的朋友！<br>欢迎访问<span style="color:#0099cc;">「 ' + document.title.split(' - ')[0] + ' 」</span>';
				}
			} else {
				if (window.location.href == home_Path) { //主页URL判断，需要斜杠结尾
					var now = (new Date()).getHours();
					if (now > 23 || now <= 5) {
						text = '你是夜猫子呀？这么晚还不睡觉，明天起的来嘛？';
					} else if (now > 5 && now <= 7) {
						text = '早上好！一日之计在于晨，美好的一天就要开始了！';
					} else if (now > 7 && now <= 11) {
						text = '上午好！工作顺利嘛，不要久坐，多起来走动走动哦！';
					} else if (now > 11 && now <= 14) {
						text = '中午了，工作了一个上午，现在是午餐时间！';
					} else if (now > 14 && now <= 17) {
						text = '午后很容易犯困呢，今天的运动目标完成了吗？';
					} else if (now > 17 && now <= 19) {
						text = '傍晚了！窗外夕阳的景色很美丽呢，最美不过夕阳红~~';
					} else if (now > 19 && now <= 21) {
						text = '晚上好，今天过得怎么样？';
					} else if (now > 21 && now <= 23) {
						text = '已经这么晚了呀，早点休息吧，晚安~~';
					} else {
						text = '嗨~ 快来逗我玩吧！';
					}
				} else {
					text = '欢迎阅读<span style="color:#0099cc;">「 ' + document.title.split(' - ')[0] + ' 」</span>';
				}
			}
			showMessage(text, 12000);
		})();

		liveTlakTimer = setInterval(function () {
			showHitokoto();
		}, 15000);

		function showHitokoto() {
			if (sessionStorage.getItem("Sleepy") !== "1") {
				if (!AITalkFlag) {
					$.getJSON('https://v1.hitokoto.cn/', function (result) {
						talkValTimer();
						showMessage(result.hitokoto, 0);
					});
				}
			} else {
				hideMessage(0);
				if (sleepTimer_ == null) {
					sleepTimer_ = setInterval(function () {
						checkSleep();
					}, 200);
				}
			}
		}

		function checkSleep() {
			var sleepStatu = sessionStorage.getItem("Sleepy");
			if (sleepStatu !== '1') {
				talkValTimer();
				showMessage('你回来啦~', 0);
				clearInterval(sleepTimer_);
				sleepTimer_ = null;
			}
		}

		function showMessage(text, timeout) {
			if (Array.isArray(text)) text = text[Math.floor(Math.random() * text.length + 1) - 1];
			$('.message').stop();
			$('.message').html(text);
			$('.message').fadeTo(200, 1);
			//if (timeout === null) timeout = 5000;
			//hideMessage(timeout);
		}
		function talkValTimer() {
			$('#live_talk').val('1');
		}

		function hideMessage(timeout) {
			//$('.message').stop().css('opacity',1);
			if (timeout === null) timeout = 5000;
			$('.message').delay(timeout).fadeTo(200, 0);
		}

		function initLive2d() {
			$('#hideButton').on('click', function () {
				if (AIFadeFlag) {
					return false;
				} else {
					AIFadeFlag = true;
					localStorage.setItem("live2dhidden", "0");
					$('#landlord').fadeOut(200);
					$('#open_live2d').delay(200).fadeIn(200);
					setTimeout(function () {
						AIFadeFlag = false;
					}, 300);
				}
			});
			$('#open_live2d').on('click', function () {
				if (AIFadeFlag) {
					return false;
				} else {
					AIFadeFlag = true;
					localStorage.setItem("live2dhidden", "1");
					$('#open_live2d').fadeOut(200);
					$('#landlord').delay(200).fadeIn(200);
					setTimeout(function () {
						AIFadeFlag = false;
					}, 300);
				}
			});
			$('#youduButton').on('click', function () {
				if ($('#youduButton').hasClass('doudong')) {
					var typeIs = $('#youduButton').attr('data-type');
					$('#youduButton').removeClass('doudong');
					$('body').removeClass(typeIs);
					$('#youduButton').attr('data-type', '');
				} else {
					var duType = $('#duType').val();
					var duArr = duType.split(",");
					var dataType = duArr[Math.floor(Math.random() * duArr.length)];

					$('#youduButton').addClass('doudong');
					$('#youduButton').attr('data-type', dataType);
					$('body').addClass(dataType);
				}
			});
			if (apiKey) {
				$('#showInfoBtn').on('click', function () {
					var live_statu = $('#live_statu_val').val();
					if (live_statu == "0") {
						return
					} else {
						$('#live_statu_val').val("0");
						$('.live_talk_input_body').fadeOut(500);
						AITalkFlag = false;
						showHitokoto();
						$('#showTalkBtn').show();
						$('#showInfoBtn').hide();
					}
				});
				$('#showTalkBtn').on('click', function () {
					var live_statu = $('#live_statu_val').val();
					if (live_statu == "1") {
						return
					} else {
						$('#live_statu_val').val("1");
						$('.live_talk_input_body').fadeIn(500);
						AITalkFlag = true;
						$('#showTalkBtn').hide();
						$('#showInfoBtn').show();

					}
				});
				$('#talk_send').on('click', function () {
					var info_ = $('#AIuserText').val();
					var userid_ = $('#AIuserName').val();
					if (info_ == "") {
						showMessage('写点什么吧！', 0);
						return;
					}
					if (userid_ == "") {
						showMessage('聊之前请告诉我你的名字吧！', 0);
						return;
					}
					showMessage('思考中~', 0);
					let protocol = window.location.protocol.indexOf("s") > 0 ? "https" : "http";
					$.ajax({
						type: "get",
						url: `${protocol}://www.tuling123.com/openapi/api?key=${apiKey}&info=${info_}`,
						dataType: "json",
						success: function (res) {
							talkValTimer();
							showMessage(res.text, 0);
							$('#AIuserText').val("");
							sessionStorage.setItem("live2duser", userid_);
						},
						error: function (e) {
							talkValTimer();
							showMessage('似乎有什么错误，请和站长联系！', 0);
						}
					});
				});
			} else {
				$('#showInfoBtn').hide();
				$('#showTalkBtn').hide();
			}
			//获取音乐信息初始化
			var bgmListInfo = $('input[name=live2dBGM]');
			if (bgmListInfo.length == 0) {
				$('#musicButton').hide();
			} else {
				var bgmPlayNow = parseInt($('#live2d_bgm').attr('data-bgm'));
				var bgmPlayTime = 0;
				var live2dBGM_Num = sessionStorage.getItem("live2dBGM_Num");
				var live2dBGM_PlayTime = sessionStorage.getItem("live2dBGM_PlayTime");
				if (live2dBGM_Num) {
					if (live2dBGM_Num <= $('input[name=live2dBGM]').length - 1) {
						bgmPlayNow = parseInt(live2dBGM_Num);
					}
				}
				if (live2dBGM_PlayTime) {
					bgmPlayTime = parseInt(live2dBGM_PlayTime);
				}
				var live2dBGMSrc = bgmListInfo.eq(bgmPlayNow).val();
				$('#live2d_bgm').attr('data-bgm', bgmPlayNow);
				$('#live2d_bgm').attr('src', live2dBGMSrc);
				$('#live2d_bgm')[0].currentTime = bgmPlayTime;
				$('#live2d_bgm')[0].volume = 0.5;
				var live2dBGM_IsPlay = sessionStorage.getItem("live2dBGM_IsPlay");
				var live2dBGM_WindowClose = sessionStorage.getItem("live2dBGM_WindowClose");
				if (live2dBGM_IsPlay == '0' && live2dBGM_WindowClose == '0') {
					$('#live2d_bgm')[0].play();
					$('#musicButton').addClass('play');
				}
				sessionStorage.setItem("live2dBGM_WindowClose", '1');
				$('#musicButton').on('click', function () {
					if ($('#musicButton').hasClass('play')) {
						$('#live2d_bgm')[0].pause();
						$('#musicButton').removeClass('play');
						sessionStorage.setItem("live2dBGM_IsPlay", '1');
					} else {
						$('#live2d_bgm')[0].play();
						$('#musicButton').addClass('play');
						sessionStorage.setItem("live2dBGM_IsPlay", '0');
					}
				});
				window.onbeforeunload = function () {
					sessionStorage.setItem("live2dBGM_WindowClose", '0');
					if ($('#musicButton').hasClass('play')) {
						sessionStorage.setItem("live2dBGM_IsPlay", '0');
					}
				}
				document.getElementById('live2d_bgm').addEventListener("timeupdate", function () {
					var live2dBgmPlayTimeNow = document.getElementById('live2d_bgm').currentTime;
					sessionStorage.setItem("live2dBGM_PlayTime", live2dBgmPlayTimeNow);
				});
				document.getElementById('live2d_bgm').addEventListener("ended", function () {
					var listNow = parseInt($('#live2d_bgm').attr('data-bgm'));
					listNow++;
					if (listNow > $('input[name=live2dBGM]').length - 1) {
						listNow = 0;
					}
					var listNewSrc = $('input[name=live2dBGM]').eq(listNow).val();
					sessionStorage.setItem("live2dBGM_Num", listNow);
					$('#live2d_bgm').attr('src', listNewSrc);
					$('#live2d_bgm')[0].play();
					$('#live2d_bgm').attr('data-bgm', listNow);
				});
				document.getElementById('live2d_bgm').addEventListener("error", function () {
					$('#live2d_bgm')[0].pause();
					$('#musicButton').removeClass('play');
					showMessage('音乐似乎加载不出来了呢！', 0);
				});
			}
			//获取用户名
			var live2dUser = sessionStorage.getItem("live2duser");
			if (live2dUser !== null) {
				$('#AIuserName').val(live2dUser);
			}
			//获取位置
			var landL = sessionStorage.getItem("historywidth");
			var landB = sessionStorage.getItem("historyheight");
			if (landL == null || landB == null) {
				landL = '5px'
				landB = '0px'
			}
			$('#landlord').css('left', landL + 'px');
			$('#landlord').css('bottom', landB + 'px');
			//移动
			function getEvent() {
				return window.event || arguments.callee.caller.arguments[0];
			}
			var smcc = document.getElementById("landlord");
			var moveX = 0;
			var moveY = 0;
			var moveBottom = 0;
			var moveLeft = 0;
			var moveable = false;
			var docMouseMoveEvent = document.onmousemove;
			var docMouseUpEvent = document.onmouseup;
			smcc.onmousedown = function () {
				var ent = getEvent();
				moveable = true;
				moveX = ent.clientX;
				moveY = ent.clientY;
				var obj = smcc;
				moveBottom = parseInt(obj.style.bottom);
				moveLeft = parseInt(obj.style.left);
				if (isFirefox = navigator.userAgent.indexOf("Firefox") > 0) {
					window.getSelection().removeAllRanges();
				}
				document.onmousemove = function () {
					if (moveable) {
						var ent = getEvent();
						var x = moveLeft + ent.clientX - moveX;
						var y = moveBottom + (moveY - ent.clientY);
						obj.style.left = x + "px";
						obj.style.bottom = y + "px";
					}
				};
				document.onmouseup = function () {
					if (moveable) {
						var historywidth = obj.style.left;
						var historyheight = obj.style.bottom;
						historywidth = historywidth.replace('px', '');
						historyheight = historyheight.replace('px', '');
						sessionStorage.setItem("historywidth", historywidth);
						sessionStorage.setItem("historyheight", historyheight);
						document.onmousemove = docMouseMoveEvent;
						document.onmouseup = docMouseUpEvent;
						moveable = false;
						moveX = 0;
						moveY = 0;
						moveBottom = 0;
						moveLeft = 0;
					}
				};
			};
		}
		$(document).ready(function () {
			var AIimgSrc = [];
			let chooseLive2d = 'tororo'
			if (chooseLive2d === 'histoire') {
				AIimgSrc.push(message_Path + "model/histoire/histoire.1024/texture_00.png");
				AIimgSrc.push(message_Path + "model/histoire/histoire.1024/texture_01.png");
				AIimgSrc.push(message_Path + "model/histoire/histoire.1024/texture_02.png");
				AIimgSrc.push(message_Path + "model/histoire/histoire.1024/texture_03.png");
			} else if (chooseLive2d === 'rem') {
				AIimgSrc.push(message_Path + "model/rem/remu2048/texture_00.png");
			} else if (chooseLive2d === 'aoba') {
				AIimgSrc.push(message_Path + "model/aoba/textures/texture_00.png");
			} else if (chooseLive2d === 'hijiki') {
				AIimgSrc.push(message_Path + "model/hijiki/moc/hijiki.2048/texture_00.png");
			} else if (chooseLive2d === 'tororo') {
				AIimgSrc.push(message_Path + "model/tororo/moc/tororo.2048/texture_00.png");
			}
			var images = [];
			var imgLength = AIimgSrc.length;
			var loadingNum = 0;
			for (var i = 0; i < imgLength; i++) {
				images[i] = new Image();
				images[i].src = AIimgSrc[i];
				images[i].onload = function () {
					loadingNum++;
					if (loadingNum === imgLength) {
						var live2dhidden = localStorage.getItem("live2dhidden");
						if (live2dhidden === "0") {
							setTimeout(function () {
								$('#open_live2d').fadeIn(200);
							}, 1300);
						} else {
							setTimeout(function () {
								$('#landlord').fadeIn(200);
							}, 1300);
						}
						let model = '';
						if (chooseLive2d === 'histoire') {
							model = message_Path + "model/histoire/model.json";
						} else if (chooseLive2d === 'rem') {
							model = message_Path + "model/rem/model.json";
						} else if (chooseLive2d === 'aoba') {
							model = message_Path + "model/aoba/model.json";
						} else if (chooseLive2d === 'hijiki') {
							model = message_Path + "model/hijiki/hijiki.model.json";
						} else if (chooseLive2d === 'tororo') {
							model = message_Path + "model/tororo/tororo.model.json";
						}
						setTimeout(function () {
							loadlive2d("live2d", model);
						}, 1000);
						initLive2d();
						images = null;
					}
				}
			}
		});
	}
</script>
  
  
</div>
<script>

  let sideBarOpen = 'sidebar-open';
  let body = document.body;
  let back2Top = document.querySelector('#back_to_top'),
    back2TopText = document.querySelector('#back_to_top_text'),
    drawerBox = document.querySelector('#drawer_box'),
    rightSideBar = document.querySelector('.sidebar'),
    viewport = document.querySelector('body');

  function scrollAnimation(currentY, targetY) {

    let needScrollTop = targetY - currentY
    let _currentY = currentY
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10)
      _currentY += dist
      window.scrollTo(_currentY, currentY)
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY)
      } else {
        window.scrollTo(_currentY, targetY)
      }
    }, 1)
  }

  back2Top.addEventListener("click", function (e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });

  window.addEventListener('scroll', function (e) {
    let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
    if (percent > 1 && !back2Top.classList.contains('back-top-active')) {
      back2Top.classList.add('back-top-active');
    }
    if (percent == 0) {
      back2Top.classList.remove('back-top-active');
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });


  let hasCacu = false;
  window.addEventListener('resize', function (e) {
    calcuHeight();
  });

  function calcuHeight() {
    // 动态调整站点概览高度
    if (!hasCacu && back2Top.classList.contains('pisces') || back2Top.classList.contains('gemini')) {
      let sideBar = document.querySelector('.sidebar');
      let navUl = document.querySelector('#site_nav');
      sideBar.style = 'margin-top:' + (navUl.offsetHeight + navUl.offsetTop + 15) + 'px;';
      hasCacu = true;
    }
  }
  calcuHeight();

  let open = false, MOTION_TIME = 300, RIGHT_MOVE_DIS = '320px';

  if (drawerBox) {
    let rightMotions = document.querySelectorAll('.right-motion');
    let right = drawerBox.classList.contains('right');

    let transitionDir = right ? "transition.slideRightIn" : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingRight: '0px'
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS
      };
      closeProp = {
        paddingLeft: '0px'
      };
    }

    drawerBox.onclick = function () {
      open = !open;
      jQuery.Velocity(rightSideBar, 'stop');
      jQuery.Velocity(viewport, 'stop');
      jQuery.Velocity(rightMotions, 'stop');
      if (open) {
        jQuery.Velocity(rightSideBar, {
          width: RIGHT_MOVE_DIS
        }, {
          duration: MOTION_TIME,
          begin: function () {
            jQuery.Velocity(rightMotions, transitionDir, {});
          }
        })
        jQuery.Velocity(viewport, openProp, {
          duration: MOTION_TIME
        });
      } else {
        jQuery.Velocity(rightSideBar, {
          width: '0px'
        }, {
          duration: MOTION_TIME,
          begin: function () {
            jQuery.Velocity(rightMotions, {
              opacity: 0
            });
          }
        })
        jQuery.Velocity(viewport, closeProp, {
          duration: MOTION_TIME
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle('muse-line');
      }
      drawerBox.classList.toggle(sideBarOpen);
    }
  }

  // 链接跳转
  let newWindow = 'true'
  if (newWindow === 'true') {
    let links = document.querySelectorAll('.post-body a')
    links.forEach(item => {
      if (!item.classList.contains('btn')) {
        item.setAttribute("target", "_blank");
      }
    })
  }

  let faSearch = document.querySelector('#fa_search');
  faSearch && faSearch.addEventListener('click', function () {
    document.querySelector('#search_mask').style = ''
  })

  // 代码高亮
  hljs.initHighlightingOnLoad();
  
  // 离开当前页title变化
  var leaveTitle = "";
  var normal_title = document.title;
  if (leaveTitle) {
    document.addEventListener('visibilitychange', function () {
      if (document.visibilityState == 'hidden') {
        normal_title = document.title;
        document.title = leaveTitle;
      } else {
        document.title = normal_title;
      }
    });
  }

</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/media/css/jquery.fancybox.css" />
<script src="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/media/js/jquery.fancybox.js"></script>

<script>
  let images = document.querySelectorAll('.section img');
  images.forEach(image => {
    var parent = image.parentElement;
    var next = image.nextElementSibling;
    parent.removeChild(image);
    var aelem = document.createElement('a');
    aelem.href = image.src;
    aelem.dataset['fancybox'] = 'images';
    aelem.dataset['rel'] = 'fancybox-button';
    aelem.classList.add('fancybox');
    aelem.appendChild(image);
    parent.insertBefore(aelem, next);
  })
</script>

  </div>
</body>

<div class="search-mask" id="search_mask" style="display: none;">
  <div class="search-box">
    <div class="search-title">
      <i class="fa fa-search"></i>
      <div class="input-box">
        <input id="search" type="text" class="language" data-lan="search" placeholder="搜索">
      </div>
      <i id="close" class="fa fa-times-circle"></i>
    </div>
    <div class="stat-box">
      <span id="stat_count">0</span><span class="language" data-lan="stat">条相关条目，使用了</span><span id="stat_times">0</span><span class="language" data-lan="stat-time">毫秒</span>
      <hr>
    </div>
    <div class="result" id="result">
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/yZTkyJpRj/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;本文转自:&lt;a href=&#34;https://m.ithome.com/html/523947.htm&#34;&gt;https://m.ithome.com/html/523947.htm&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;987 年 9 月 20 日，北京中国兵器工业计算机应用研究所的钱天白教授，发出了我国第一封电子邮件，内容是：&lt;/p&gt;
&lt;p&gt;“Across the Great Wall we can reach every corner in the world. ”（“越过长城，我们能到达世界的每个角落。” ）&lt;/p&gt;
&lt;p&gt;这封邮件当时具有极为深远的意义，它被视为中国与互联网的第一次 “亲密接触”。而钱天白教授，也被世人称为 “中国互联网之父”。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555143911.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
其实，当时钱天白所使用的网络，并不是我国自主建设的 Internet 骨干网，而是 1986 年计算机应用技术研究所与德国卡尔斯鲁厄大学合作建设的一个国际联网项目——中国学术网（Chinese Academic Network，简称 CANET）。&lt;/p&gt;
&lt;p&gt;这封邮件的传输路径，也颇为曲折。邮件发出之后，首先通过意大利公用分组网 ITAPAC 设在北京侧的 PAD 机，跨过半个地球，进入意大利本土的 ITAPAC 主网。然后，再进入德国的 DATEX―P 分组网。最终，到达卡尔斯鲁厄大学。当时，这条线路的速率，仅仅只有 300bps。&lt;/p&gt;
&lt;p&gt;不管怎么说，这封邮件还是拉开了中国互联网时代的序幕。此后，越来越多的国内高校和科研院所，开始加入到互联网的研究中，并尝试组建更大规模的计算机网络。&lt;/p&gt;
&lt;h1 id=&#34;技术探索&#34;&gt;技术探索&lt;/h1&gt;
&lt;p&gt;1988 年初，中国邮电部正式建成了国内第一个 X.25 分组交换网——CNPAC，覆盖了北京、上海、广州、沈阳、西安、武汉、成都、南京、深圳等城市。&lt;/p&gt;
&lt;p&gt;同年，中科院高能物理研究所采用 X.25 协议，将该单位的 DECnet（DEC 公司推出的一种小型机网络）与西欧中心的 DECnet 进行连接，实现了计算机国际远程连网，还实现了与欧洲和北美地区的电子邮件通信。&lt;/p&gt;
&lt;p&gt;12 月，清华大学校园网采用胡道元教授从加拿大 UBC 大学引进的电子邮件软件包（采用 X.400 协议），通过 X.25 网与加拿大 UBC 大学相连，开通了电子邮件应用。&lt;/p&gt;
&lt;p&gt;1989 年 5 月，中国研究网（CRN）通过当时邮电部的 CNPAC，实现了与德国研究网（DFN）的互连。借助 DFN 的网关，CRN 可以与 Internet 沟通。&lt;/p&gt;
&lt;p&gt;1991 年，中科院高能物理研究所采用 DECNET 协议，以 X. 25 方式连入美国斯坦福线性加速器中心（SLAC）的 LIVEMORE 实验室，开通了电子邮件应用。&lt;/p&gt;
&lt;p&gt;一个又一个连接的建立，振奋了国人。然而，这些连接都只能算是 “Internet 间接连接”或者 “单功能（邮件）连接”，并不是真正的 “完整 Internet 直接连接”。后来，学术界和政府层面很快开始了建立完整直接连接的尝试。&lt;/p&gt;
&lt;p&gt;1989 年 10 月，中关村地区教育与科研示范网络项目正式启动。该项目由世界银行提供贷款，国家计委（国家计划委员会）、国家教委（国家教育委员会）、中国科学院、国家自然科学基金会共同参与投资和支持。世界银行将其命名为 “National Computing and Networking Facility of China”，也就是 NCFC。&lt;/p&gt;
&lt;p&gt;1992 年底，NCFC 完成了三个院校网（中科院院网 CASNET、清华大学校园网 TUNET、北京大学校园网 PUNET）的建设。一年后，NCFC 主干网工程完工，采用高速光缆和路由器实现了三个院校网相互联通。&lt;/p&gt;
&lt;p&gt;接下来，NCFC 的目标，就是直接连入 Internet。&lt;/p&gt;
&lt;h1 id=&#34;阻力重重&#34;&gt;阻力重重&lt;/h1&gt;
&lt;p&gt;众所周知，Internet 源于美国，虽然叫做国际互联网，但实际上当时处于美国的控制之下。中国想要真正连入 Internet，必须得到美国方面的同意。&lt;/p&gt;
&lt;p&gt;中美双方的学术界人士，对于中国连入 Internet 这件事是非常积极的。&lt;/p&gt;
&lt;p&gt;1991 年 10 月，在中美高能物理年会上，美方发言人怀特 · 托基提出，中国应该尽快接入 Internet。&lt;/p&gt;
&lt;p&gt;1992 年 6 月，在日本神户举行的 INET&#39;92 年会上，中国科学院钱华林研究员约见美国国家科学基金会国际联网部负责人，第一次正式提出，希望能够连入 Internet。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555198471.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
钱华林&lt;/p&gt;
&lt;p&gt;结果，中方提出的请求，遭到来自美国政界的反对。之所以反对，是因为他们认为，来自社会主义阵营的中国，会利用 Internet 偷取美国的信息和技术研究成果。&lt;/p&gt;
&lt;p&gt;经过反复的谈判和沟通，美方勉强同意，可以先建立一根专线连接。美国对这根专线提出了苛刻的要求：1、只能连入能源科学网（ESNET）；2、不得散布病毒；3、不得用于军事和商业领域。&lt;/p&gt;
&lt;p&gt;为了长远考虑，中方接受了这些条件。1993 年 3 月 2 日，中科院高能物理研究所接入美国斯坦福线性加速器中心（SLAC）的 64K 专线正式开通，成为中国 “部分连入 Internet”的第一根专线。&lt;/p&gt;
&lt;p&gt;1993 年 6 月，NCFC 专家们在 INET&#39;93 年会上，利用各种机会重申了中国 “全功能连入 Internet”的要求，获得大部分到会人员的支持，极大地推动了项目的进展。&lt;/p&gt;
&lt;p&gt;1994 年 4 月初，中美科技合作联委会在美国华盛顿举行。会前，中科院副院长胡启恒代表中方向美国国家科学基金会（NSF）重申连入 Internet 的要求，得到美方的认可。至此，所有的阻碍都被消除。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555221767.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
胡启恒&lt;/p&gt;
&lt;p&gt;1994 年 4 月 20 日，NCFC 接入 Internet 的 64K 国际卫星专线正式开通（通过美国 Sprint 公司），实现了与 Internet 的全功能连接。&lt;/p&gt;
&lt;p&gt;从这一天起，中国正式迈入互联网世界的大门，被国际上承认为真正拥有全功能 Internet 的第 77 个国家。&lt;/p&gt;
&lt;p&gt;一个月后，5 月 21 日，中科院计算机网络信息中心完成了中国国家顶级域名（CN）服务器的设置，改变了中国的 CN 顶级域名服务器一直放在国外的历史。（中国顶级域名 CN 由钱天白教授于 1990 年 11 月 28 日代表中国正式在 SRI-NIC 正式注册登记。）&lt;/p&gt;
&lt;p&gt;NCFC 连入 Internet 之后，中科院对它进行了进一步的扩建。&lt;/p&gt;
&lt;p&gt;1995 年 4 月，中科院启动京外单位联网工程（简称 “百所联网”工程），目标是在北京地区已经入网的 30 多个研究所的基础上把网络扩展到全国 24 个城市，实现国内各学术机构的计算机互联，并与 Internet 互联。&lt;/p&gt;
&lt;p&gt;1996 年 2 月，中科院做出决定，将以 NCFC 为基础发展起来的这个互联网络，正式改名为 “中国科技网（CSTNet）”。&lt;/p&gt;
&lt;h1 id=&#34;四大-ip-骨干网&#34;&gt;四大 IP 骨干网&lt;/h1&gt;
&lt;p&gt;1994 年 9 月，就在中国迈入互联网世界后不久，邮电部电信总局与美国商务部签订协议，正式启动中国公用计算机互联网的建设。这个网，就是现在大名鼎鼎的中国第一骨干网——ChinaNet。&lt;/p&gt;
&lt;p&gt;1995 年 1 月，根据协议约定，邮电部电信总局分别在北京、上海开通了接入美国 Internet 的 64K 专线（同样是通过美国 Sprint 公司）。北京和上海这两个节点之间，采用 2M 带宽相连。&lt;/p&gt;
&lt;p&gt;1996 年 1 月，电信总局正式开始向全社会提供 Internet 接入服务（通过电话网、DDN 专线以及 X.25 网等方式）。这一举动，宣告了中国互联网民用化时代的开始。&lt;/p&gt;
&lt;p&gt;由于窄带拨号接入的入网领示号为 163，因此 ChinaNet 也被称为 163 网络（和网易的 163 没有关系）。&lt;/p&gt;
&lt;p&gt;除了中国科技网（CSTNet）和中国公用计算机互联网（ChinaNet）之外，国内当时还同步建设了中国教育和科研计算机网（CERNET）和中国金桥信息网（CHINAGBN）&lt;/p&gt;
&lt;h2 id=&#34;中国教育和科研计算机网cernet&#34;&gt;中国教育和科研计算机网（CERNET）&lt;/h2&gt;
&lt;p&gt;1994 年 7 月初，由清华大学等六所高校建设的 “中国教育和科研计算机网”试验网开通，并通过 NCFC 的国际出口与 Internet 互联。&lt;/p&gt;
&lt;p&gt;1994 年 8 月，由国家计委投资，国家教委主持的中国教育和科研计算机网（CERNET）正式立项。&lt;/p&gt;
&lt;p&gt;1995 年 12 月，“中国教育和科研计算机网（CERNET）示范工程”建设完成。这张网，就是我们现在常说的 “教育网”（大学生读者应该比较熟悉）。&lt;/p&gt;
&lt;h2 id=&#34;中国金桥信息网chinagbn&#34;&gt;中国金桥信息网（CHINAGBN）&lt;/h2&gt;
&lt;p&gt;1993 年 3 月 12 日，朱镕基副总理主持会议，提出和部署建设国家公用经济信息通信网（简称金桥工程）。&lt;/p&gt;
&lt;p&gt;1993 年 8 月 27 日，李鹏总理批准使用 300 万美元总理预备费，支持启动金桥前期工程建设。&lt;/p&gt;
&lt;p&gt;1994 年 6 月 8 日，金桥前期工程建设全面展开。1995 年 8 月，金桥工程初步建成，在 24 省市开通联网（卫星网），并与国际网络实现互联。&lt;/p&gt;
&lt;p&gt;1996 年 9 月 6 日，中国金桥信息网（CHINAGBN）连入美国的 256K 专线正式开通。中国金桥信息网宣布开始提供 Internet 服务，主要提供专线集团用户的接入和个人用户的单点上网服务。&lt;/p&gt;
&lt;p&gt;最终，国内形成了四大骨干网的格局。正是这些网络，支撑起了中国互联网的起步。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555306931.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
1997 年 12 月，四大骨干网实现互联互通。此后，中国的互联网，进入了崭新的时代！&lt;/p&gt;
&lt;h1 id=&#34;中国电信&#34;&gt;中国电信&lt;/h1&gt;
&lt;p&gt;上面我们提到，中国邮电部在 1995 年建立了 ChinaNet（中国公用计算机互联网），也就是大家俗称的 163 网。&lt;/p&gt;
&lt;p&gt;这张网，当时是国内普通网民接入互联网的主要通道。&lt;/p&gt;
&lt;p&gt;因为当时中国邮电还没有实行 “邮电分营”，所以这张网是邮电部电信总局负责建设和维护。&lt;/p&gt;
&lt;p&gt;1997 年，邮电部实施 “邮电分营”，这张网的责任主体，变成了 “中国电信”（老电信）。&lt;/p&gt;
&lt;p&gt;同年，中国电信各省公司开始独立建设省内 IP 骨干网（省网）。建成之后，整个 ChinaNet 分为骨干网、省网和城域网三级结构。其中，骨干网分为核心层、汇聚层两层。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555369281.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
某省组网范例&lt;/p&gt;
&lt;p&gt;1998 年 7 月，ChinaNet 骨干网第二阶段建设开始。八个大区域的骨干带宽被扩展到 155M，且所有节点路由器被替换为千兆路由器。&lt;/p&gt;
&lt;p&gt;到了 2000 年的下半年，中国电信借助 DWDM（波分复用）和千兆路由器技术，再次对 ChinaNet 进行大规模升级和扩容。网络节点间的路由中继，由 155M 提升到 2.5Gbps，提速 16 倍。&lt;/p&gt;
&lt;p&gt;截至到 2000 年底，ChinaNet 在国内总带宽已达到 800Gbps。2001 年 3 月，ChinaNet 的国际出口总带宽突破 3Gbps。&lt;/p&gt;
&lt;p&gt;从 2002 年开始，ChinaNet 逐步进入 10G 时代。ChinaNet 的数据传输能力，达到国际先进水平。&lt;/p&gt;
&lt;p&gt;2003 年，ChinaNet 进行优化整合，推行扁平化，取消省网，网络结构调整为骨干网和城域网两级。&lt;/p&gt;
&lt;p&gt;与此同时，中国电信启动了多厂商 MSTP（多业务传送平台）的互通测试，推动 TDM 向以太网的转型。&lt;/p&gt;
&lt;p&gt;再后来的故事，大家应该都比较熟悉了，就是往 OTN 和单波大容量演进，朝着 40G、100G（2015 年）的方向发展。&lt;/p&gt;
&lt;p&gt;目前的骨干网，正在逐步普及单波 400G。如果按 60 波算，单光纤的传输容量能达到 20T 以上。&lt;/p&gt;
&lt;p&gt;除了容量之外，就是 OXC 全光交叉、IPv6、SRv6、SDN 等新技术的引入、改造和普及，此前小枣君都做过详细的介绍。&lt;/p&gt;
&lt;p&gt;接下来，我们再深入了解一下 ChinaNet 的整体情况。&lt;/p&gt;
&lt;p&gt;一般来说，运营商的骨干网架构和技术细节属于秘密信息，不对外公开。但是，如今在互联网上，这些信息基本上都能查到。我就基于能公开查到的信息，大致介绍一下（可能有所变动，仅供参考）。&lt;/p&gt;
&lt;p&gt;从架构来说，ChinaNet 分为骨干网和城域网（前面有说，干掉了省网），骨干网又分核心层、汇聚层和接入层。&lt;/p&gt;
&lt;p&gt;北京、上海、广州，是 ChinaNet 的超级核心。除了超级核心之外，ChinaNet 还有天津、西安、南京、杭州、武汉、成都等普通核心。所有核心之间，采用 Full-Mesh 连接。国际出入口，以及运营商之间的互联互通，基本上都在核心层。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555392422.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
找到一张老图，仅供参考&lt;/p&gt;
&lt;p&gt;汇聚层一般都在各省省会或第二大城市，采用双方向互联，分别连到一个超级核心和一个普通核心，有的省份会三方向互联。&lt;/p&gt;
&lt;p&gt;接入层，就是汇聚层到各个地市城域网。&lt;/p&gt;
&lt;p&gt;除了 ChinaNet 之外，中国电信还有一张非常重要的骨干网——CN2。&lt;/p&gt;
&lt;p&gt;2004 年左右，为了满足高品质业务的需求，中国电信启动了 CN2 网络的招标建设。&lt;/p&gt;
&lt;p&gt;CN2，全称 Chinatelecom Next Carrier Network（中国电信下一代承载网络），简称 CNCN，又称 CN2，刚好符合它作为中国电信第二张承载网的身份。&lt;/p&gt;
&lt;p&gt;中国电信将 CN2 定位为 “精品网络项目”，非常有前瞻性。后来的事实证明，CN2 在抢占政企高端市场方面，确实发挥了重要作用。&lt;/p&gt;
&lt;p&gt;CN2 的基本建网特点，就是扁平化、大容量和轻载运行。建网初期的核心技术，是 IP/MPLS。&lt;/p&gt;
&lt;p&gt;从架构上来看，CN2 和 ChinaNet 有很大区别。CN2 一共是 7 个核心节点，分别是北京、上海、广州、南京、武汉、西安、成都。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555412096.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
同样是一张老图，供参考&lt;/p&gt;
&lt;p&gt;此外，CN2 还在香港、新加坡、东京、伦敦、法兰克福等国际大城市设立了 POP 节点，提供国际 Internet 接入和网间互联业务。&lt;/p&gt;
&lt;p&gt;CN2 作为高端网络，面向客户的时候，也进行了进一步的产品等级划分，例如 CN2 GT、CN2 GIA。&lt;/p&gt;
&lt;p&gt;CN2 GT：GT 是 Global Transit 的简称，是 CN2 中的中端产品，在 CN2 里的等级比较低，但是相比于传统 163 骨干网依然有不少的提升。&lt;/p&gt;
&lt;p&gt;CN2 GIA：GIA 是 Global Internet Access 的简称，是目前 CN2 中的最高端的产品，在 CN2 中的等级最高，线路表现最好、最稳定，价格也是最高。&lt;/p&gt;
&lt;p&gt;2015 年，中国电信为了加强数据中心之间的节点互联，满足云服务日益增长的需求，还启动建设了 “第三张”全国骨干网——CN2-DCI（Data Center Interconnection）。关于这张网，网上目前公开的信息极少。&lt;/p&gt;
&lt;p&gt;以上就是中国电信 IP 骨干网的大致情况。&lt;/p&gt;
&lt;h1 id=&#34;中国联通&#34;&gt;中国联通&lt;/h1&gt;
&lt;p&gt;接下来，我们再看看中国联通的骨干网。&lt;/p&gt;
&lt;p&gt;1994 年 7 月 19 日，中国联通经国务院批准，正式挂牌成立，主要经营 GSM 移动通信业务。&lt;/p&gt;
&lt;p&gt;随着 2G 向 3G 的演进，有了 GPRS 数据业务，中国联通也建设了 UNINET 骨干网，作为自家 GPRS 网络的接入点，也是面向全国提供互联网服务的载体。&lt;/p&gt;
&lt;p&gt;因为 UNINET 的拨号上网接入号码为 “165”，所以这个网也被称为 165 网。&lt;/p&gt;
&lt;p&gt;1999 年 10 月 22 日，中国网通（小网通、老网通）由中科院、广电总局、铁道部、上海市政府四方出资成立，在全国 17 个城市开通互联网服务。&lt;/p&gt;
&lt;p&gt;网通也建设了一张自己的骨干网，就是 “中国网通公用互联网”（CNCNET）。&lt;/p&gt;
&lt;p&gt;此外，邮电部当年除了 163 网之外，在 1997 年还建设了一张中国公众多媒体通信网。这张网络很特别，完全独立于 163 网，采用私有地址 10.0.0.0/8，只能国内互相访问，相当于是一张 “国内局域网”。如果需要访问 163 网和 Internet 的话，需要找专门的代理服务器跳转。&lt;/p&gt;
&lt;p&gt;因为这张网络的接入号码为 169，故又称 169 网。&lt;/p&gt;
&lt;p&gt;169 网有一个很大的优势，就是价格便宜。当时 163 的使用费是每小时 10 元，而 169 只需要每小时 4 元。因此，169 受到很多普通网民的喜爱。&lt;/p&gt;
&lt;p&gt;2002 年，国内电信行业重组，中国电信 “南北分家”。北方九省一市电信公司从原中国电信剥离，与小网通、吉通合并，成立新的中国网通（大网通、新网通）。&lt;/p&gt;
&lt;p&gt;于是，中国网通在既有 CNCNET 的基础上，得到了中国电信从 163 网拆出来的部分精华骨干网。为了区别于中国电信的 163 网，网通带走的这个网被称为 “CHINA169”。&lt;/p&gt;
&lt;p&gt;值得一提的是，当时吉通并入中国网通，CHINAGBN（中国金桥网）也随之并入 CHINA169 中。&lt;/p&gt;
&lt;p&gt;2008 年，中国电信业再次重组，中国联通和中国网通合并，变成新的中国联通。&lt;/p&gt;
&lt;p&gt;新的中国联通，自然而然地接管了 CHINA169。&lt;/p&gt;
&lt;p&gt;此外，网通最初的骨干网 CNCNET（主要承载原网通 NGN 软交换、DCN 等业务）也交给联通运营。这个 CNCNET（自治域为 AS9929，经常被称为 9929 网络）保持相对独立，后来被称为 “联通 A 网”。&lt;/p&gt;
&lt;p&gt;与之相对应的 “联通 B 网”，就是原联通建设的 IP 承载网，主要承载 2G/3G 移动网业务的那个网。后来好像逐渐没用了，业务迁到了 A 网。&lt;/p&gt;
&lt;p&gt;2018 年，联通将 IP 承载 A 网改名为 CUII，中国联通工业（产业）互联网。CUII 的定位有点像中国电信的 CN2，主要提供国际和国内跨地市 MPLS-VPN 和大客户互联网专线任务的承载，常用于企业宽带和 IDC，极少用于家用宽带。&lt;/p&gt;
&lt;p&gt;总之，联通主要就是 “China169+CUII”的双网格局。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555456726.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
由于历史原因，联通 China169 的网络流量存在较大的南北差异，北方 10 省的业务流量明显大于南方。&lt;/p&gt;
&lt;p&gt;早期的时候，China169 全网分为四个大区，分别是北方大区、华东大区、南方大区、西部大区。设置了北京 1、北京 2、上海、广州四个核心节点，并将陕西、四川、山东、辽宁设为区域核心节点。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555476419.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;中国移动&#34;&gt;中国移动&lt;/h1&gt;
&lt;p&gt;再来说说中国移动。&lt;/p&gt;
&lt;p&gt;中国移动的骨干网发展史没有电信和联通那么复杂，这家公司本身的历史就很简单。&lt;/p&gt;
&lt;p&gt;2000 年 4 月 20 日，中国移动正式成立，5 月 16 日挂牌。&lt;/p&gt;
&lt;p&gt;中移成立初期，也是主要以移动语音业务为主。后来，随着业务的发展，才逐步建设了较为完整的 IP 骨干网，名为 CMNET（China Mobile Network，中国移动互联网），自治域为 AS9808，也称 9808 网络。&lt;/p&gt;
&lt;p&gt;当时，CMNET 是中国移动 GPRS 网络的两大接入点（另一个是 CMWAP）之一。通过 CMNET 接入点，中国移动手机用户可以接入 CMNET 网络，访问 Internet。&lt;/p&gt;
&lt;p&gt;虽然 CMNET 起步比较晚（相对来说），但发展速度非常快。尤其是这些年中国移动拼命拓展固网宽带业务，流量增长迅猛，扩容招标也是非常频繁。&lt;/p&gt;
&lt;p&gt;CMNET 为骨干网和省网两级自治域、多层结构。骨干网分为核心层、汇聚层和接入层。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555503680.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
北京、上海、广州 3 个节点为核心节点，它们与相连链路共同构成骨干核心层。骨干核心层提供大区内省份流量的交换，并负责全网与国际 Internet、国内其他运营商的互联。&lt;/p&gt;
&lt;p&gt;汇聚层负责汇接各省到骨干网的连接。南京、武汉、成都、西安、沈阳等节点为汇聚节点，负责本大区内省份流量之间的交换。&lt;/p&gt;
&lt;p&gt;接入层负责汇聚本省省际流量和出网流量。接入节点一般双上联核心节点，部分流量较大的省份，会采用多上联。&lt;/p&gt;
&lt;p&gt;国内和国际网间互联方面，节点都设置在北京、上海、广州。&lt;/p&gt;
&lt;p&gt;除了 CMNET 之外，中国移动还有 IP 专用承载网，简称 IP 专网。当时建设这个网的主要目的，是为了承载高价值客户业务，如话音，流媒体，信令，网管，大型客户的 VPN 等业务。&lt;/p&gt;
&lt;p&gt;IP 专网为三层结构，分别为核心、汇聚和接入三层，采用单一自治域，目前已经延伸到国内 330 多个主要地市。大致架构如下：&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555523849.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h1 id=&#34;中国广电&#34;&gt;中国广电&lt;/h1&gt;
&lt;p&gt;最后再说说新入坑的中国广电吧。&lt;/p&gt;
&lt;p&gt;2018 年，中国广电的广电宽带获批骨干网运营资质，启动全国骨干网建设，并将其命名为 CBNNET。&lt;/p&gt;
&lt;p&gt;CBNNET 的主要建设单位，是中国广电的子公司中国有线。&lt;/p&gt;
&lt;p&gt;2019 年，广电骨干网已经与中国电信的骨干网进行了互联互通。&lt;/p&gt;
&lt;p&gt;按照规划，CBNNET 将是一张 “五纵五横”的全国性 IP 骨干网，全网 100G OTN 起步，部分关键链路 400G/1T OTN。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555561296.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
未来，CBNNET 将采用三层架构，即国干层、省网 / 接入层、互联层，覆盖 337 个地市，逐步形成双平面网络，直接提供宽带出口，互联网总出口带宽将达到 5T。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555575630.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;结语&#34;&gt;结语&lt;/h1&gt;
&lt;p&gt;好啦，以上就是目前国内运营商骨干网的大致情况。简单画个表，如下：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555598219.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
值得一提的是，包括中移在内的运营商，针对现有骨干网容量不足的情况，普遍建设了所谓的 “第二平面”。“第二平面”属于扩容，并不是新建独立的第二张网络。&lt;/p&gt;
&lt;p&gt;除了上述骨干网之外，我们国家还有几张针对特定用户的骨干网，分别如下：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623555614338.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
">大话中国骨干网</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/F2_C5EVQh/"" data-c="
          &lt;h1 id=&#34;前言&#34;&gt;前言&lt;/h1&gt;
&lt;p&gt;由于众所周知的原因，GitHub在中国大陆地区收到的干扰严重，大部分情况下根本无法连接，这也导致Gridea的同步失败问题。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623391923562.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;解决方案&#34;&gt;解决方案&lt;/h1&gt;
&lt;p&gt;通常的解决方案是通过代理服务器连接，但由于大部分的代理软件（如v2rayN等），只能更改系统的代理设置，，像Gridea这些不遵守系统代理设置的软件，无法通过代理服务器连接。&lt;/p&gt;
&lt;p&gt;下面介绍一种本人亲测有效的方法。&lt;/p&gt;
&lt;h2 id=&#34;第一步-连接上代理&#34;&gt;第一步 连接上代理&lt;/h2&gt;
&lt;p&gt;这一步不做过多讲解。&lt;/p&gt;
&lt;h2 id=&#34;第二步-下载并安装github-desktop&#34;&gt;第二步 下载并安装GitHub Desktop&lt;/h2&gt;
&lt;p&gt;下载地址：&lt;a href=&#34;https://central.GitHub.com/deployments/desktop/desktop/latest/win32&#34;&gt;https://central.GitHub.com/deployments/desktop/desktop/latest/win32&lt;/a&gt;&lt;br&gt;
打开安装程序即可自动完成安装。&lt;/p&gt;
&lt;h2 id=&#34;第三步-登陆github账号&#34;&gt;第三步 登陆GitHub账号&lt;/h2&gt;
&lt;h3 id=&#34;1点击-sign-into-githubcom&#34;&gt;1.点击 Sign into GitHub.com&lt;/h3&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623481745688.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;2在浏览器里登陆你的github账号&#34;&gt;2.在浏览器里登陆你的GitHub账号&lt;/h3&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623481982934.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;第四步-清空gridea-配置目录下ouput文件夹里的所有内容&#34;&gt;第四步 清空Gridea 配置目录下ouput文件夹里的所有内容&lt;/h2&gt;
&lt;p&gt;注意output文件夹不要删除&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623482115749.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;第五步-在github-desktop中克隆你的博客仓库&#34;&gt;第五步 在GitHub Desktop中克隆你的博客仓库&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623482247255.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
注意目录要选择Gridea 配置目录下ouput文件夹&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623482322654.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;第六步-同步gridea&#34;&gt;第六步 同步Gridea&lt;/h2&gt;
&lt;p&gt;在Gridea中依次点击 远程 &amp;gt; 检测远程连接 &amp;gt; 同步&lt;br&gt;
这一步无所谓是否同步成功.&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623482746893.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;第七步-同步到github上&#34;&gt;第七步 同步到GitHub上&lt;/h2&gt;
&lt;p&gt;在GitHub Desktop 中点击 Pushu origin&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623482930640.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
等候完成即可。&lt;/p&gt;
&lt;h1 id=&#34;其他说明&#34;&gt;其他说明&lt;/h1&gt;
&lt;p&gt;此时你的博客应该已经同步到GitHub上了，如果有任何问题，欢迎在下方的评论区中提出。&lt;/p&gt;
">解决Gridea同步失败的问题</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/P9MODAcdP/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;请先阅读本站的免责声明:&lt;a href=&#34;https://blog.gd1214b.icu/post/disclaimers/&#34;&gt;https://blog.gd1214b.icu/post/disclaimers/&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
&lt;strong&gt;请遵循当地法律使用，如您有违反当地法律造成的责任，本站拒不承担.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;前言&#34;&gt;前言&lt;/h1&gt;
&lt;p&gt;在&lt;a href=&#34;https://blog.gd1214b.icu/post/NbdQntVCG/&#34;&gt;上一篇文章&lt;/a&gt;中,我们介绍了在Heroku上部署v2ray的方法。但在中国大陆直连Heroku服务器的速度不是很快，因此我们使用Cloudflare的自选IP来加速连接。&lt;/p&gt;
&lt;h1 id=&#34;配置cloudflare反向代理&#34;&gt;配置CloudFlare反向代理&lt;/h1&gt;
&lt;h2 id=&#34;1&#34;&gt;1.&lt;/h2&gt;
&lt;p&gt;首先登陆&lt;a href=&#34;https://dash.cloudflare.com/&#34;&gt;CloudFlare官网&lt;/a&gt;，然后点击 右侧的 Workers.&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623238734720.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;2&#34;&gt;2.&lt;/h2&gt;
&lt;p&gt;接着点击创建Workers&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623238793121.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;3&#34;&gt;3.&lt;/h2&gt;
&lt;p&gt;接着复制下方代码，并添加进去.注意把下面的中文替换成你的Heroku应用名称&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;addEventListener(
  &amp;quot;fetch&amp;quot;,event =&amp;gt; {
     let url=new URL(event.request.url);
     url.hostname=&amp;quot;你的heroku应用名称.herokuapp.com&amp;quot;;
     let request=new Request(url,event.request);
     event. respondWith(
       fetch(request)
     )
  }
)
&lt;/code&gt;&lt;/pre&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623239005214.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h1 id=&#34;使用cloudflare自选ip&#34;&gt;使用Cloudflare自选IP&lt;/h1&gt;
&lt;p&gt;下载&lt;a href=&#34;https://cdn.jsdelivr.net/gh/gd1214b/files@main/CloudflareST_windows_amd64.zip&#34;&gt;这个&lt;/a&gt;文件,解压之后打开这个程序:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623239272158.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
这个程序会对Cloudflare的所有IP进行测速，这可能会需要几分钟的时间。&lt;/p&gt;
&lt;p&gt;测速结果会保存在应用程序目录下的result.csv文件中&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623239511772.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
在里面找到延迟最低的IP地址（一般在第一行），把它复制下来，等会会用到。&lt;/p&gt;
&lt;h1 id=&#34;配置v2ray&#34;&gt;配置V2Ray&lt;/h1&gt;
&lt;p&gt;打开你的v2ray客户端，添加vmess服务器，按照下面的图填写&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623239829821.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
除了中文部分以外严格按照图上内容填写。&lt;/p&gt;
&lt;p&gt;然后保存，就可以愉快地使用v2ray了&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;如果你遇到了任何问题 欢迎在下方的评论区中提出。&lt;/p&gt;
&lt;h1 id=&#34;其他说明&#34;&gt;其他说明&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Heroku 为我们提供了免费的容器服务，我们不应该滥用它，所以本项目不宜长期使用.&lt;/li&gt;
&lt;li&gt;Heroku 的网络并不稳定，部署前请三思。&lt;/li&gt;
&lt;li&gt;Heroku每个月有550小时的时长限制，只适合轻度使用用户.&lt;/li&gt;
&lt;li&gt;Heroku的实例半小时没有访问就会自动休眠,你可以使用Uptimebot定时访问来解决这个问题。&lt;/li&gt;
&lt;/ul&gt;
">使用Cloudflare自选IP加速Heroku-v2ray</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/YdM16VZBI/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;本文转自:&lt;a href=&#34;https://new.qq.com/omn/20210609/20210609A01G7M00.html&#34;&gt;https://new.qq.com/omn/20210609/20210609A01G7M00.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623222085018.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
人们习以为常的互联网服务，已经成为现代生活必备的基础设施，但在背后网络云服务商集中度不断提升的情况下，其脆弱性也愈发突出。8日全球互联网世界碰到的一次不大不小的“断网”事件，就是这一脆弱性的最新例证。&lt;/p&gt;
&lt;p&gt;全世界数以亿计互联网用户在当天发现自己无法打开日常访问的网站，在经过约1小时后才逐渐恢复。最终，一家名为Fastly的CDN（content delivery network）服务提供商浮出水面，这家公司表示，由于进行了一项“服务配置”的修改，引发了大规模故障。&lt;/p&gt;
&lt;p&gt;有意思的是，当人们得知问题出自Fastly这家公司后，其股价在当天出现大涨，因为通过这起事件，投资者意识到，这家总部位于旧金山，员工数不到1000人的“边缘计算云服务”公司，对互联网世界有着举足轻重的影响力。&lt;/p&gt;
&lt;p&gt;宣称在互联网终端用户和服务器之间架设“中继站”，为用户提供更快捷、便利的互联网内容体验的同时，由于这一类服务商集中度过高，导致了类似当天大范围用户无法打开网页这样的风险隐患。&lt;/p&gt;
&lt;h1 id=&#34;服务配置修改搞瘫大半个互联网&#34;&gt;“服务配置”修改搞瘫大半个互联网&lt;/h1&gt;
&lt;p&gt;本周二，当全球各地数以亿计的互联网用户登陆自己平日经常登陆的网站时，发现页面无法打开，并出现了“503 Errors”的错误提示，包括亚马逊、Reddit、Twitch、Pinterest以及包括纽约时报、CNN等在内的多数新闻网站均悉数中招。&lt;/p&gt;
&lt;p&gt;这一问题大约持续了一个小时，初步的调查结果显示，互联网内容传递服务公司Fastly是引起这一场互联网大规模掉线的主要原因。&lt;/p&gt;
&lt;p&gt;从Fastly发布的状态更新报告可以追踪事件的整个进展过程，大约在美国太平洋时间8日凌晨2:58分，Fastly称，“我们目前正在调查对我们的内容传递网络服务（Content Delivery Network）带来潜在影响的冲击。”&lt;/p&gt;
&lt;p&gt;在这则报告发布后不久，推特上便出现了许多用户声称无法打开BBC、CNN、纽约时报等新闻网站的推文。社交平台推特本身也受到了一定程度的影响，其负责表情包的服务器无法接入，导致在出问题的时段内，许多推文的表情无法正常显示。&lt;/p&gt;
&lt;p&gt;随后问题变得愈发严重，全球各个地区均不同程度出现网站无法打开的问题，甚至连英国政府官方网站都一度受到影响。&lt;/p&gt;
&lt;p&gt;在大约一个小时后，Fastly再度更新状态报告，称已经找到问题并实施了修复措施，在美国太平洋时间8日凌晨4点10分，Fastly通过其官方推特称，“我们发现一个服务配置的更改引发了全球服务的短暂中断，目前已将这一配置关闭，我们全球服务网络已恢复正常。”&lt;/p&gt;
&lt;h1 id=&#34;fastly是何方神圣&#34;&gt;Fastly是何方神圣？&lt;/h1&gt;
&lt;p&gt;对于许多普通互联网用户来说，Fastly的名字或许十分陌生，这家公司创办于2011年，总部位于旧金山，从事的主要业务是互联网云服务。2017年，该公司发布了边缘云计算平台，提供将终端服务器的内容更近、更快地给到终端用户的服务。简而言之，Fastly为服务器和终端用户之间搭建了一个中继站，让用户无需再从终端服务器上下载网络内容，而由Fastly事先预载一部分内容，当用户访问相应网站时，就无需再从远端的终端服务器上下载，而从Fastly处获得，提高终端用户获得互联网内容的效率。&lt;/p&gt;
&lt;p&gt;Fastly的这一互联网内容传递服务，能够让网页的加载速度更快、优化图片、视频和其他大尺寸的内容能够更快的在用户终端上出现。在Fastly官方网站的介绍中，该公司列举了几个例子，例如新闻网站Buzzfeed在使用了Fastly的服务后，加载速度提高了50%，纽约时报在美国大选夜能够承载200万用户登陆等。&lt;/p&gt;
&lt;p&gt;此外，边缘云计算的另一个好处是作为一道额外的防范黑客攻击的防火墙，例如最常见的DDoS攻击等，保障终端服务器不受攻击的影响。&lt;/p&gt;
&lt;p&gt;但同时带来的一个问题是，由于Fastly作为连接终端服务器和终端用户的桥梁，一旦这座“桥梁”发生问题，双方之间的连接也就断了，这正是8日所短暂发生的情况。&lt;/p&gt;
&lt;p&gt;目前对于这起故障到底如何发生的有关细节还不得而知，Fastly方面也仅给出了是因为进行一项“服务配置”的调试而引发的简单解释。&lt;/p&gt;
&lt;p&gt;一个有意思的现象是，在外界已经得知此次不得不小的“断网”事件主要责任方是Fastly的情况下，Fastly的股价在8日盘中大涨超过10%，这背后的逻辑是：通过这次事件，许多投资者发现Fastly居然服务如此多的互联网内容提供方，对互联网有着超过之前预期的影响力，尽管是一桩负面事件，但却对公司本身是一次利好。&lt;/p&gt;
&lt;p&gt;根据Fastly 2021年第一季度财报显示，截至3月31日，服务全球58个市场，第一季度总收入8485万美元，其中6273万美元来自于美国市场，占绝大部分比例，来自亚太和欧洲市场的收入则分别为915万和964万美元。Fastly在美国以外的用户在截至3月31日为1208，约占全部用户量的53%。&lt;/p&gt;
&lt;p&gt;从财报业绩表现来看，Fastly仍处在业务快速扩张阶段，第一季度收入同比增长34.8%，同时研发投入同比增长超过100%，导致当季净亏损5051万美元。去年全年，Fastly收入同比增速为45%，净亏损9593万美元。&lt;/p&gt;
&lt;p&gt;Fastly在2020年同样是一支疫情受益股，股价在当年从年初的每股约20美元一路涨至年末的每股100美元以上翻了4倍多。但在进入2021年后，股价又一路从高位回落，目前距离历史高位已经腰斩。&lt;/p&gt;
&lt;p&gt;Fastly断网事件再次提醒我们互联网服务的脆弱性，当提供互联网底层服务的单个公司出现短时故障时，将导致大规模用户的互联网服务受到影响，因为越来越多的互联网内容提供方正在依赖越来越少的类似Fastly这样的中间云服务提供商，这样的事件在近期时有发生，包括去年7月Cloudflare因故障中断服务以及亚马逊旗下AWS在去年11月碰到的短期故障等，云服务市场集中度的不断提高，正在不断加剧这样的潜在风险。&lt;/p&gt;
">搞瘫全球大半个互联网，Fastly是何方神圣？</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/disclaimers/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;gd1214b&#39;s blog 提醒您：在使用本网站之前，请您务必仔细阅读并透彻理解本声明。一旦您使用本网站，您的使用行为将被视为对本声明全部内容认可。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;gd1214bs-blog-免责声明&#34;&gt;gd1214b&#39;s blog 免责声明&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;本网站所提供的信息，只供参考之用。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;本网站一概毋须以任何方式就任何信息传递或传送的失误、不准确或错误对用户或任何其他人士负任何直接或间接的责任。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在法律允许的范围内，本网站在此声明,不承担用户或任何人士就使用或未能使用本网站所提供的信息或任何链接或项目所引致的任何直接、间接、附带、从属、特殊、惩罚性或惩戒性的损害赔偿(包括但不限于收益、预期利润的损失或失去的业务、未实现预期的节省)。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;本网站所提供的信息，若在任何司法管辖地区供任何人士使用或分发给任何人士时会违反该司法管辖地区的法律或条例的规定或会导致本网站或其第三方代理人受限于该司法管辖地区内的任何监管规定时，则该等信息不宜在该司法管辖地区供该等任何人士使用或分发给该等任何人士。用户须自行保证不会受限于任何限制或禁止用户使用或分发本网站所提供信息的当地的规定。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;本网站图片，文字之类版权申明，因为网站可以由用户自行上传图片或文字，本网站无法鉴别所上传图片或文字的知识版权，如果侵犯，请及时通知我们，本网站将在第一时间及时删除。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;凡以任何方式登陆本网站或直接、间接使用本网站资料者，视为自愿接受本网站声明的约束。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;gd1214b-图床免责声明&#34;&gt;gd1214b 图床免责声明&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;gd1214b 图床是提供图片存储服务的平台，所有图片内容均由用户（网友）自行上传并管理的，所有图片作用、性质都与gd1214b 图床无关，gd1214b 图床对所有图片合法性概不负责，亦不承担任何法律责任；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;如因不可抗力、网络状况、通讯线路、设备故障、第三方网站等任何原因而导致您不能正常使用gd1214b 图床，gd1214b 图床不承担任何的法律责任；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;您应该对从gd1214b 图床下载的图片自行承担风险。除了gd1214b 图床注明之外，其它一切因使用从gd1214b 图床下载图片内容而可能遭致的意外、疏忽、侵权及造成的损失，gd1214b 图床对其概不负责，亦不承担任何法律责任；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;gd1214b 图床严格遵守国家相关法律法规，尊重版权、著作权等权利，因此gd1214b 图床不支持包含危害国家安全和民族团结、侵犯他人权益、欺骗性质、色情或暴力的图片；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;gd1214b 图床保留自动和人工审查的权利，一旦发现或者接到有效举报，gd1214b 图床将在不做任何通知上传者的情况下删除相关的图片，并保留将有关资料提交给相关部门的权利；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;gd1214b 图床尊重并保护所有使用gd1214b 图床用户的个人隐私，您注册用户名、电子邮件地址个人资料，非经您亲自许可或根据相关法律、法规的强制性规定，gd1214b 图床不会主动泄露给第三方。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
">免责声明</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/NbdQntVCG/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;请先阅读本站的免责声明:&lt;a href=&#34;https://blog.gd1214b.icu/post/disclaimers/&#34;&gt;https://blog.gd1214b.icu/post/disclaimers/&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
&lt;strong&gt;请遵循当地法律使用，如您有违反当地法律造成的责任，本站拒不承担.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;简介&#34;&gt;简介&lt;/h1&gt;
&lt;h2 id=&#34;heroku&#34;&gt;Heroku&lt;/h2&gt;
&lt;p&gt;Heroku是 Salesforce 旗下云服务商，提供方便便捷的各种云服务，如服务器，数据库，监控，计算等等。并且他提供了免费版本，这使得我们这些平时想搞一些小东西的人提供了莫大的便捷，虽然他有时长和宕机的限制，但是对于个人小程序来说已经足够了。&lt;/p&gt;
&lt;h2 id=&#34;v2ray&#34;&gt;V2Ray&lt;/h2&gt;
&lt;p&gt;V2Ray（Project V）是一个优秀的开源网络代理工具，目前已经全平台支持Windows、Mac、Android、IOS、Linux等操作系统的使用。相对起Shadowsocks来说属于后起之秀，在混淆能力、兼容性、速度上有着独到的优点，V2Ray是一个不错的选择。&lt;/p&gt;
&lt;h1 id=&#34;服务端部署&#34;&gt;服务端部署&lt;/h1&gt;
&lt;h2 id=&#34;注册heroku&#34;&gt;注册Heroku&lt;/h2&gt;
&lt;p&gt;很简单，根据官网的提示操作就行:&lt;a href=&#34;https://signup.heroku.com/&#34;&gt;https://signup.heroku.com/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;部署&#34;&gt;部署&lt;/h2&gt;
&lt;p&gt;点击下面的链接将v2ray部署到Heroku上：&lt;br&gt;
&lt;a href=&#34;https://heroku.com/deploy?template=https://github.com/libsgh/v2ray-heroku.git&#34;&gt;https://heroku.com/deploy?template=https://github.com/libsgh/v2ray-heroku.git&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;app-name&#34;&gt;App name&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623138897097.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
应用名称，可随意填写。&lt;/p&gt;
&lt;h2 id=&#34;choose-a-region&#34;&gt;Choose a region&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623139055193.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
服务器所在位置，有美国和欧洲两个选择。&lt;/p&gt;
&lt;h2 id=&#34;protocol&#34;&gt;PROTOCOL&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623139144487.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
v2ray所使用的协议，可以不用改动。&lt;/p&gt;
&lt;h2 id=&#34;uuid&#34;&gt;UUID&lt;/h2&gt;
&lt;p&gt;用户的连接ID，必须填写，可在这里随机生成一个：&lt;a href=&#34;https://1024tools.com/uuid&#34;&gt;https://1024tools.com/uuid&lt;/a&gt;&lt;br&gt;
(只需复制一个即可，千万要注意保存)。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623139189773.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;ws_path&#34;&gt;WS_PATH&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623139413528.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
websocket路径,可以不用改动。&lt;/p&gt;
&lt;h2 id=&#34;进行部署&#34;&gt;进行部署&lt;/h2&gt;
&lt;p&gt;点击最后的“Deploy app”即可。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623139548540.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
这里可能会需要一点时间，看到下面的界面就说明部署成功了：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623139649895.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
打开网页：https://app-name.herokuapp.com/ray (&lt;strong&gt;将app name替换为你在第一部中填写的名称&lt;/strong&gt;)如果显示Bad Request 则说明v2ray服务端部署就绪。&lt;/p&gt;
&lt;h1 id=&#34;客户端配置&#34;&gt;客户端配置&lt;/h1&gt;
&lt;p&gt;这里以windows端的v2rayN为例，其他客户端配置方法类似。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623140960527.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
请严格按照以上信息填写，否则可能无法连接。&lt;/p&gt;
&lt;p&gt;到这一步你的v2ray应该已经部署好了，如果还是无法连接的话可以在下方的评论区中提出问题。&lt;/p&gt;
&lt;h1 id=&#34;其他说明&#34;&gt;其他说明&lt;/h1&gt;
&lt;h2 id=&#34;伪装首页3d元素周期表&#34;&gt;伪装首页（3D元素周期表）&lt;/h2&gt;
&lt;p&gt;请求/，返回3D元素周期表&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623156776166.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;html5测速&#34;&gt;HTML5测速&lt;/h2&gt;
&lt;p&gt;请求/speedtest/，返回html5-speedtest测速页面&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623156810883.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;文件下载速度测试&#34;&gt;文件下载速度测试&lt;/h2&gt;
&lt;p&gt;请求/test/，返回文件列表,可用于文件下载速度测试&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623156875631.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;致谢&#34;&gt;致谢&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/libsgh/v2ray-heroku&#34;&gt;v2ray-heroku&lt;/a&gt;是github上的一个开源项目，本文部署时用到了其中的源代码。&lt;/li&gt;
&lt;/ul&gt;
">在Heroku上部署v2ray</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/h7Wc7SF8X/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;请先阅读本站的免责声明:&lt;a href=&#34;https://blog.gd1214b.icu/post/disclaimers/&#34;&gt;https://blog.gd1214b.icu/post/disclaimers/&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;
&lt;strong&gt;请遵循当地法律使用，如您有违反当地法律造成的责任，本站拒不承担.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;前言&#34;&gt;前言&lt;/h1&gt;
&lt;p&gt;Cloudflare 推出了 Workers 服务，在国内一般叫它边缘计算。&lt;a href=&#34;https://github.com/EtherDream/jsproxy&#34;&gt;jsproxy&lt;/a&gt; 是个 Github 开源项目，可以通过 Cloudflare Workers 服务搭建一个反向代理服务器，这个反向代理服务器不需要安装在我们自己的 VPS 主机上，而是直接部署在 Cloudflare 节点上，这可以极大的降低我们自身 VPS 主机的性能损耗。&lt;/p&gt;
&lt;h1 id=&#34;教程&#34;&gt;教程&lt;/h1&gt;
&lt;h2 id=&#34;1&#34;&gt;1&lt;/h2&gt;
&lt;p&gt;打开&lt;a href=&#34;https://dash.cloudflare.com/&#34;&gt;Cloudflare&lt;/a&gt;，登录CLoudflare账户。（Cloudflare支持中文界面，操作前可先将界面语言调换只中文）；&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623119946925.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;2&#34;&gt;2&lt;/h2&gt;
&lt;p&gt;创建Worker实例（创建前还要配置一下，这里就不多说了，可以根据自己的需求进行选择，免费的一天可以处理十万请求，正常来说很够用）；&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623119975841.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;3&#34;&gt;3&lt;/h2&gt;
&lt;p&gt;将以下代码复制到左侧脚本框中；&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-javascript&#34;&gt;&#39;use strict&#39;

/**
 * static files (404.html, sw.js, conf.js)
 */
const ASSET_URL = &#39;https://etherdream.github.io/jsproxy&#39;

const JS_VER = 10
const MAX_RETRY = 1

/** @type {RequestInit} */
const PREFLIGHT_INIT = {
  status: 204,
  headers: new Headers({
    &#39;access-control-allow-origin&#39;: &#39;*&#39;,
    &#39;access-control-allow-methods&#39;: &#39;GET,POST,PUT,PATCH,TRACE,DELETE,HEAD,OPTIONS&#39;,
    &#39;access-control-max-age&#39;: &#39;1728000&#39;,
  }),
}

/**
 * @param {any} body
 * @param {number} status
 * @param {Object&amp;lt;string, string&amp;gt;} headers
 */
function makeRes(body, status = 200, headers = {}) {
  headers[&#39;--ver&#39;] = JS_VER
  headers[&#39;access-control-allow-origin&#39;] = &#39;*&#39;
  return new Response(body, {status, headers})
}


/**
 * @param {string} urlStr 
 */
function newUrl(urlStr) {
  try {
    return new URL(urlStr)
  } catch (err) {
    return null
  }
}


addEventListener(&#39;fetch&#39;, e =&amp;gt; {
  const ret = fetchHandler(e)
    .catch(err =&amp;gt; makeRes(&#39;cfworker error:\n&#39; + err.stack, 502))
  e.respondWith(ret)
})


/**
 * @param {FetchEvent} e 
 */
async function fetchHandler(e) {
  const req = e.request
  const urlStr = req.url
  const urlObj = new URL(urlStr)
  const path = urlObj.href.substr(urlObj.origin.length)

  if (urlObj.protocol === &#39;http:&#39;) {
    urlObj.protocol = &#39;https:&#39;
    return makeRes(&#39;&#39;, 301, {
      &#39;strict-transport-security&#39;: &#39;max-age=99999999; includeSubDomains; preload&#39;,
      &#39;location&#39;: urlObj.href,
    })
  }

  if (path.startsWith(&#39;/http/&#39;)) {
    return httpHandler(req, path.substr(6))
  }

  switch (path) {
  case &#39;/http&#39;:
    return makeRes(&#39;请更新 cfworker 到最新版本!&#39;)
  case &#39;/ws&#39;:
    return makeRes(&#39;not support&#39;, 400)
  case &#39;/works&#39;:
    return makeRes(&#39;it works&#39;)
  default:
    // static files
    return fetch(ASSET_URL + path)
  }
}


/**
 * @param {Request} req
 * @param {string} pathname
 */
function httpHandler(req, pathname) {
  const reqHdrRaw = req.headers
  if (reqHdrRaw.has(&#39;x-jsproxy&#39;)) {
    return Response.error()
  }

  // preflight
  if (req.method === &#39;OPTIONS&#39; &amp;amp;&amp;amp;
      reqHdrRaw.has(&#39;access-control-request-headers&#39;)
  ) {
    return new Response(null, PREFLIGHT_INIT)
  }

  let acehOld = false
  let rawSvr = &#39;&#39;
  let rawLen = &#39;&#39;
  let rawEtag = &#39;&#39;

  const reqHdrNew = new Headers(reqHdrRaw)
  reqHdrNew.set(&#39;x-jsproxy&#39;, &#39;1&#39;)

  // 此处逻辑和 http-dec-req-hdr.lua 大致相同
  // https://github.com/EtherDream/jsproxy/blob/master/lua/http-dec-req-hdr.lua
  const refer = reqHdrNew.get(&#39;referer&#39;)
  const query = refer.substr(refer.indexOf(&#39;?&#39;) + 1)
  if (!query) {
    return makeRes(&#39;missing params&#39;, 403)
  }
  const param = new URLSearchParams(query)

  for (const [k, v] of Object.entries(param)) {
    if (k.substr(0, 2) === &#39;--&#39;) {
      // 系统信息
      switch (k.substr(2)) {
      case &#39;aceh&#39;:
        acehOld = true
        break
      case &#39;raw-info&#39;:
        [rawSvr, rawLen, rawEtag] = v.split(&#39;|&#39;)
        break
      }
    } else {
      // 还原 HTTP 请求头
      if (v) {
        reqHdrNew.set(k, v)
      } else {
        reqHdrNew.delete(k)
      }
    }
  }
  if (!param.has(&#39;referer&#39;)) {
    reqHdrNew.delete(&#39;referer&#39;)
  }

  // cfworker 会把路径中的 `//` 合并成 `/`
  const urlStr = pathname.replace(/^(https?):\/+/, &#39;$1://&#39;)
  const urlObj = newUrl(urlStr)
  if (!urlObj) {
    return makeRes(&#39;invalid proxy url: &#39; + urlStr, 403)
  }

  /** @type {RequestInit} */
  const reqInit = {
    method: req.method,
    headers: reqHdrNew,
    redirect: &#39;manual&#39;,
  }
  if (req.method === &#39;POST&#39;) {
    reqInit.body = req.body
  }
  return proxy(urlObj, reqInit, acehOld, rawLen, 0)
}


/**
 * 
 * @param {URL} urlObj 
 * @param {RequestInit} reqInit 
 * @param {number} retryTimes 
 */
async function proxy(urlObj, reqInit, acehOld, rawLen, retryTimes) {
  const res = await fetch(urlObj.href, reqInit)
  const resHdrOld = res.headers
  const resHdrNew = new Headers(resHdrOld)

  let expose = &#39;*&#39;
  
  for (const [k, v] of resHdrOld.entries()) {
    if (k === &#39;access-control-allow-origin&#39; ||
        k === &#39;access-control-expose-headers&#39; ||
        k === &#39;location&#39; ||
        k === &#39;set-cookie&#39;
    ) {
      const x = &#39;--&#39; + k
      resHdrNew.set(x, v)
      if (acehOld) {
        expose = expose + &#39;,&#39; + x
      }
      resHdrNew.delete(k)
    }
    else if (acehOld &amp;amp;&amp;amp;
      k !== &#39;cache-control&#39; &amp;amp;&amp;amp;
      k !== &#39;content-language&#39; &amp;amp;&amp;amp;
      k !== &#39;content-type&#39; &amp;amp;&amp;amp;
      k !== &#39;expires&#39; &amp;amp;&amp;amp;
      k !== &#39;last-modified&#39; &amp;amp;&amp;amp;
      k !== &#39;pragma&#39;
    ) {
      expose = expose + &#39;,&#39; + k
    }
  }

  if (acehOld) {
    expose = expose + &#39;,--s&#39;
    resHdrNew.set(&#39;--t&#39;, &#39;1&#39;)
  }

  // verify
  if (rawLen) {
    const newLen = resHdrOld.get(&#39;content-length&#39;) || &#39;&#39;
    const badLen = (rawLen !== newLen)

    if (badLen) {
      if (retryTimes &amp;lt; MAX_RETRY) {
        urlObj = await parseYtVideoRedir(urlObj, newLen, res)
        if (urlObj) {
          return proxy(urlObj, reqInit, acehOld, rawLen, retryTimes + 1)
        }
      }
      return makeRes(res.body, 400, {
        &#39;--error&#39;: `bad len: ${newLen}, except: ${rawLen}`,
        &#39;access-control-expose-headers&#39;: &#39;--error&#39;,
      })
    }

    if (retryTimes &amp;gt; 1) {
      resHdrNew.set(&#39;--retry&#39;, retryTimes)
    }
  }

  let status = res.status

  resHdrNew.set(&#39;access-control-expose-headers&#39;, expose)
  resHdrNew.set(&#39;access-control-allow-origin&#39;, &#39;*&#39;)
  resHdrNew.set(&#39;--s&#39;, status)
  resHdrNew.set(&#39;--ver&#39;, JS_VER)

  resHdrNew.delete(&#39;content-security-policy&#39;)
  resHdrNew.delete(&#39;content-security-policy-report-only&#39;)
  resHdrNew.delete(&#39;clear-site-data&#39;)

  if (status === 301 ||
      status === 302 ||
      status === 303 ||
      status === 307 ||
      status === 308
  ) {
    status = status + 10
  }

  return new Response(res.body, {
    status,
    headers: resHdrNew,
  })
}


/**
 * @param {URL} urlObj 
 */
function isYtUrl(urlObj) {
  return (
    urlObj.host.endsWith(&#39;.googlevideo.com&#39;) &amp;amp;&amp;amp;
    urlObj.pathname.startsWith(&#39;/videoplayback&#39;)
  )
}

/**
 * @param {URL} urlObj 
 * @param {number} newLen 
 * @param {Response} res 
 */
async function parseYtVideoRedir(urlObj, newLen, res) {
  if (newLen &amp;gt; 2000) {
    return null
  }
  if (!isYtUrl(urlObj)) {
    return null
  }
  try {
    const data = await res.text()
    urlObj = new URL(data)
  } catch (err) {
    return null
  }
  if (!isYtUrl(urlObj)) {
    return null
  }
  return urlObj
}
&lt;/code&gt;&lt;/pre&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623120092067.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;4&#34;&gt;4&lt;/h2&gt;
&lt;p&gt;点击保存并部署即可。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623120198254.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;5&#34;&gt;5&lt;/h2&gt;
&lt;p&gt;点击这里即可访问你搭建的反向代理网站:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623120299391.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
如果你在搭建过程中遇到任何问题, 欢迎在下方的评论区里留言.&lt;/p&gt;
">使用Cloudflare Worker搭建反向代理</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/BS6mLI2Ud/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;本文转自:&lt;a href=&#34;https://www.zhihu.com/question/460776718/answer/1911149556&#34;&gt;https://www.zhihu.com/question/460776718/answer/1911149556&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;什么是当前社会语境下的“躺平”，我个人的理解就是日趋觉醒的（狭义范围内的）打工人和（广义范围内的）被压榨阶级，开始用摸鱼划水“反杀”资本群体、用佛系工作态度“反向剥削”剥削阶级、用放弃理想“回怼”满身爹味的既得利益集团。&lt;/p&gt;
&lt;p&gt;正如一个很自嘲的段子：“只要我在工作时间偷懒，这种既不干活又能拿工钱的行为，不也是对老板的剥削吗？”&lt;/p&gt;
&lt;p&gt;形势倒逼至此，已是矛盾迫近临界之态。&lt;/p&gt;
&lt;h1 id=&#34;&#34;&gt;&lt;/h1&gt;
&lt;p&gt;很多油头粉面的食肉者忍不住指责或阴阳怪气的内涵当代年轻人：“不热爱劳动、不热爱奋斗！”&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623030779063.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
这真的是对青年群体最恶毒的污蔑了，必须首先讨论清楚劳动的问题。&lt;/p&gt;
&lt;p&gt;马克思认为，“劳动本身是一种自由自觉的实践活动，人之所以为人，而非动物，很重要的一点就在于有自觉性的劳动，这是人的本质属性之一。”&lt;/p&gt;
&lt;p&gt;劳动是无罪的，乃至是光荣的，我们无产阶级甚至还有自己专门的节日：五一劳动节。&lt;/p&gt;
&lt;p&gt;在过去的苏联和改开之前的中国，劳动节的重要性不亚于国庆节，庆贺游行的规模盛大异常，因为这是属于国家的主人——工农阶级的政治节日。&lt;/p&gt;
&lt;p&gt;曾经的五一劳动节，天安门除了城楼正中悬挂毛主席画像，广场的东侧还会摆放马克思和恩格斯的画像，广场的西侧会摆放列宁和斯大林的画像。&lt;/p&gt;
&lt;p&gt;这彰示着国家的政权属性与人民主体的地位。&lt;/p&gt;
&lt;p&gt;劳动人民是光荣的，劳动人民也是最受到各领域尊重和爱护的。&lt;/p&gt;
&lt;p&gt;劳动，就是工农阶级的本色，也是新中国“权力为谁服务”的导向。&lt;/p&gt;
&lt;p&gt;幻想不劳而获、拒绝劳动的人或心理，不仅会被社会性的群体生产所排斥，同时压根也会被自我所排斥。&lt;/p&gt;
&lt;p&gt;因为任何一个心智健全的人都必须在劳动中寻找自我价值，除非他不是个正常人，比如初生的婴儿或神志不清的智力障碍人士等等，没有自我价值意识，也就没有劳动欲望。&lt;/p&gt;
&lt;p&gt;一些民间俚话，所谓的“闲不住”“待不住”“操不完的心”“一辈子都是累命”……就是这个道理。&lt;/p&gt;
&lt;p&gt;所以，指责“不爱劳动、不爱奋斗”，肯定首先从人的社会属性层面就说不通。&lt;/p&gt;
&lt;p&gt;遁身于群体之中的个体，其贡献生产力一定是自发自觉的，这不以人的意志为转移。&lt;/p&gt;
&lt;h1 id=&#34;-2&#34;&gt;&lt;/h1&gt;
&lt;p&gt;那么问题就来了：明明人人爱劳动、人人需要劳动，怎么今天的打工人们却自发地要躺平了呢？&lt;/p&gt;
&lt;p&gt;这在于一个本质是关乎于集体价值判断的问题：资本主义价值观的事实到来和统治，已经大大地破坏并扫除了一切单纯欲望的本源。&lt;/p&gt;
&lt;p&gt;资本，会使劳动发生「异化」，它会将“追求自我价值的实现”变为“贡献剩余价值的聚集”。&lt;/p&gt;
&lt;p&gt;如马克思所言：“劳动的异化性质明显的表现是：只要肉体的强制或其他强制一旦停止，人们就会像逃避鼠疫那样逃避劳动。异化的劳动，仅仅是为了生存的牺牲与折磨。”&lt;/p&gt;
&lt;p&gt;这就是资本家“996是福报”、“奋斗理所应当”洗脑恶论的来源。&lt;/p&gt;
&lt;p&gt;昨夜，共青团中央官博迫于某些压力，不得不亲自下场就“躺平”发声。它的意图很明显：想爹味十足地教育一番年轻人，扭转一下舆论被动局面。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623030826024.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
然而，不出意料地评论区翻了车：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623030838006.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
可以看看共青团的这幅海报，它列举的都是什么人：救灾救难的人民子弟兵，风雨无阻的边防戍边战士，舍生忘死的一线抗疫英雄——这些人都有什么共同点？&lt;/p&gt;
&lt;p&gt;他们是为集体而拼搏、为人民大众而献身、为最广泛的国家利益而奋斗！&lt;/p&gt;
&lt;p&gt;这就牵扯出了一个讨论、也是年轻人纷纷躺平的根源性缘由：我们是在为谁奋斗？是为包括自己在内的国家集体，还是为了某一个两个的资本家？&lt;/p&gt;
&lt;p&gt;前者，叫做“劳动人民身先士卒当家作主”；后者，叫做“被剥削阶层甘为奴役甘为仆狗”。&lt;/p&gt;
&lt;p&gt;所谓“宁当国家一颗螺丝钉，不做资本家的一株韭”。&lt;/p&gt;
&lt;p&gt;观察者网马前卒曾有鼓吹：“拒绝加班，无产阶级就和先进生产力分离了”、“无产阶级如果不对自己狠一点，是没有未来的！”&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623030868215.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
这种论调的错误在于，它偷换乃至隐藏了“剥削剩余价值”的概念。&lt;/p&gt;
&lt;p&gt;说白了就是：无产阶级所谓的“对自己狠一点”，这种“狠一点”所额外创造的利润，归了谁？&lt;/p&gt;
&lt;p&gt;是归了身心俱疲（某些肝病肾病现在在996白领阶层中越来越低龄化）的自己，还是归了端坐塔尖、每天只靠着剪息票就能每秒钟净入百万的资本持有人？&lt;/p&gt;
&lt;p&gt;那些财阀大佬，在今天已有一个挥之不去的特征：早已不需要参与劳动，仅仅依靠资本增殖（吃利息、投资分红）就能保持巨额财富的时时增长。&lt;/p&gt;
&lt;p&gt;也就是卢梭说的：“一个巨人与一个矮子在同一条道路上行走，他们每走一步都会使巨人拉大他与矮子之间的距离”。&lt;/p&gt;
&lt;p&gt;你被人勒令“拼命奋斗”，可是你在为谁奋斗？&lt;/p&gt;
&lt;p&gt;年轻人自我标榜“躺平”，这实为一种无奈。&lt;/p&gt;
&lt;p&gt;正如如果没有“骑手质疑饿了么变相降加班奖励”、“饿了么被曝为留骑手过春节而画大饼”、“外卖员吐槽1000元订单配送费仅5元”、“饿了么猝死员工被爆每天被扣3元”…诸如此类种种的极端压缩成本、拔高强榨剩余价值的行为，会有今年2月份饿了么骑手们的全国性大罢工吗？他们会去停止劳动、停止生产吗？&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623030886334.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
你若问饿了么为什么不多招点人、不停止众包模式而完善劳资关系（匹配所有的险金社保）？&lt;/p&gt;
&lt;p&gt;人家资本家面对这种问题，估计能翻你一天一夜的白眼。&lt;/p&gt;
&lt;p&gt;过去不久的货拉拉事件同理，你质问货拉拉平台为何不安装摄像头、不提高安全维护成本，货拉拉大boss估计要被逗乐：“还不如等到死了人，我届时再赔个钱划算呢！”&lt;/p&gt;
&lt;p&gt;此前的滴滴顺风车莫不如此。&lt;/p&gt;
&lt;p&gt;包括汽车巨头福特公司，曾经有过内部计算，没有投入安全设备的话，公司因为赔偿事故遇难的损失为49.5 million，而投入安全设备、修复安全隐患的总成本则为$137 million——资本果断选择了前者。&lt;/p&gt;
&lt;p&gt;同理，饿了么同样不会“傻了吧唧”地多招骑手、多发奖金、多缴社保，它必须把骑手数量控制在一个“合理”的区间，既能让骑手不得不疯狂闯红灯，又能让闯红灯带来的死人风险被降到一个资本可接受的赔偿范围，最终实现GMV和利润的最大化。&lt;/p&gt;
&lt;p&gt;大不了，还可以发明一个“请消费者宽容骑手”的戏码，发动无产阶级斗无产阶级，而资本则立于不败之地、两头坐收渔利。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623030925914.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
如此局面下，被逼到悬崖边走投无路的骑手们，凭什么不能罢工？凭什么不能“躺平”？&lt;/p&gt;
&lt;p&gt;躺平，有错乎？&lt;/p&gt;
&lt;h1 id=&#34;-3&#34;&gt;&lt;/h1&gt;
&lt;p&gt;昨夜共青团“教育无果”并被迫关闭评论区之后，今天又弄了个“补救措施”，继续想运用偷换概念的招数为“镇压躺平”站台：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623030946319.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
我看到这一幕倒是内心毫无波澜，因为这一招率先玩出来的是谁？是他共青团中央等官媒吗？当然不。&lt;/p&gt;
&lt;p&gt;不是别人，正是996福报论的发明者，马云。&lt;/p&gt;
&lt;p&gt;早在2018年时，马云先生就创物垂范地为社会贡献了“996是福报”的伟大理论，从此辩论激荡绵延至今不止。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623030964909.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
甚至马云先生自己都已经在人生滑铁卢中思考过往，某些人士依旧拿这位“马粑粑”的言论当做真理，乐此不疲地洗脑青年一代。&lt;/p&gt;
&lt;p&gt;昨天共青团中央把钱学森等共和国国士大家搬出来的行为，和三年前的马云别无二致：直接把“国家”摆上辩论台，意图用政治正确来打压打工人：“两弹一星、核潜艇都是科学家们用996干出来的，你们这些年轻人还有不努力的理由？”&lt;/p&gt;
&lt;p&gt;这叫杀人不见血。&lt;/p&gt;
&lt;p&gt;用资本主义的剥削伦理去解构和解释毛主席时代的建设，这体现了一种无与伦比的统治高位的优越感，以及曲解、利用、无害化毛主席的极端卑劣。&lt;/p&gt;
&lt;p&gt;两弹一星、核潜艇、大寨、杂交水稻，这些确实是无产阶级科学家和最广大工农与劳动人民群众用貌似996模式干出来的成就——但是！这些成就，造福的是谁？&lt;/p&gt;
&lt;p&gt;是全体中华民族的国运福祉，它永葆了中国的边境安宁和外交地位的抬升。&lt;/p&gt;
&lt;p&gt;毛主席时代的“打工人”们，所创造的“剩余价值”都交给了国家，以“全民所有制”的形式储存下来，这是同今天的互联网财阀们最大之区别所在。&lt;/p&gt;
&lt;p&gt;只不过到了90年代末期，一夜之间的私有化又使得众多公立的矿山、煤田、汽车厂被以白菜价卖给民企和外资，连祖辈们的养老金都要现在的工作者来支付。&lt;/p&gt;
&lt;p&gt;推荐阅读：鸡架席卷沈阳的暗面：一九九八，工人下岗&lt;/p&gt;
&lt;p&gt;今时今日，抱着一堆资本主义的理儿到处灌输鸡汤的资本家们所提倡的996，利润收纳的方向仅仅是私家的公司与身价而已。&lt;/p&gt;
&lt;p&gt;这是私有制语境里的付出收益论。&lt;/p&gt;
&lt;p&gt;用私有制逻辑，去套述毛泽东那一代领导人、带领全国人民勒紧裤腰带的奋斗岁月，这是对社会主义公有制、对艰苦年代里那些奉献青春不求回报的无产阶级革命家的乐观主义精神最卑鄙的侮辱。&lt;/p&gt;
&lt;p&gt;侮辱一个制度的目的，是为了美化和粉饰另一个制度；正如消除自己对一个制度的恐惧，是为了助长自己对鼓吹另一个制度的勇气。&lt;/p&gt;
&lt;h1 id=&#34;-4&#34;&gt;&lt;/h1&gt;
&lt;p&gt;躺平的表象是一种自暴自弃，但深源则是困于阶级固化的无力感。&lt;/p&gt;
&lt;p&gt;我微博有粉丝的这样一条评论：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623030993658.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
这种想法，实质与前文提到的马前卒的论调是极为相似的，都是理想主义的想当然所思。&lt;/p&gt;
&lt;p&gt;现今，「垄断」的作用，难道看不见吗？&lt;/p&gt;
&lt;p&gt;现在真要聚集一伙人，也开发一个外卖app（这不是什么难事），那结果只能是：你还没占领1/5你所在小城市的市场、日活量还没达到百人，现有的巨头财阀就会闻着味儿一手胡萝卜一手狼牙棒得来找你谈判了——“兄弟，要么我收购你，要么我大量发行代金券玩死你，你选一个吧！”&lt;/p&gt;
&lt;p&gt;无产阶级拿什么和巨头斗？人家打价格战，人家打得起，你打得起吗？菜农们是怎么被社区团购那帮财阀给玩死的，还不清楚吗？&lt;/p&gt;
&lt;p&gt;现在有多少小公司创业者的人生目标已经极为简单，就是被阿里腾讯收购、成为阿里腾讯附庸。&lt;/p&gt;
&lt;p&gt;你还让无产阶级自己去开发生产力，怎么开发？&lt;/p&gt;
&lt;p&gt;不准人家抱怨“蛋糕分不到手里”，还命令人家“有本事自己去做蛋糕啊”，可是做蛋糕的奶油、模具全都已掌握在巨头手里，你要么放弃，要么归降。&lt;/p&gt;
&lt;p&gt;一没罢工权，二没扩张权，拿什么斗？&lt;/p&gt;
&lt;p&gt;正因如此，某些「奋斗B」乐于跪在资本家膝下鼓吹的“你讨厌996你可以辞职啊”，这种言论完全是无解的，连初中的教科书都给出过答案：&lt;/p&gt;
&lt;p&gt;“工人看似有签订契约的自由，但是他们不受雇于这个资本家，就得受雇于那个资本家，饥饿的威胁使他们无法摆脱被资本家雇佣、受资本家剥削和压榨的命运。在资本家占有生产资料的条件下，所谓雇佣双方的契约自由，对于工人来说，是徒有虚名的。”&lt;/p&gt;
&lt;p&gt;“打工人”为什么会在2020年爆梗？疫情的空前打击不可忽视，中国从去年春季迎来了近年最庞大的一波企业倒闭潮和工人失业潮，更有“最苦应届毕业生”的段子流传。&lt;/p&gt;
&lt;p&gt;这正应了马克思的话：“以前的中间等级的下层，即小工业家、小商人和小食利者，手工业者和农民——所有这些阶级，都降落到无产阶级的队伍里来了。”&lt;/p&gt;
&lt;p&gt;僧多粥少，挤压了打工者群体就业空间的同时，也给予了资本加大剥削和“择怂录用”的底气。&lt;/p&gt;
&lt;p&gt;至于这帮肆意兼并的垄断巨头是怎么产生的，这我就不多说了，说了估计炸号……就如同讨论罢工权和游行权是怎么、又是为什么在80年代被取消的一样……&lt;/p&gt;
&lt;p&gt;五年前，外卖app是科技前卒；五年后，外卖功能竟然还是它的主业——用来为其金融信贷聚集用户的主业，这已经说明其科技性在下降了。&lt;/p&gt;
&lt;p&gt;布雷弗曼说过：“技术的进步非但没有改变无产阶级的命运，反而成为了限制无产阶级的新枷锁。”&lt;/p&gt;
&lt;p&gt;所以即便不说阶级情感，就是从生产力角度，「垄断」这种巨头形态应该被抛弃和消灭。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623031009807.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
否则，就永远会造成“打工人必须匍匐在资本家胯下奋斗”、“不奋斗就没有未来”这种看似挺有道理、实际完全是颠倒社会主义分配原则的就业生态。&lt;/p&gt;
&lt;h1 id=&#34;-5&#34;&gt;&lt;/h1&gt;
&lt;p&gt;曾在微博见有一著名油腻食肉者的“镇压躺平”言论：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623031035589.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
年轻时好好忍着被剥削，这样待到年老油腻时就可以去剥削别人了？&lt;/p&gt;
&lt;p&gt;即：安心做一个被剥削者的目的，是为了有朝一日可以去当一个剥削者？&lt;/p&gt;
&lt;p&gt;老老实实地“躺平”，就可以自然而然地“躺赢”吗？&lt;/p&gt;
&lt;p&gt;这种思维，其实就是“吃得苦中苦，方为人上人”这句改开之后极其政治正确的话。&lt;/p&gt;
&lt;p&gt;“人上人”，人身之上亦有他人，这便构筑了一个阶级分明的压迫体系：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623031049993.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
在这样的油腻小脑中，这种阶级分明的社会状态是非常光伟正的。&lt;/p&gt;
&lt;p&gt;正如所言“20来岁有个屁的剩余价值”这种直接把“价值”与“剩余价值”偷换概念的蛮语，用意自然是为了叫嚷“加班无罪”、“跪舔有理”，进而对“躺平”进行镇压和肃反。&lt;/p&gt;
&lt;p&gt;恐怕1886年芝加哥大罢工之前，工人每天劳作15个小时以上这种情况，在食肉者眼里皆是“正确”的、“合理”的。&lt;/p&gt;
&lt;p&gt;且不说这种观点完全是反人道，也是反社会主义、反我国宪法精神、反共和国性质的——就说其具有之相当程度的欺骗性和阴谋性：它直接隐藏了一个事实：你今天苦忍着被剥削、苦忍着打在身上的皮鞭，真的有朝一日你就可以成为手拿皮鞭的持鞭人吗？你今天点头哈腰得“吃得苦中苦”，真的有一天你就可以成为獠牙翻覆的“人上人”吗？&lt;/p&gt;
&lt;p&gt;列宁导师在20世纪初就提出了一个概念：“食利阶层”：“资本主义的腐朽表现在以‘剪息票’为生的资本家这一庞大食利者阶层的形成。英、美、法、德四个先进帝国主义国家各拥有1000—1500亿法郎的有价证券资本，就是说，各国每年的收入都不少于50—80亿法郎。”&lt;/p&gt;
&lt;p&gt;而迈克尔·桑德尔在公开课《公正》中则表达的更具象：“当今社会是一场高级经理人和食利者之间的赛跑，最终受损者则是在旁观赛的普通大众。”&lt;/p&gt;
&lt;p&gt;那么什么是“高级经理人”？&lt;/p&gt;
&lt;p&gt;列宁指出：食利阶层往往会拿出一部分利润收买无产阶级中的精英分子，使他们“资产阶级化”，成为资产阶级在无产阶级中的“代理人”。&lt;/p&gt;
&lt;p&gt;这就是我们所说的“工贼”：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623031068063.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
常见于今天体制内的中层油腻小老头，和体制外市场中的财阀中层领导、中小企业老板，以及一大堆精神资本家。&lt;/p&gt;
&lt;p&gt;这些人往往会在既得利益的体系中由于异常会舔（今天的话术叫做情商高、眼头活、会来事；本质则是比较擅于抛弃自己原本的阶级属性）而得到一丝丝高于底层工农的甜头。&lt;/p&gt;
&lt;p&gt;于是他们便会摇身一变、为身处的既得利益体系以及这份体系事实上真正的顶层吸益人，大肆摇旗呐喊、奔走鼓吹——仿佛自己也是这个体系的顶端话事人一般，而忽略了自己其实也是一个被剥削者、也有太多需要去点头哈腰的时刻的事实——不论是体制内的权力程序，还是体制外的市场程序。&lt;/p&gt;
&lt;p&gt;正如许多小企业主，平时对员工颐指气使、鼓吹966奋斗论，却忘了自己完全也是市场语境下的被剥削者、在公司背后的投资人面前也得装孙子的现实。&lt;/p&gt;
&lt;p&gt;还是鲁迅先生警示被压榨的年轻人警示得好哇：“做奴隶虽然不幸，但并不可怕，因为知道挣扎，毕竟还有挣脱的希望；若是从奴隶生活中寻出美来，赞叹、陶醉，就是万劫不复的奴才了！”&lt;/p&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623031090165.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h1 id=&#34;-6&#34;&gt;&lt;/h1&gt;
&lt;p&gt;附一段【毛泽东警卫员李银桥 回忆录片段】&lt;/p&gt;
&lt;p&gt;毛主席转身，终于望住我：“你是哪里人呢？”&lt;/p&gt;
&lt;p&gt;“河北省安平县。”&lt;/p&gt;
&lt;p&gt;“父母干什么呢？”&lt;/p&gt;
&lt;p&gt;“我父亲种地拉脚，农闲倒腾点粮食买卖；母亲操持家务，农忙时节也下地。”&lt;/p&gt;
&lt;p&gt;“我们的家庭很相像嘛。你喜欢父亲还是喜欢母亲?”&lt;/p&gt;
&lt;p&gt;“喜欢母亲。我父亲脑子好，多少账也算不糊涂。可是脾气大，爱喝酒，吃饭他单独吃，他吃饼子我们啃窝头，稍不如意就打人。我母亲心善，对人好，我喜欢母亲。”&lt;/p&gt;
&lt;p&gt;“越说越一致了嘛。你母亲一定信佛。”&lt;/p&gt;
&lt;p&gt;“主席您怎么知道？”&lt;/p&gt;
&lt;p&gt;“你说她心善，出家人慈悲为怀。”&lt;/p&gt;
&lt;p&gt;我目瞪口呆。听惯了政治课，我没想到毛主席会说出这样的话。同时，我又感到与主席突然近了，紧张和拘束消失许多。我小声问:“主席，您母亲也信佛吗？”&lt;/p&gt;
&lt;p&gt;“我也喜欢母亲。她也信佛，心地善良。小时候我还跟她一起去庙里烧过香呢。后来我不信了。你磕多少头，中国也强不起来，人民还是受苦。”&lt;/p&gt;
&lt;p&gt;主席顿一顿，“磕头不如造反！”&lt;/p&gt;
&lt;p&gt;……………&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623031110876.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
“人人生而平等”这句话有没有问题？没问题，但它必须还有一个配套的下半句，叫做“造反有理”。&lt;/p&gt;
&lt;p&gt;也就是毛泽东1939年在延安说的：“马克思主义的道理千条万绪，归根结底就是一句话：‘造反有理’。几千年来总是说压迫有理、剥削有理，而造反无理。自从马克思主义出来，就把这个旧案翻过来了，这是个大功劳，这个道理是无产阶级从斗争中得来的，而马克思作了结论。根据这个道理，于是就反抗，就斗争，就干社会主义。”&lt;/p&gt;
&lt;p&gt;没有了“造反有理”这个配套的后缀，“人人生而平等”就成了一句扯淡的空谈，且反而会成为统治阶层洗脑下层的利器，割草都是割得润物无声。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623031128736.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1623031138198.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
刘建宏曾直言不讳地说过这样一段话：“你说我们是利益既得者吗？我想我们是。我们之前的人相对来说好动摇，他虽然挡在你面前，你稍微动一动，他就让位了。但是后面的人要想让我去让位，不是很容易。这个事我跟（白）岩松探讨过很长时间，我说你看到你后面的威胁了吗？他说真没看到，我说，我也没看到。”&lt;/p&gt;
&lt;p&gt;那么此时，羸弱的“草”们所能做的，也就是“躺平”了。&lt;/p&gt;
&lt;h1 id=&#34;跋&#34;&gt;跋&lt;/h1&gt;
&lt;p&gt;从“丧文化”到“佛系”，从“沙雕”到“打工人”，下游的被压榨群体们在互联网上不断地寻找着共鸣、创造着新词。&lt;/p&gt;
&lt;p&gt;或是集体颓唐，或是集体装疯卖傻……总之，他们心里都是很清楚的：活着很苦，苦中作乐得了。&lt;/p&gt;
&lt;p&gt;5月初，已然颇具政治危机、社会维稳要务之势的七普数据，在官方此前连续用韩国、日本、美国等国的人口形势来给民众“做足思想准备”之后，终于出炉。&lt;/p&gt;
&lt;p&gt;数据显示：年轻人不愿意生孩子了，连带着的还包括婚姻抵触、恋爱抵触、社交抵触。&lt;/p&gt;
&lt;p&gt;这又何尝不也是一种“躺平”？&lt;/p&gt;
&lt;p&gt;教育成本、购房成本、996剥削、延迟退休……试问拿什么来遏制“躺平”？又有什么理由去指责“躺平”？&lt;/p&gt;
&lt;p&gt;很多时候不禁想问：拼多多还要再跳楼几人？马云外滩宣战演讲还要再来几场？十八大之前那帮在舆论场舞动话筒的高校公知教授和直到今天都老而不死的HS一代，以及贾浅浅炫耀权力一般的“屎尿屁文学”，还嫌不够？&lt;/p&gt;
&lt;p&gt;底层愈发内卷，高层愈发稳固。&lt;/p&gt;
&lt;p&gt;90后们今天无可奈何的“躺平”，难道不是对一百年前同是一群“90后”的革命先辈们用2000万牺牲规模才换来一个社会主义新中国的血泪革命史的一种讽刺吗？&lt;/p&gt;
&lt;p&gt;“建立新中国死了多少人，有谁想过这个问题？我是想过的！” ——毛泽东。&lt;/p&gt;
&lt;p&gt;“只有群众的革命斗争，才能使工人生活和国家管理真正有所改善。无论有教养的人怎样‘同情’工人，无论单个恐怖分子怎样英勇斗争，都不能摧毁沙皇专制制度和资本家专横势力。只有工人自己起来斗争只有千百万群众共同斗争才能做到这一点——而当这种斗争减弱下去的时候，工人所争得的成果立刻就开始被夺回去。俄国的革命证实了国际歌中的一段歌词：‘从来就没有什么救世主，也不靠神仙皇帝。要创造人类的幸福，全靠我们自己！’” ——列宁。&lt;/p&gt;
">如何评价某媒体文章《「躺平」可耻，哪来的正义感？》？躺平真的可耻吗？</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/SbNCYJUBm/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;本文转自:&lt;a href=&#34;https://program-think.blogspot.com/2010/02/introduce-digital-certificate-and-ca.html&#34;&gt;https://program-think.blogspot.com/2010/02/introduce-digital-certificate-and-ca.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;先说一个通俗的例子&#34;&gt;先说一个通俗的例子&lt;/h1&gt;
&lt;h2 id=&#34;普通的介绍信&#34;&gt;普通的介绍信&lt;/h2&gt;
&lt;p&gt;想必大伙儿都听说过介绍信的例子吧？假设 A 公司的张三先生要到 B 公司去拜访，但是 B 公司的所有人都不认识他，他咋办捏？常用的办法是带公司开的一张介绍信，在信中说：兹有张三先生前往贵公司办理业务，请给予接洽......云云。然后在信上敲上A公司的公章。&lt;br&gt;
　　张三先生到了 B 公司后，把介绍信递给 B 公司的前台李四小姐。李小姐一看介绍信上有 A 公司的公章，而且A公司是经常和 B 公司有业务往来的，这位李小姐就相信张先生不是歹人了。&lt;br&gt;
　　说到这，爱抬杠的同学会问了：万一公章是伪造的，咋办捏？在此，俺要先声明，在本例子中，先假设公章是难以伪造滴，否则俺的故事没法说下去鸟。&lt;/p&gt;
&lt;h2 id=&#34;引入中介机构的介绍信&#34;&gt;引入中介机构的介绍信&lt;/h2&gt;
&lt;p&gt;好，回到刚才的话题。如果和 B 公司有业务往来的公司很多，每个公司的公章都不同，那前台就要懂得分辨各种公章，非常滴麻烦。所以，有某个中介公司 C，发现了这个商机。C公司专门开设了一项“代理公章”的业务。&lt;br&gt;
　　今后，A 公司的业务员去B公司，需要带2个介绍信：&lt;br&gt;
　　介绍信1&lt;br&gt;
　　含有 C 公司的公章及 A 公司的公章。并且特地注明：C 公司信任A公司。&lt;br&gt;
　　介绍信2&lt;br&gt;
　　仅含有 A 公司的公章，然后写上：兹有张三先生前往贵公司办理业务，请给予接洽......云云。&lt;/p&gt;
&lt;p&gt;某些不开窍的同学会问了，这样不是增加麻烦了吗？有啥好处捏？&lt;br&gt;
　　主要的好处在于，对于接待公司的前台，就不需要记住各个公司的公章分别是啥样子的；他/她只要记住中介公司 C 的公章即可。当他/她拿到两份介绍信之后，先对“介绍信1”的 C 公章，验明正身；确认无误之后，再比对“介绍信1”和“介绍信2”的两个 A 公章是否一致。如果是一样的，那就可以证明“介绍信2”是可以信任的了。&lt;/p&gt;
&lt;h1 id=&#34;相关专业术语的解释&#34;&gt;相关【专业术语】的解释&lt;/h1&gt;
&lt;p&gt;费了不少口水，终于说完了一个俺自认为比较通俗的例子。如果你听到到这儿，还是想不明白这个例子在说啥，那后续的内容，就不必浪费时间听了 😦&lt;br&gt;
　　下面，俺就着上述的例子，把相关的名词，作一些解释。&lt;/p&gt;
&lt;h2 id=&#34;证书是啥&#34;&gt;“证书”是啥？&lt;/h2&gt;
&lt;p&gt;“证书”洋文也叫“digital certificate”或“public key certificate”&lt;br&gt;
　　它是用来证明某某东西确实是某某东西的东西（是不是像绕口令？）。通俗地说，证书就好比例子里面的公章。通过公章，可以证明该介绍信确实是对应的公司发出的。&lt;br&gt;
　　理论上，人人都可以找个证书工具，自己做一个证书。那如何防止坏人自己制作证书出来骗人捏？请看后续 CA 的介绍。&lt;/p&gt;
&lt;h2 id=&#34;ca是啥&#34;&gt;“CA”是啥？&lt;/h2&gt;
&lt;p&gt;CA 是“Certificate Authority”的缩写，也叫“证书授权中心”。&lt;br&gt;
　　它是负责管理和签发证书的第三方机构，就好比例子里面的中介——C 公司。一般来说，CA 必须是所有行业和所有公众都信任的、认可的。因此它必须具有足够的权威性。就好比A、B两公司都必须信任 C 公司，才会找 C 公司作为公章的中介。&lt;/p&gt;
&lt;h2 id=&#34;ca-证书是啥&#34;&gt;“CA 证书”是啥？&lt;/h2&gt;
&lt;p&gt;CA 证书，顾名思义，就是CA颁发的证书。&lt;br&gt;
　　前面已经说了，人人都可以找工具制作证书。但是你一个小破孩制作出来的证书是没啥用处的。因为你【不是】权威的 CA 机关，你自己搞的证书不具有权威性。&lt;br&gt;
　　这就好比上述的例子里，某个坏人自己刻了一个公章，盖到介绍信上。但是别人一看，不是【受信任】的中介公司的公章，就不予理睬。坏蛋的阴谋就不能得逞啦。&lt;br&gt;
　　文本后续提及的证书，若无特殊说明，均指 CA 证书。&lt;/p&gt;
&lt;h2 id=&#34;啥是证书之间的信任关系&#34;&gt;啥是证书之间的【信任关系】？&lt;/h2&gt;
&lt;p&gt;在俺的例子里谈到，引入中介后，业务员要同时带两个介绍信。第一个介绍信包含了两个公章，并注明，公章C信任公章A。证书间的信任关系，就和这个类似。就是用一个证书来证明另一个证书是真实可信滴。&lt;/p&gt;
&lt;h2 id=&#34;啥是证书的信任链&#34;&gt;啥是证书的【信任链】？&lt;/h2&gt;
&lt;p&gt;实际上，证书之间的信任关系，是可以嵌套的。比如，C 信任 A1，A1 信任 A2，A2 信任 A3......这个叫做证书的信任链。只要你信任链上的头一个证书，那后续的证书，都是可以信任滴。&lt;/p&gt;
&lt;h2 id=&#34;啥是根证书&#34;&gt;啥是【根证书】？&lt;/h2&gt;
&lt;p&gt;“根证书”的洋文叫“root certificate”。为了说清楚根证书是咋回事，再来看个稍微复杂点的例子。&lt;br&gt;
　　假设 C 证书信任 A 和 B；然后 A 信任 A1 和 A2；B 信任 B1 和 B2。则它们之间，构成如下的一个树形关系（一个倒立的树）。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1622197859502.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;处于最顶上的树根位置的那个证书，就是“根证书”。除了根证书，其它证书都要依靠上一级的证书，来证明自己。那谁来证明“根证书”可靠捏？实际上，根证书自己证明自己是可靠滴（或者换句话说，根证书是不需要被证明滴）。&lt;br&gt;
　　聪明的同学此刻应该意识到了：根证书是整个证书体系安全的根本。所以，如果某个证书体系中，根证书出了问题（不再可信了），那么所有被根证书所信任的其它证书，也就不再可信了。这个后果是相当相当滴严重（简直可以说是灾难性的）。&lt;/p&gt;
&lt;h1 id=&#34;证书有啥用&#34;&gt;证书有啥用？&lt;/h1&gt;
&lt;p&gt;CA 证书的作用有很多，俺为了节省口水，只列出常用的几个。&lt;/p&gt;
&lt;h2 id=&#34;验证网站是否可信针对-https&#34;&gt;验证网站是否可信（针对 HTTPS）&lt;/h2&gt;
&lt;p&gt;通常，我们如果访问某些敏感的网页（比如用户登录的页面），其协议都会使用 HTTPS 而不是 HTTP。因为 HTTP 协议是明文的，一旦有坏人在偷窥你的网络通讯，他/她就可以看到网络通讯的内容（比如你的密码、银行帐号、等）；而 HTTPS 是加密的协议，可以保证你的传输过程中，坏蛋无法偷窥。&lt;br&gt;
　　但是，千万【不要】以为，HTTPS 协议有了加密，就可高枕无忧了。俺再举一个例子来说明，光有加密是不够滴。假设有一个坏人，搞了一个假的网银的站点，然后诱骗你上这个站点。假设你又比较单纯，一不留神，就把你的帐号，口令都输入进去了。那这个坏蛋的阴谋就得逞鸟。&lt;br&gt;
　　为了防止坏人这么干，HTTPS 协议除了有加密的机制，还有一套证书的机制。通过证书来确保，某个站点确实就是某个站点。&lt;br&gt;
　　有了证书之后，当你的浏览器在访问某个 HTTPS 网站时，会验证该站点上的 CA 证书（类似于验证介绍信的公章）。如果浏览器发现该证书没有问题（证书被某个根证书信任、证书上绑定的域名和该网站的域名一致、证书没有过期），那么页面就直接打开；否则的话，浏览器会给出一个警告，告诉你该网站的证书存在某某问题，是否继续访问该站点？为了形象起见，下面给出 IE 和 Firefox 的抓图：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1622197913198.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1622197930063.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;大多数知名的网站，如果用了 HTTPS 协议，其证书都是可信的（也就不会出现上述警告）。所以，今后你如果上某个知名网站，发现浏览器跳出上述警告，你就要小心啦！&lt;/p&gt;
&lt;h2 id=&#34;验证某文件是否可信是否被篡改&#34;&gt;验证某文件是否可信（是否被篡改）&lt;/h2&gt;
&lt;p&gt;证书除了可以用来验证某个网站，还可以用来验证某个文件是否被篡改。具体是通过证书来制作文件的数字签名。制作数字签名的过程太专业，咱就不说了。后面专门告诉大家如何验证文件的数字签名。考虑到大多数人用 Windows 系统，俺就拿 Windows 的例子来说事儿。&lt;br&gt;
　　比如，俺手头有一个 Firefox 的安装文件（带有数字签名）。当俺查看该文件的属性，会看到如下的界面。眼神好的同学，会注意到到上面有个“数字签名”的标签页。如果没有出现这个标签页，就说明该文件没有附带数字签名。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1622197973986.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;选择该标签页，看到如下界面。&lt;br&gt;
　　顺便说一下，某些数字签名中没有包含“邮件地址”，那么这一项会显示“不可用”；同样的，某些数字签名没有包含“时间戳”，也会显示“不可用”。不要紧张，这里显示的“不可用”跟数字签名的有效性【没关系】。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1622197996715.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;一般来说，签名列表中，有且仅有一个签名。选中它，点“详细信息”按钮。跳出如下界面：&lt;br&gt;
　　通常这个界面会显示一行字：“该数字签名正常”（图中红圈标出）。如果有这行字，就说明该文件从出厂到你手里，中途没有被篡改过（是原装滴、是纯洁滴）。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1622198010703.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;如果该文件被篡改过了（比如，感染了病毒、被注入木马），那么对话框会出现一个警告提示“该数字签名无效”（图中红圈标出）。界面如下：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1622198028435.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
　　不论签名是否正常，你都可以点“查看证书”按钮。这时候，会跳出证书的对话框。如下：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1622198041625.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1622198052027.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;从后一个界面，可以看到俺刚才说的证书信任链。图中的信任链有3层：&lt;br&gt;
第1层是根证书（Thawte Premium Server CA）&lt;br&gt;
第2层是 Thawte 专门用来签名的证书&lt;br&gt;
第3层是 Mozilla 自己的证书&lt;/p&gt;
&lt;p&gt;目前大多数知名的公司（或组织机构），其发布的可执行文件（比如软件安装包、驱动程序、安全补丁），都带有数字签名。你可以自己去看一下。&lt;br&gt;
　　建议大伙儿在安装软件之前，都先看看是否有数字签名？如果有，就按照上述步骤验证一把。一旦数字签名是坏的，那可千万别装。&lt;/p&gt;
">数字证书及 CA 的扫盲介绍</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/ee3pG-Qog/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;本文转自:&lt;a href=&#34;https://program-think.blogspot.com/2018/10/Comparison-of-DNS-Protocols.html&#34;&gt;https://program-think.blogspot.com/2018/10/Comparison-of-DNS-Protocols.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;引子&#34;&gt;引子&lt;/h1&gt;
&lt;p&gt;俺在写前一篇博文（也就是 &lt;a href=&#34;https://program-think.blogspot.com/2018/09/Why-You-Should-Switch-from-Chrome-to-Firefox.html&#34;&gt;Firefox PK Chrome&lt;/a&gt; 那篇）的时候，碰巧看到 Mozilla 官方博客提到说：目前最新的 Firefox 62 版本开始支持【DNS over HTTPS】这一特性（链接在“&lt;a href=&#34;https://blog.nightly.mozilla.org/2018/06/01/improving-dns-privacy-in-firefox/&#34;&gt;这里&lt;/a&gt;”）。&lt;br&gt;
　　本来想顺便聊一下“DNS over HTTPS”这个玩意儿。但是查了一下，发现它的 RFC 目前还只是【草案】，尚未正式发布。&lt;br&gt;
　　所以俺就把本文的主题改成：对比4种强化 DNS 安全的网络协议。然后借此机会普及一些信息安全知识。&lt;/p&gt;
&lt;h1 id=&#34;dns-是啥玩意儿&#34;&gt;DNS 是啥玩意儿？&lt;/h1&gt;
&lt;p&gt;简而言之，DNS 是用来查询域名的协议。关于它的原理（工作机制），俺已经写过一篇教程（在“&lt;a href=&#34;https://program-think.blogspot.com/2014/01/dns.html&#34;&gt;这里&lt;/a&gt;”），所以今天就不重复浪费口水啦。&lt;br&gt;
　　另外，如果你是技术菜鸟，在看这篇博文之前，确保你已经【看完】如下这篇：&lt;br&gt;
&lt;a href=&#34;https://program-think.blogspot.com/2021/03/Computer-Networks-Overview.html&#34;&gt;《计算机网络通讯的【系统性】扫盲——从“基本概念”到“OSI 模型”》&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;传统的-dns-有啥问题&#34;&gt;传统的 DNS 有啥问题？&lt;/h1&gt;
&lt;p&gt;传统的 DNS 是一个【比较古老】的协议。最早的草案可以追溯到1983年。1987年定稿之后，基本上没啥变化。算起来，它的年龄比俺博客的很多读者都要大。&lt;br&gt;
　　设计 DNS 的时候，互联网基本上还是个玩具。那年头的互联网协议，压根儿都没考虑安全性，DNS 当然也不例外。所以 DNS 的交互过程全都是【明文】滴，既无法做到“保密性”，也无法实现“完整性”。&lt;br&gt;
　　缺乏“保密性”就意味着——任何一个能【监视】你上网流量的人，都可以【看到】你查询了哪些域名。直接引发的问题就是隐私风险。&lt;br&gt;
　　缺乏“完整性”就意味着——任何一个能【修改】你上网流量的人，都可以【篡改】你的查询结果。直接引发的问题就是“DNS 欺骗”（也叫“DNS 污染”或“DNS 缓存投毒”）&lt;br&gt;
　　&lt;br&gt;
　　为了解决传统 DNS 的这些弊端，后来诞生了好几个网络协议，以强化域名系统的安全性。俺挑选其中4个来介绍。除了这4个，其它一些协议的名气和影响力太小，不值一提。&lt;br&gt;
　　下面俺以出场时间的先后，分别介绍这4个协议。&lt;/p&gt;
&lt;h1 id=&#34;dnssec&#34;&gt;DNSSEC&lt;/h1&gt;
&lt;h2 id=&#34;历史&#34;&gt;历史&lt;/h2&gt;
&lt;p&gt;这玩意儿是“Domain Name System Security Extensions”的缩写。在今天介绍的4个协议中，DNSSEC 是最早诞生的（1997）。从最先的 RFC 2065 进化为 RFC 2535，再到 RFC 4033、RFC 4034、RFC 4035。&lt;br&gt;
　　在今天介绍的4个协议中，DNSSEC 也是最早大规模部署的。在2010年的时候，所有根域名服务器都已经部署了 DNSSEC。到了2011年，若干顶级域名（.org 和 .com 和 .net 和 .edu）也部署了 DNSSEC。&lt;/p&gt;
&lt;h2 id=&#34;协议栈&#34;&gt;协议栈&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;--------
DNSSEC
--------
UDP
--------
IP
--------
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;安全性的原理&#34;&gt;安全性的原理&lt;/h2&gt;
&lt;p&gt;当初设计 DNSSEC 的一个考虑是“尽可能兼容 DNS 协议”。所以 DNSSEC 只是在 DNS 协议的基础上增加了一个【数字签名机制】。&lt;br&gt;
　　有了数字签名，如果域名查询的结果被人篡改了，DNSSEC 客户端就可以通过【校验签名】，判断查询结果是假的。套用信息安全的行话——DNSSEC 实现了【完整性】（也叫“不可篡改性”）。&lt;br&gt;
　　由于 DNSSEC 引入了【数字签名】，就需要有【公私钥对】。私钥是保密的，用来生成签名；公钥是公开的，用来验证签名。DNSSEC 客户端可以向 DNSSEC 服务器发出请求，获得一个 DNSKEY 记录，里面含公钥；然后用这个公钥校验每次的查询结果。&lt;/p&gt;
&lt;h2 id=&#34;信任链的实现&#34;&gt;信任链的实现&lt;/h2&gt;
&lt;p&gt;有些聪明的读者会问了：DESSEC 客户端在向服务器请求公钥的过程中，如果被攻击者篡改了，得到一个假的公钥，那该如何是好？&lt;br&gt;
　　为了解决此问题，DNSSEC 体系要求【上级域】来担保。比如想要证明 program-think.blogspot.com 这个域名的公钥是否可信，就依靠 blogspot.com 这个域名的公钥来验证。通过层层追溯，最后达到【根域名服务器】。而“根域名服务器的公钥”是事先就部署在客户端的——这玩意儿就是整个信任链的根源，称之为“信任锚”（洋文叫“Trust Anchor”）。&lt;/p&gt;
&lt;h2 id=&#34;优点&#34;&gt;优点&lt;/h2&gt;
&lt;p&gt;在今天聊的4个协议中，DNSSEC 应该是最成熟的。除了前面提到的广泛部署，大多数公共的域名服务器也都支持它。维基百科上有一个对照表（链接在“&lt;a href=&#34;https://en.wikipedia.org/wiki/Public_recursive_name_server&#34;&gt;这里&lt;/a&gt;”），对比了有名气的几个公共域名服务系统。在今天聊的4个协议中，支持 DNSSEC 的最多。&lt;/p&gt;
&lt;h2 id=&#34;缺点&#34;&gt;缺点&lt;/h2&gt;
&lt;p&gt;虽然 DNSSEC 最成熟，但它有个天生的缺陷——【没有】考虑到【保密性】。&lt;br&gt;
　　DNSSEC 虽然对传输的数据做了数字签名，但是【没有】进行加密。这就意味着——任何能监视你网络流量的人，也可以看到你通过 DNSSEC 查询了哪些域名。隐私风险大大滴！&lt;br&gt;
　　Chrome 曾经在 14 版本支持过 DNSSEC，后来又【移除】了；而 Firefox 官方从未支持过 DNSSEC 协议。俺猜测：大概就是这个缺点给闹的。&lt;/p&gt;
&lt;h1 id=&#34;dnscrypt&#34;&gt;DNSCrypt&lt;/h1&gt;
&lt;h2 id=&#34;历史-2&#34;&gt;历史&lt;/h2&gt;
&lt;p&gt;第2个出场的是 DNSCrypt。这个协议是由 Frank Denis 和 Yecheng Fu（付业成）两人设计的。&lt;br&gt;
　　这个协议从来【没有】提交过 RFC（征求意见稿），要想看它的协议实现，只能去它的官网（链接在“&lt;a href=&#34;https://dnscrypt.info/protocol/&#34;&gt;这里&lt;/a&gt;”）。&lt;br&gt;
　　历史上有过两个版本，分别称：Version 1 和 Version 2。如今主要使用“版本2”&lt;/p&gt;
&lt;h2 id=&#34;协议栈-2&#34;&gt;协议栈&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;----------------
DNSCrypt
----------------
TCP or UDP
----------------
IP
----------------
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;安全性的原理-2&#34;&gt;安全性的原理&lt;/h2&gt;
&lt;p&gt;前面俺提到 DNSSEC 协议强调兼容性。而 DNSCrypt 则完全是另起炉灶搞出来的协议。在这个协议中，域名的“查询请求”与“响应结果”都是加密的。这就是它比 DNSSEC 高级的地方。&lt;br&gt;
　　换句话说，DNSCrypt 既能做到【完整性】，也能做到【保密性】；相比之下，DNSSEC 只能做到【完整性】。&lt;/p&gt;
&lt;h2 id=&#34;信任链的实现-2&#34;&gt;信任链的实现&lt;/h2&gt;
&lt;p&gt;DNSCrypt 的信任链比较简单——客户端要想使用哪个 DNSCrypt 服务器，就需要预先部署该服务器的公钥。&lt;br&gt;
　　另外，DNSCrypt 还支持客户端认证（作为可选项）。如果需要的话，可以在服务器上部署客户端的公钥。此时，服务器只接受可信的客户端的查询请求。&lt;/p&gt;
&lt;h2 id=&#34;优点-2&#34;&gt;优点&lt;/h2&gt;
&lt;p&gt;如前所述，DNSCrypt 同时支持【完整性】与【保密性】。在隐私方面完胜 DNSSEC。&lt;br&gt;
　　在下层协议方面，DNSCrypt 同时支持 TCP 和 UDP，显然比 DNSSEC 灵活（DNSSEC 只支持 UDP）。&lt;br&gt;
　　顺便提醒一下：虽然 DNSCrypt 协议默认使用 443 这个端口号，但该协议与 HTTPS 毫无关系。&lt;/p&gt;
&lt;h2 id=&#34;缺点-2&#34;&gt;缺点&lt;/h2&gt;
&lt;p&gt;（俺个人认为）DNSCrypt 最大的缺点就是前面提到的：【从未】提交过 RFC。没有 RFC 也就无法通过 IETF（互联网工程任务组）进行标准化。一个无法标准化的协议，其生命力要打很大的折扣。&lt;br&gt;
　　另一个比较小的缺点是——虽然 DNSCrypt 协议是加密的，但可以被识别出来。换句话说：如果有人监控你的流量，可以识别出哪些流量属于 DNSCrypt 协议。为啥说这是个缺点捏？在本文末尾讨论 “DNSCrypt 与 TLS 的安全性对比” 的时候，会详细加以说明。&lt;br&gt;
　　再来说说【公共 DNS 系统】。截至俺写本文时，Google 和 Cloudflare 的公共域名系统【尚未】支持 DNSCrypt（参见&lt;a href=&#34;https://en.wikipedia.org/wiki/Public_recursive_name_server&#34;&gt;这个页面&lt;/a&gt;的对照表）。这也是一个缺点。&lt;/p&gt;
&lt;h1 id=&#34;dns-over-tls&#34;&gt;DNS over TLS&lt;/h1&gt;
&lt;p&gt;“DNS over TLS”有时也被简称为【DoT】。为了打字省力，本文以下部分用 DoT 来称呼之。&lt;/p&gt;
&lt;h2 id=&#34;历史-3&#34;&gt;历史&lt;/h2&gt;
&lt;p&gt;DoT 已经正式发布了 RFC（参见 RFC 7858 和 RFC 8310）。&lt;br&gt;
　　从时间上看，RFC7858 是2016年发布的，RFC8310 是今年（2018）发布的；显然，这个协议出现得比较晚（相比前面提到的 DNSSEC 和 DNSCrypt）。&lt;/p&gt;
&lt;h2 id=&#34;协议栈-3&#34;&gt;协议栈&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;--------
DoT
--------
TLS
--------
TCP
--------
IP
--------
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;安全性的原理-3&#34;&gt;安全性的原理&lt;/h2&gt;
&lt;p&gt;顾名思义，DNS over TLS 就是基于 TLS 隧道之上的域名协议。由于 TLS 本身已经实现了【保密性】与【完整性】，因此 DoT 自然也就具有这两项特性。&lt;br&gt;
　　至于 TLS 协议是如何实现完整性与保密性滴？可以参见俺的系列博文：&lt;a href=&#34;https://program-think.blogspot.com/2014/11/https-ssl-tls-0.html&#34;&gt;《扫盲 HTTPS 和 SSL/TLS 协议》&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;信任链的实现-3&#34;&gt;信任链的实现&lt;/h2&gt;
&lt;p&gt;DoT 的信任链依赖于 TLS，而 TLS 的信任链靠的是 CA 证书体系。&lt;br&gt;
　　关于 CA 证书体系，可以参见8年前的博文：&lt;a href=&#34;https://program-think.blogspot.com/2010/02/introduce-digital-certificate-and-ca.html&#34;&gt;《数字证书及 CA 的扫盲介绍》&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;优点-3&#34;&gt;优点&lt;/h2&gt;
&lt;p&gt;相比 DNSSEC，DoT 具备了【保密性】；相比 DNSCrypt，DoT 已经标准化。&lt;br&gt;
　　另外，由于 DoT 协议是完全包裹在 TLS 里面，即使有人监视你的上网流量，也无法判断——哪些 TLS 流量是用于域名查询，哪些 TLS 用于网页传输。换句话说，DoT 协议的流量无法被【单独识别】出来。&lt;/p&gt;
&lt;h2 id=&#34;缺点-3&#34;&gt;缺点&lt;/h2&gt;
&lt;p&gt;支持 DoT 的客户端还不够多。尤其是主流的浏览器还没有计划增加 DoT 的支持。&lt;/p&gt;
&lt;h1 id=&#34;dns-over-https&#34;&gt;DNS over HTTPS&lt;/h1&gt;
&lt;p&gt;“DNS over HTTPS”有时也被简称为【DoH】。为了打字省力，本文以下部分用 DoH 来称呼之。&lt;/p&gt;
&lt;h2 id=&#34;历史-4&#34;&gt;历史&lt;/h2&gt;
&lt;p&gt;在今天介绍的4个协议中，DoH 是最新的（最晚出现的）。RFC 方面，它已经有了相应的草案，但还【没有】正式发布。截至俺写本文时，DoH 的草案已经发了 15 个版本（从 00 到 14），最新版的链接在“&lt;a href=&#34;https://tools.ietf.org/html/draft-ietf-doh-dns-over-https-14&#34;&gt;这里&lt;/a&gt;”。&lt;br&gt;
　　很多人把 DoH 与 DoT 混为一谈，实际上这是两种不同的协议。你可以对比这两者的协议栈，（只要你眼睛不瞎）就可看出其中的差别。&lt;/p&gt;
&lt;h2 id=&#34;协议栈-4&#34;&gt;协议栈&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;--------
DoH
--------
HTTP
--------
TLS
--------
TCP
--------
IP
--------
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;安全性的原理-4&#34;&gt;安全性的原理&lt;/h2&gt;
&lt;p&gt;顾名思义，DNS over HTTPS 就是基于 HTTPS 隧道之上的域名协议。而 HTTPS 又是“HTTP over TLS”。所以 DoH 相当于是【双重隧道】的协议。&lt;br&gt;
　　与 DoT 类似，DoH 最终也是依靠 TLS 来实现了【保密性】与【完整性】。&lt;br&gt;
　　至于 TLS 协议是如何实现完整性与保密性滴？可以参见俺的系列博文：&lt;a href=&#34;https://program-think.blogspot.com/2014/11/https-ssl-tls-0.html&#34;&gt;《扫盲 HTTPS 和 SSL/TLS 协议》&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;信任链的实现-4&#34;&gt;【信任链】的实现&lt;/h2&gt;
&lt;p&gt;DoH 类似于 DoT，最终是靠 TLS 所使用的“CA 证书体系”来实现信任链。&lt;br&gt;
　　关于 CA 证书体系，可以参见8年前的博文：&lt;a href=&#34;https://program-think.blogspot.com/2010/02/introduce-digital-certificate-and-ca.html&#34;&gt;《数字证书及 CA 的扫盲介绍》&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;优点-4&#34;&gt;优点&lt;/h2&gt;
&lt;p&gt;基本上，DoT 具备的优点，DoH 也具备。&lt;br&gt;
　　相比 DoT，DoH 还多了一个优点：&lt;br&gt;
　　由于 DoH 是基于 HTTP 之上。而主流的编程语言都有成熟的 HTTP 协议封装库；再加上 HTTP 协议的使用本身很简单。因此，要想用各种主流编程语言开发一个 DoH 的客户端，是非常容易滴。&lt;/p&gt;
&lt;h2 id=&#34;缺点-4&#34;&gt;缺点&lt;/h2&gt;
&lt;p&gt;如前所述，DoH 目前还只有 RFC 的草案，尚未正式发布。这算是一个缺点。&lt;br&gt;
　　相比 DoT，DoH 还有一个小缺点——由于 DoH 比 DoT 多了一层（请对比两者的协议栈），所以在性能方面，DoH 会比 DoT 略差。为啥说这是个【小】缺点捏？因为域名的查询并【不】频繁，而且客户端软件可以很容易地对域名的查询结果进行【缓存】（以降低查询次数）。所以 DoH 比 DoT 性能略差，无伤大雅。&lt;/p&gt;
&lt;h1 id=&#34;4种协议的综合对照表&#34;&gt;4种协议的综合对照表&lt;/h1&gt;
&lt;p&gt;为了给列位看官一个直观的印象，放一个综合的对照表。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1621680391731.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;为啥-dns-over-https-更有前途谈谈俺个人观点&#34;&gt;为啥 DNS over HTTPS 更有前途？——谈谈俺个人观点&lt;/h1&gt;
&lt;p&gt;接着来聊一下：4个协议中，谁的前景最看好？（以下是俺个人观点，仅供参考）&lt;/p&gt;
&lt;h2 id=&#34;首先排除dnssec&#34;&gt;首先【排除】DNSSEC&lt;/h2&gt;
&lt;p&gt;如果要讨论这4种协议的优劣，首先【出局】的是 DNSSEC。因为这玩意儿连【保密性】都不具备，无法保护网民的隐私。相比之下，另外三种协议都具备了“保密性”。&lt;br&gt;
　　（注：DNSSEC 具备“完整性”，不具备“保密性”）&lt;/p&gt;
&lt;h2 id=&#34;dnscrypt-与-tls-的对比&#34;&gt;DNSCrypt 与 TLS 的对比&lt;/h2&gt;
&lt;p&gt;DoT 与 DoH 这两个协议，本质上都是依赖 TLS 来保证安全性（完整性＆保密性）。所以剩下三种协议的对比，首先是 DNSCrypt 与 TLS 之间的 PK。&lt;br&gt;
　　俺认为 TLS 具有如下几个优势：&lt;br&gt;
　　优势1——关于“标准化”&lt;br&gt;
　　SSL/TLS 老早就已经标准化了，距今已超过20年。（关于 SSL/TLS 版本的演变历史，可以参见这篇博文）&lt;br&gt;
　　而 DNSCrypt 发布这么多年，连 RFC 都没有提交过——这玩意儿看来【没希望】成为互联网标准了。&lt;/p&gt;
&lt;p&gt;优势2——关于“客户端部署”&lt;br&gt;
　　TLS 的公钥体系（CA 证书体系）早就已经普及。所有主流的操作系统都内置了一系列 CA 根证书。&lt;br&gt;
　　相比之下，DNSCrypt 另起炉灶搞了一套公钥机制，只有它自己在用。&lt;br&gt;
　　所以，在【部署客户端】的时候，DNSCrypt 会比 TLS 麻烦。虽然某些 DNSCrypt 的客户端已经内置了一些知名的公共服务器的公钥，但如果你要切换到另一个 DNSCrypt 服务器，并且该服务器的公钥没有内置在客户端里面，那你就需要手动部署。&lt;/p&gt;
&lt;p&gt;优势3——关于“协议识别”&lt;br&gt;
　　这个话题前面已经谈过了。此处再重复唠叨一下。&lt;br&gt;
　　如果网络流量被监控，监控者可以根据协议特征，把 DNSCrypt 识别出来；而 DoT 与 DoH，在流量外观上，与其它的 TLS 流量【毫无差异】。也就是说，监控流量的人，无法判断某个 TLS 流量是否属于 DoT 或 DoH。&lt;br&gt;
　　综上所述，TLS 完胜 DNSCrypt。所以，剩下的协议就只有 DoT 与 DoH。&lt;/p&gt;
&lt;h2 id=&#34;dot-vs-doh&#34;&gt;DoT VS DoH&lt;/h2&gt;
&lt;p&gt;前面谈 DoH 优缺点的时候，其实已经可以看出这两者谁更有前途了。&lt;br&gt;
　　DoT 因为协议栈少了一层，性能会比 DoH 更好。但是俺前面也说了，域名查询的频度是比较低的，而且还可以利用客户端软件的【DNS 缓存】，进一步减少域名查询的频度。所以 DoT 虽然性能更好，但优势不明显。&lt;/p&gt;
&lt;p&gt;DoH 的强项体现在如下几方面：&lt;br&gt;
　　1. 编程接口更简单&lt;br&gt;
　　（关于这点，前面提到过）这是个很重要的优势——有助于让更多软件切换到 DoH 之上。&lt;/p&gt;
&lt;p&gt;2. 可以利用 HTTP 协议已有的特性&lt;br&gt;
　　由于 DoH 是基于 HTTPS 之上，可以无缝地支持 Proxy；&lt;br&gt;
　　DoH 可以充分利用 HTTP 2.0 的特性（HTTP/2 在 HTTP/1.1 基础上加了很多功能）。&lt;/p&gt;
&lt;p&gt;正是因为 DoH 的这些优势，浏览器厂商对 DoH 的支持更积极。对比一下就可以看出来——DoT 在两年前（2016）正式发布 RFC，主流的浏览器没一个支持；而 DoH 目前才仅仅是 RFC 草案，Firefox 与 Chrome/Chromium 都开始支持了。&lt;/p&gt;
&lt;h2 id=&#34;小结&#34;&gt;小结&lt;/h2&gt;
&lt;p&gt;经过层层淘汰，目前看下来最有前途的应该 DoH（DNS over HTTPS）。&lt;br&gt;
　　DoH 未来的发展势头取决于如下几点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;标准化的时间进度（看目前的架势，正式发布应该快到了）&lt;/li&gt;
&lt;li&gt;其它浏览器跟进的速度&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;对-doh-的进一步讨论&#34;&gt;对 DoH 的进一步讨论&lt;/h1&gt;
&lt;h2 id=&#34;引申阅读&#34;&gt;引申阅读&lt;/h2&gt;
&lt;p&gt;分享几篇 DoH 相关的文章：&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://hacks.mozilla.org/2018/05/a-cartoon-intro-to-dns-over-https/&#34;&gt;《A cartoon intro to DNS over HTTPS》&lt;/a&gt;&lt;br&gt;
（注：这是 Mozilla 官方博客的一篇文章，深入浅出地扫盲了 DNS 和 DoH 的原理）&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://bitsup.blogspot.com/2018/05/the-benefits-of-https-for-dns.html&#34;&gt;《The Benefits of HTTPS for DNS》&lt;/a&gt;&lt;br&gt;
（注：这是某个老外写的技术文章，讨论 DoH 可以借助 HTTP 协议的哪些好处）&lt;/p&gt;
&lt;h2 id=&#34;关于浏览器的说明&#34;&gt;关于浏览器的说明&lt;/h2&gt;
&lt;p&gt;Firefox&lt;br&gt;
　　Firefox 从 62 版本开始支持 DoH，具体参见 Mozilla 官方博客（链接在“&lt;a href=&#34;https://blog.nightly.mozilla.org/2018/06/01/improving-dns-privacy-in-firefox/&#34;&gt;这里&lt;/a&gt;”）。&lt;br&gt;
　　由于 DoH 功能刚刚加入，还没有提供相应的配置界面。如果你想体验该功能，需要定制 Firefox 的配置选项（Preferences）以初始化 DoH 的相关参数。定制 Firefox 的方法参见博文：&lt;a href=&#34;https://program-think.blogspot.com/2019/07/Customize-Firefox.html&#34;&gt;《扫盲 Firefox 定制——从“user.js”到“omni.ja”》&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Chrome/Chromium&lt;br&gt;
　　Chrome/Chromium 从 66 版本开始支持 DoH。具体参见 Chromium 官网的 issue（链接在“&lt;a href=&#34;https://bugs.chromium.org/p/chromium/issues/detail?id=799753&#34;&gt;这里&lt;/a&gt;”）。&lt;/p&gt;
&lt;p&gt;虽然 Firefox 和 Chrome/Chromium 都已经开始支持 DoH，但大伙儿别急着用。&lt;br&gt;
　　按照历史经验，刚加入的新功能，可能还不够稳定，没准儿还存在未曝光的安全漏洞。多等几个版本之后再说。&lt;/p&gt;
&lt;h2 id=&#34;相关的客户端工具&#34;&gt;相关的客户端工具&lt;/h2&gt;
&lt;p&gt;在 curl 官方的代码仓库，有一个&lt;a href=&#34;https://github.com/curl/curl/wiki/DNS-over-HTTPS#doh-tools&#34;&gt;关于 DoH 的 wiki 页面&lt;/a&gt;，里面列出了一些 DoH 的客户端小工具。&lt;br&gt;
　　喜欢折腾技术的同学，可以先去玩一玩。&lt;/p&gt;
&lt;p&gt;因为 DoH 的标准还没有正式发布，关于它的讨论就到此为止。等到啥时候发布了，俺再专门发一篇 DoH 如何使用的博文。&lt;/p&gt;
">对比4种强化域名安全的协议——DNSSEC，DNSCrypt，DNS over TLS，DNS over HTTPS</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/UN4IHs4TZ/"" data-c="
          &lt;p&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1621149248887.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
当我们打开网站时也许不会去留意网站前面的HTTP是怎么来的。但是它毫无疑问在网络中有着举足轻重的地位。本文从起源到发展，详说HTTP从1到3的演变。&lt;/p&gt;
&lt;h1 id=&#34;说在前面&#34;&gt;说在前面&lt;/h1&gt;
&lt;p&gt;本文不致力于讲完 HTTP 的全部内容，事实上短短的篇幅也不可能讲完。本文也无意于深挖 HTTP 中的某一点，这是像 《HTTP 权威指南》或者是 RFC 协议做的事。&lt;/p&gt;
&lt;p&gt;本文目标是帮助读者理清 HTTP 的演化过程，说说 HTTP 变化的那些事。&lt;/p&gt;
&lt;h1 id=&#34;http-的起源&#34;&gt;HTTP 的起源&lt;/h1&gt;
&lt;p&gt;HTTP 最初是 Tim BernersLee 1989 年在欧洲核子研究组织（CERN）所发起的。Tim BernersLee 提出了一种能让远隔两地的研究者们共享知识的设想。这个设想的基本理念是：借助多文档之间相互关联形成的超文本（HyperText），连成可相互参阅的 WWW（World Wide Web，万维网）。用于传输的超文本传输协议（HyperText Transfer Protocol），即 HTTP 由此诞生。&lt;/p&gt;
&lt;p&gt;WWW 这一名称，是 Web 浏览器当年用来浏览超文本的客户端应用程序时的名称。现在则用来表示这一系列的集合，也可简称为 Web。&lt;/p&gt;
&lt;p&gt;HTTP 本身是一个简单的请求-响应协议，它通常运行在 TCP 之上。从整个网络模型来看，HTTP 是应用层的一个协议。在 OSI 七层模型中，HTTP 位于最上层。它并不涉及数据包的传输，只是规定了客户端和服务器之间的通信格式。定了客户端可能发送给服务器什么样的消息以及得到什么样的响应。请求和响应消息的头以 ASCII 码形式给出。&lt;/p&gt;
&lt;p&gt;HTTP 采用 BS 架构，也就是浏览器到服务器的架构，客户端通过浏览器发送 HTTP 请求给服务器，服务器经过解析响应客户端的请求。就是这个简单实用的模型，使得 HTTP 这个基于 TCP/IP 的协议迅速推广。&lt;/p&gt;
&lt;h2 id=&#34;http09-到-http11&#34;&gt;HTTP/0.9 到 HTTP/1.1&lt;/h2&gt;
&lt;p&gt;HTTP 的演化并不是一蹴而就的。当年 HTTP 的出现主要是为了解决文本传输的难题。由于协议本身非常简单，于是在此基础上设想了很多应用方法并投入了实际使用。现在 HTTP 已经超出了 Web 这个框架的局限，被运用到了各种场景里。&lt;/p&gt;
&lt;h3 id=&#34;http09&#34;&gt;HTTP/0.9&lt;/h3&gt;
&lt;p&gt;HTTP 协议最早的一个版本是 1990 年发布的 HTTP/0.9。&lt;/p&gt;
&lt;p&gt;前面说到，HTTP 于 1989 年问世。那时的 HTTP 并没有作为正式的标准被建立。这时的 HTTP 其实含有 HTTP/1.0 之前版本的意思，因此被称为 HTTP/0.9。这个版本只有一个命令：GET。通过 GET 可以获取服务器的资源，比如请求服务器根目录下的 index.html 文件。这个版本的协议规定，服务器只能回应 HTML 格式的字符串，不能回应其它格式，也就是说图像、视频等多媒体资源，在 HTTP/0.9 这个版本上是无法进行传输的。&lt;/p&gt;
&lt;h3 id=&#34;http10&#34;&gt;HTTP/1.0&lt;/h3&gt;
&lt;p&gt;HTTP 正式作为标准被公布是在 1996 年的 5 月，版本被命名为 HTTP/1.0，并记载于 &lt;a href=&#34;https://www.ietf.org/rfc/rfc1945.txt&#34;&gt;RFC1945 &lt;/a&gt;。虽说是初期标准，但该协议标准至今仍被广泛使用在服务器端。&lt;/p&gt;
&lt;p&gt;HTTP/1.0 版本发布，增加了 POST 命令和 HEAD 命令，丰富了浏览器与服务器的互动手段。这个版本的 HTTP 协议可以发送任何格式的内容，包括传输文字、图像、视频、文件等，这为互联网的大发展奠定了基础。&lt;/p&gt;
&lt;p&gt;HTTP/1.0 除了增加了请求方法以及对发送文件的支持之外，还增加了格式的改变。除了数据部分，每次通信都必须包括头信息（HTTP header），用来描述一些元数据。另外还增加了状态码、多字符集支持、多部分发送（multi-part type）、权限（authorization）、缓存（cache）、内容编码（content encoding）等等。&lt;/p&gt;
&lt;h3 id=&#34;http11&#34;&gt;HTTP/1.1&lt;/h3&gt;
&lt;p&gt;HTTP/1.0 版也并不是完美的，它的主要缺点是，每一次建立 TCP 连接只能发送一个请求。发送数据完毕，连接就关闭，如果还要请求其他资源，就必须再新建一个连接。如果多次请求，势必就会对服务器产生较大的资源性能损耗。&lt;/p&gt;
&lt;p&gt;1997 年 1 月公布的 HTTP/1.1 是目前主流的 HTTP 协议版本。当初的标准是 RFC2068，之后发布的修订版 RFC2616 就是当前的最新版本。&lt;/p&gt;
&lt;p&gt;其中最著名的是 1999 年 6 月公布的 &lt;a href=&#34;https://tools.ietf.org/html/rfc2616&#34;&gt;RFC 2616&lt;/a&gt;，定义了 HTTP 协议中现今广泛使用的一个版本——HTTP/1.1。&lt;/p&gt;
&lt;p&gt;这个版本最大的变化就是将持久化连接加入了 HTTP 标准，即 TCP 连接默认不关闭，可以被多个请求复用。此外，HTTP/1.1 版还新增了许多方法，例如：PUT、PATCH、HEAD、OPTIONS、DELETE。得到进一步完善的HTTP/1.1 版本，一直沿用至今。&lt;/p&gt;
&lt;h1 id=&#34;http-协议简单介绍&#34;&gt;HTTP 协议简单介绍&lt;/h1&gt;
&lt;h2 id=&#34;请求&#34;&gt;请求&lt;/h2&gt;
&lt;p&gt;客户端发送一个 HTTP 请求到服务器，请求消息包括以下格式：&lt;/p&gt;
&lt;p&gt;请求行（request line）、请求头部（header）、空行和请求数据四个部分组成。&lt;/p&gt;
&lt;p&gt;Get 请求例子&lt;br&gt;
&amp;gt; GET / HTTP/1.1&lt;br&gt;
&amp;gt; Host: www.baidu.com&lt;br&gt;
&amp;gt; User-Agent: curl/7.52.1&lt;br&gt;
&amp;gt; Accept: &lt;em&gt;/&lt;/em&gt;&lt;br&gt;
第一部分：请求行，用来说明请求类型，要访问的资源以及所使用的 HTTP 版本。&lt;/p&gt;
&lt;p&gt;第二部分：请求头部，紧接着请求行（即第一行）之后的部分，用来说明服务器要使用的附加信息&lt;/p&gt;
&lt;p&gt;从第二行起为请求头部，HOST 将指出请求的目的地。User-Agent，服务器端和客户端脚本都能访问它,它是浏览器类型检测逻辑的重要基础。该信息由你的浏览器来定义，并且在每个请求中自动发送等等。&lt;/p&gt;
&lt;p&gt;第三部分：空行，请求头部后面的空行是必须的&lt;/p&gt;
&lt;p&gt;即使第四部分的请求数据为空，也必须有空行。&lt;/p&gt;
&lt;p&gt;第四部分：请求数据也叫主体，可以添加任意的其他数据。&lt;/p&gt;
&lt;p&gt;这个例子的请求数据为空。&lt;/p&gt;
&lt;h2 id=&#34;响应消息&#34;&gt;响应消息&lt;/h2&gt;
&lt;p&gt;一般情况下，服务器接收并处理客户端发过来的请求后，会返回一个 HTTP 的响应消息。&lt;/p&gt;
&lt;p&gt;HTTP 响应也由四个部分组成，分别是：状态行、消息报头、空行和响应正文。&lt;/p&gt;
&lt;p&gt;例子：&lt;br&gt;
&amp;lt; HTTP/1.1 200 OK&lt;br&gt;
&amp;lt; Accept-Ranges: bytes&lt;br&gt;
&amp;lt; Cache-Control: private, no-cache, no-store, proxy-revalidate, no-transform&lt;br&gt;
&amp;lt; Connection: keep-alive&lt;br&gt;
&amp;lt; Content-Length: 2381&lt;br&gt;
&amp;lt; Content-Type: text/html&lt;br&gt;
&amp;lt; Date: Thu, 11 Jun 2020 16:04:33 GMT&lt;br&gt;
&amp;lt; Etag: &amp;quot;588604c8-94d&amp;quot;&lt;br&gt;
&amp;lt; Last-Modified: Mon, 23 Jan 2017 13:27:36 GMT&lt;br&gt;
&amp;lt; Pragma: no-cache&lt;br&gt;
&amp;lt; Server: bfe/1.0.8.18&lt;br&gt;
&amp;lt; Set-Cookie: BDORZ=27315; max-age=86400; domain=.baidu.com; path=/&lt;br&gt;
&amp;lt;&lt;br&gt;
&lt;!DOCTYPE html&gt;&lt;br&gt;
&lt;!--STATUS OK--&gt;&lt;html&gt; &lt;head&gt;&amp;lt;meta HTTP-equiv=content-type content=text/html;charset=utf-8&amp;gt;&amp;lt;meta HTTP-equiv=X-UA-Compatible content=IE=Edge&amp;gt;&lt;meta content=always name=referrer&gt;... &lt;/html&gt;&lt;/p&gt;
&lt;p&gt;第一部分：状态行，由 HTTP 协议版本号、状态码、状态消息三部分组成。&lt;/p&gt;
&lt;p&gt;第一行为状态行，（HTTP/1.1）表明 HTTP 版本为 1.1 版本，状态码为 200，状态消息为（ok）&lt;/p&gt;
&lt;p&gt;第二部分：消息报头，用来说明客户端要使用的一些附加信息&lt;/p&gt;
&lt;p&gt;第二行和第三行为消息报头。&lt;/p&gt;
&lt;p&gt;Date：生成响应的日期和时间；Content-Type：指定了 MIME 类型的 HTML(text/html)，编码类型是 UTF-8&lt;/p&gt;
&lt;p&gt;第三部分：空行，消息报头后面的空行是必须的&lt;/p&gt;
&lt;p&gt;第四部分：响应正文，服务器返回给客户端的文本信息。&lt;/p&gt;
&lt;p&gt;空行后面的 HTML 部分为响应正文。&lt;/p&gt;
&lt;h2 id=&#34;状态码&#34;&gt;状态码&lt;/h2&gt;
&lt;p&gt;状态代码有三位数字组成，第一个数字定义了响应的类别，共分五种类别:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1xx：指示信息–表示请求已接收，继续处理&lt;/li&gt;
&lt;li&gt;2xx：成功–表示请求已被成功接收、理解、接受&lt;/li&gt;
&lt;li&gt;3xx：重定向–要完成请求必须进行更进一步的操作&lt;/li&gt;
&lt;li&gt;4xx：客户端错误–请求有语法错误或请求无法实现&lt;/li&gt;
&lt;li&gt;5xx：服务器端错误–服务器未能实现合法的请求&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;安全性与-https&#34;&gt;安全性与 HTTPS&lt;/h1&gt;
&lt;p&gt;HTTP 的诞生是为了解决信息传递和共享的问题，并没有考虑到互联网高速发展后面临的安全问题。&lt;/p&gt;
&lt;p&gt;一般来说 HTTP 从 TCP 三次握手后，便开始了数据传输。由于 HTTP 本身以明文形式来传输数据，并不具备任何数据加密、身份校验的机制。同时下层协议并不对数据安全性、保密性提供保证。所以在网络传输的过程中，任意节点的第三方都可以随意劫持流量、篡改数据或窃取信息。&lt;/p&gt;
&lt;p&gt;HTTP 无法确保数据的保密性、完整性和真实性，已经不能适应现代互联网应用的安全需求。&lt;/p&gt;
&lt;p&gt;随着 Web 的日益壮大，HTTP 的使用呈巨额增长趋势，对信息安全的需求也愈来愈迫切，SSL（Secure SocketsLayer ，安全套接层）应运而生。&lt;/p&gt;
&lt;p&gt;当对于安全需求，首先想到的就是对信息进行加密。SSL ，安全套接层，顾名思义是在 TCP 上提供的安全套接字层。其位于应用层和传输层之间，应用层数据不再直接传递给传输层而是传递给 SSL 层，SSL 层对从应用层收到的数据进行加密，利用数据加密、身份验证和消息完整性验证机制，为网络上数据的传输提供安全性保证。HTTPS 便是指 Hyper Text Transfer Protocol over SecureSocket Layer。&lt;/p&gt;
&lt;p&gt;谈到具体实施上，业内通常采用的一般有对称加密和非对称加密。采用何种方式进行加密？如何判断服务器未被篡改？如何传递加密密钥？带着这样的问题，我们来看看 HTTPS 的工作流程。&lt;/p&gt;
&lt;h2 id=&#34;https-的工作流程&#34;&gt;HTTPS 的工作流程&lt;/h2&gt;
&lt;h3 id=&#34;1-客户端发起-https-请求&#34;&gt;1、客户端发起 HTTPS 请求&lt;/h3&gt;
&lt;p&gt;这个没什么好说的，就是用户在浏览器里输入一个 HTTPS 网址，然后连接到 server 的 443 端口。&lt;/p&gt;
&lt;h3 id=&#34;2-服务端的配置&#34;&gt;2、服务端的配置&lt;/h3&gt;
&lt;p&gt;采用 HTTPS 协议的服务器必须要有一套数字证书，可以自己制作，也可以向组织申请，区别就是自己颁发的证书需要客户端验证通过，才可以继续访问，而使用受信任的公司申请的证书则不会弹出提示页面（Let‘s Encrypt 就是个不错的选择，免费的 SSL 证书）。&lt;/p&gt;
&lt;p&gt;这套证书其实就是一对公钥和私钥，如果对公钥和私钥不太理解，可以想象成一把钥匙和一个锁头，只是全世界只有你一个人有这把钥匙，你可以把锁头给别人，别人可以用这个锁把重要的东西锁起来，然后发给你，因为只有你一个人有这把钥匙，所以只有你才能看到被这把锁锁起来的东西。&lt;/p&gt;
&lt;h3 id=&#34;3-传送证书&#34;&gt;3、传送证书&lt;/h3&gt;
&lt;p&gt;这个证书其实就是公钥，只是包含了很多信息，如证书的颁发机构，过期时间等等。&lt;/p&gt;
&lt;h3 id=&#34;4-客户端解析证书&#34;&gt;4、客户端解析证书&lt;/h3&gt;
&lt;p&gt;这部分工作是有客户端的 TLS 来完成的，首先会验证公钥是否有效，比如颁发机构，过期时间等等，如果发现异常，则会弹出一个警告框，提示证书存在问题。&lt;/p&gt;
&lt;p&gt;如果证书没有问题，那么就生成一个随机值，然后用证书对该随机值进行加密，就好像上面说的，把随机值用锁头锁起来，这样除非有钥匙，不然看不到被锁住的内容。&lt;/p&gt;
&lt;h3 id=&#34;5-传送加密信息&#34;&gt;5、传送加密信息&lt;/h3&gt;
&lt;p&gt;这部分传送的是用证书加密后的随机值，目的就是让服务端得到这个随机值，以后客户端和服务端的通信就可以通过这个随机值来进行加密解密了。&lt;/p&gt;
&lt;h3 id=&#34;6-服务段解密信息&#34;&gt;6、服务段解密信息&lt;/h3&gt;
&lt;p&gt;服务端用私钥解密后，得到了客户端传过来的随机值(私钥)，然后把内容通过该值进行对称加密，所谓对称加密就是，将信息和私钥通过某种算法混合在一起，这样除非知道私钥，不然无法获取内容，而正好客户端和服务端都知道这个私钥，所以只要加密算法够彪悍，私钥够复杂，数据就够安全。&lt;/p&gt;
&lt;h3 id=&#34;7-传输加密后的信息&#34;&gt;7、传输加密后的信息&lt;/h3&gt;
&lt;p&gt;这部分信息是服务段用私钥加密后的信息，可以在客户端被还原。&lt;/p&gt;
&lt;h3 id=&#34;8-客户端解密信息&#34;&gt;8、客户端解密信息&lt;/h3&gt;
&lt;p&gt;客户端用之前生成的私钥解密服务段传过来的信息，于是获取了解密后的内容，整个过程第三方即使监听到了数据，也束手无策。&lt;/p&gt;
&lt;h2 id=&#34;ssl-的演化&#34;&gt;SSL 的演化&lt;/h2&gt;
&lt;p&gt;简单说完了 HTTPS 的工作流程。让我们再将注意力放在 SSL 的演化上。&lt;/p&gt;
&lt;p&gt;1994年，Netscape 创建了 SSL 协议的原始规范并逐步发布协议改进版本。1995 年发布 SSL 2.0。1996年，Netscape 和 Paul Kocher 共同设计发布 SSL 3.0 协议，获得互联网广泛认可和支持。因特网工程任务组（IETF）接手负责该协议，并将其重命名为 TLS（传输层安全）协议。&lt;/p&gt;
&lt;p&gt;我们看到，SSL 2.0 规范是在 1995 年左右发布的，而 SSL 3.0 是在 1996 年 11 月发布的。有趣的是，SSL 3.0 是在 RFC 6101 中描述的，该 RFC 于 2011 年 8 月发布。它位于历史类别中，该类别通常是被考虑和被丢弃的文档想法，或者是在决定记录它们时已经具有历史意义的协议（根据 IETF  说明）。在这种情况下，有一个描述 SSL 3.0 的 IETF 文档是很有必要的，因为在其可以被用作规范参考。&lt;/p&gt;
&lt;p&gt;再来看看，SSL 是如何激发 TLS 的发展的。后者在 1996 年 11 月以 draft-ietf-tls-protocol-00 宣告开始。它经历了六个草案版本，并于 1999 年初作为 RFC 2246 - TLS 1.0 正式发布。&lt;/p&gt;
&lt;p&gt;在 1995 和 1999 年间，SSL 和 TLS 协议用于保护互联网上的 HTTP 通信。这作为事实上的标准运行良好。直到 1998 年 1 月，随着 I-D draft-ietf-tls-HTTPs-00 的发布，HTTPS 的正式标准化过程才开始。该工作于 2000 年 5 月以 RFC 2616 - HTTP 上的 TLS 的发布结束。&lt;/p&gt;
&lt;p&gt;TLS 在 2000 到 2007 年间继续发展，标准化为 TLS 1.1 和 1.2。直至七年后，TLS 的下一个版本开始进行，该版本在 2014 年四月被采纳为 draft-ietf-tls-tls13-00 ，并在 28 份草稿后，于 2018 年八月出了完成版本 RFC 8446- TLS 1.3。&lt;/p&gt;
&lt;h1 id=&#34;改进与-http2&#34;&gt;改进与 HTTP2&lt;/h1&gt;
&lt;p&gt;回到 HTTP 本身。在很长一段时间里，HTTP/1.1 已经足够好了（确实是，现在仍应用最为广泛），但是，Web 不断变化的需求使得我们需要一个更好更合适的协议。&lt;/p&gt;
&lt;p&gt;HTTP/1.1 自从 1997 年发布以来，我们已经使用 HTTP/1.x 相当长一段时间了。但随着互联网近十年爆炸式的发展，从当初网页内容以文本为主，到现在以富媒体（如图片、声音、视频）为主，而且对页面内容实时性高要求的应用越来越多（比如聊天、视频直播），所以当时协议规定的某些特性，已经逐渐无法满足现代网络的需求了。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1621149840419.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
如果你有仔细观察，那些最流行的网站首页所需要下载资源的话，会发现一个非常明显的趋势。近年来加载网站首页需要下载的数据量在逐渐增加，并已经超过了 2100K。但在这里我们更关心的是：平均每个页面为了完成显示与渲染所需要下载的资源数也已经超过了 100 个。&lt;/p&gt;
&lt;p&gt;基于此，在 2010 年到 2015 年，谷歌通过实践一个实验性的 SPDY 协议，证明了一个在客户端和服务器端交换数据的另类方式。其收集了浏览器和服务器端的开发者的焦点问题，明确了响应数量的增加和解决复杂的数据传输。在启动 SPDY 这个项目时预设的目标是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;页面加载时间 （PLT） 减少 50%。&lt;/li&gt;
&lt;li&gt;无需网站作者修改任何内容。&lt;/li&gt;
&lt;li&gt;将部署复杂性降至最低，无需变更网络基础设施。&lt;/li&gt;
&lt;li&gt;与开源社区合作开发这个新协议。&lt;/li&gt;
&lt;li&gt;收集真实性能数据，验证这个实验性协议是否有效。为了达到降低目标，减少页面加载时间的目标，SPDY 引入了一个新的二进制分帧数据层，以实现多向请求和响应、优先次序、最小化及消除不必要的网络延迟，目的是更有效地利用底层 TCP 连接。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;HTTP/1.1 有两个主要的缺点：安全不足和性能不高，由于背负着 HTTP/1.x 庞大的历史包袱，所以协议的修改，兼容性是首要考虑的目标，否则就会破坏互联网上无数现有的资产。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1621149904461.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
而如上图所示，SPDY 位于 HTTP 之下，TCP 和 SSL 之上，这样可以轻松兼容老版本的 HTTP 协议同时可以使用已有的 SSL 功能。&lt;/p&gt;
&lt;p&gt;SPDY 协议在 Chrome 浏览器上证明可行以后，就被当作 HTTP/2 的基础，主要特性都在 HTTP/2 之中得到继承。&lt;/p&gt;
&lt;p&gt;于是时间来到 2015 年，HTTP/2.0 问世。&lt;/p&gt;
&lt;p&gt;HTTP/2 相比 HTTP/1.1 的修改并不会破坏现有程序的工作，但是新的程序可以借由新特性得到更好的速度。&lt;/p&gt;
&lt;p&gt;HTTP/2 保留了 HTTP/1.1 的大部分语义，例如请求方法、状态码、乃至 URI 和绝大多数 HTTP 头部字段一致。而 HTTP/2 采用了新的方法来编码、传输客户端和服务器间的数据。&lt;/p&gt;
&lt;p&gt;来看看 HTTP/2 的具体特点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;二进制分帧层：在应用层与传输层之间增加一个二进制分帧层，以此达到在不改动 HTTP 的语义，HTTP 方法、状态码、URI 及首部字段的情况下，突破 HTTP/1.1 的性能限制，改进传输性能，实现低延迟和高吞吐量。在二进制分帧层上，HTTP/2.0 会将所有传输的信息分割为更小的消息和帧，并对它们采用二进制格式的编码，其中 HTTP1.x 的首部信息会被封装到 Headers 帧，而我们的 request body 则封装到 Data 帧里面。&lt;/li&gt;
&lt;li&gt;多路复用：对于 HTTP/1.x，即使开启了长连接，请求的发送也是串行发送的，在带宽足够的情况下，对带宽的利用率不够，HTTP/2.0 采用了多路复用的方式，可以并行发送多个请求，提高对带宽的利用率。&lt;/li&gt;
&lt;li&gt;数据流优先级：由于请求可以并发发送了，那么如果出现了浏览器在等待关键的 CSS 或者 JS 文件完成对页面的渲染时，服务器却在专注的发送图片资源的情况怎么办呢？HTTP/2.0 对数据流可以设置优先值，这个优先值决定了客户端和服务端处理不同的流采用不同的优先级策略。&lt;/li&gt;
&lt;li&gt;服务端推送：在 HTTP/2.0 中，服务器可以向客户发送请求之外的内容，比如正在请求一个页面时，服务器会把页面相关的 logo，CSS 等文件直接推送到客户端，而不会等到请求来的时候再发送，因为服务器认为客户端会用到这些东西。这相当于在一个 HTML 文档内集合了所有的资源。&lt;/li&gt;
&lt;li&gt;头部压缩：使用首部表来跟踪和存储之前发送的键值对，对于相同的内容，不会再每次请求和响应时发送。&lt;/li&gt;
&lt;li&gt;HTTP/2.0 支持明文 HTTP 传输，而 SPDY 强制使用 HTTPS。&lt;/li&gt;
&lt;li&gt;HTTP/2.0 消息头的压缩算法采用 HPACK，而非 SPDY 采用的 DEFLATE。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;quic-和-http3&#34;&gt;QUIC 和 HTTP3&lt;/h1&gt;
&lt;p&gt;虽然 HTTP/2 提高了网页的性能，但是并不代表它已经是完美的了，HTTP/3 就是为了解决 HTTP/2 所存在的一些问题而被推出来的。随着时间的演进，越来越多的流量都往手机端移动，手机的网络环境会遇到的问题像是封包丢失机率较高、较长的 Round Trip Time (RTT)和连接迁移等问题，都让主要是为了有线网路设计的HTTP/TCP协议遇到贫颈。&lt;/p&gt;
&lt;p&gt;我们可以看两个典型的问题。&lt;/p&gt;
&lt;p&gt;第一握手带来的消耗。HTTP/2 使用 TCP 协议来传输的，而如果使用 HTTPS 的话，还需要使用 TLS 协议进行安全传输，而使用 TLS 也需要一个握手过程，这样就需要有两个握手延迟过程：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在建立 TCP 连接的时候，需要和服务器进行三次握手来确认连接成功，也就是说需要在消耗完 1.5 个 RTT 之后才能进行数据传输。&lt;/li&gt;
&lt;li&gt;进行 TLS 连接，TLS 有两个版本——TLS 1.2 和 TLS 1.3，每个版本建立连接所花的时间不同，大致是需要1~2个 RTT。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;总之，在传输数据之前，我们需要花掉 3～4 个 RTT。&lt;/p&gt;
&lt;p&gt;第二，TCP 的队头阻塞并没有得到彻底解决。我们知道，为了实现多路复用，在 HTTP/2 中多个请求是跑在一个 TCP 管道中的。但当出现了丢包时，HTTP/2 的表现反倒不如 HTTP/1.X 了。因为 TCP 为了保证可靠传输，有个特别的丢包重传机制，丢失的包必须要等待重新传输确认，HTTP/2 出现丢包时，整个 TCP 都要开始等待重传，那么就会阻塞该 TCP 连接中的所有请求。而对于 HTTP/1.1 来说，可以开启多个 TCP 连接，出现这种情况反到只会影响其中一个连接，剩余的 TCP 连接还可以正常传输数据。&lt;/p&gt;
&lt;p&gt;至此，我们很容易就会想到，为什么不直接去修改 TCP 协议？其实这已经是一件不可能完成的任务了。因为 TCP 存在的时间实在太长，已经充斥在各种设备中，并且这个协议是由操作系统实现的，更新起来非常麻烦，不具备显示操作性。&lt;/p&gt;
&lt;p&gt;HTTP/3 乘着 QUIC 来了。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1621150022490.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
HTTP3 是基于 QUIC 的协议，如上图。先说 QUIC，QUIC 协议是 Google 提出的一套开源协议，它基于 UDP 来实现，直接竞争对手是 TCP 协议。QUIC 协议的性能非常好，甚至在某些场景下可以实现 0-RTT 的加密通信。&lt;/p&gt;
&lt;p&gt;在 Google 关于 QUIC &lt;a href=&#34;https://docs.google.com/document/d/1gY9-YNDNAB1eip-RTPbqphgySwSNSDHLq9D5Bty4FSU/edit&#34;&gt;https://docs.google.com/document/d/1gY9-YNDNAB1eip-RTPbqphgySwSNSDHLq9D5Bty4FSU/edit&lt;/a&gt; 的文件中提到，与 HTTP/2 相比，QUIC 主要具有下列优势：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Reduce connection establishment latency （减少连接建立时间）&lt;/li&gt;
&lt;li&gt;Improved congestion control （改进拥塞控制）&lt;/li&gt;
&lt;li&gt;Multiplexing without head-of-line blocking （没有队头阻塞的多路复用）&lt;/li&gt;
&lt;li&gt;Forward error correction （修复之前的错误）&lt;/li&gt;
&lt;li&gt;Connection migration（支持网络迁移）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;多路复用避免队头阻塞&#34;&gt;多路复用，避免队头阻塞&lt;/h2&gt;
&lt;p&gt;这句话说起来很容易，但理解起来并不那么显然，要想理解 QUIC 协议到底做了什么以及这么做的必要性，我想还是从最基础的 HTTP/1.0 聊起比较合适。&lt;/p&gt;
&lt;h3 id=&#34;pipiline&#34;&gt;Pipiline&lt;/h3&gt;
&lt;p&gt;根据谷歌的调查， 现在请求一个网页，平均涉及到 80 个资源，30 多个域名。考虑最原始的情况，每请求一个资源都需要建立一次 TCP 请求，显然不可接受。HTTP 协议规定了一个字段 Connection，不过默认的值是 close，也就是不开启。&lt;/p&gt;
&lt;p&gt;早在 1999 年提出的 HTTP 1.1协议 中就把 Connection 的默认值改成了Keep-Alive，这样同一个域名下的多个 HTTP 请求就可以复用同一个 TCP 连接。这种做法被称为 HTTP Pipeline，优点是显著的减少了建立连接的次数，也就是大幅度减少了 RTT。&lt;/p&gt;
&lt;p&gt;以上面的数据为例，如果 80 个资源都要走一次 HTTP 1.0，那么需要建立 80 个 TCP 连接，握手 80 次，也就是 80 个 RTT。如果采用了 HTTP 1.1 的 Pipeline，只需要建立 30 个 TCP 连接，也就是 30 个 RTT，提高了 62.5% 的效率。&lt;/p&gt;
&lt;p&gt;Pipeline 解决了 TCP 连接浪费的问题，但它自己还存在一些不足之处，也就是所有管道模型都难以避免的队头阻塞问题。&lt;/p&gt;
&lt;h3 id=&#34;队头阻塞&#34;&gt;队头阻塞&lt;/h3&gt;
&lt;p&gt;我们再举个简单而且直观的例子，假设加载一个 HTML 一共要请求 10 个资源，那么请求的总时间是每一个资源请求时间的总和。最直观的体验就是，网速越快请求时间越短。然而如果某一个资源的请求被阻塞了（比如 SQL 语句执行非常慢）。但对于客户端来说所有后续的请求都会因此而被阻塞。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1621150146278.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
队头阻塞（Head of line blocking，下文简称 HOC）说的是当有多个串行请求执行时，如果第一个请求不执行完，后续的请求也无法执行。比如上图中，如果第四个资源的传输花了很久，后面的资源都得等着，平白浪费了很多时间，带宽资源没有得到充分利用。&lt;/p&gt;
&lt;p&gt;因此，HTTP 协议允许客户端发起多个并行请求，比如在笔者的机器上最多支持六个并发请求。并发请求主要是用于解决 HOC 问题，当有三个并发请求时，情况会变成这样：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1621150164326.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
可见虽然第四个资源的请求被阻塞了，但是其他的资源请求并不一定会被阻塞，这样总的来说网络的平均利用率得到了提升。&lt;/p&gt;
&lt;p&gt;支持并发请求是解决 HOC 问题的一种方案，这句话没有错。但是我们要理解到：“并发请求并非是直接解决了 HOC 的问题，而是尽可能减少 HOC 造成的影响“，以上图为例，HOC 的问题依然存在，只是不会太浪费带宽而已。&lt;/p&gt;
&lt;p&gt;有读者可能会好奇，为什么不多搞几个并发的 HTTP 请求呢？刚刚说过笔者的电脑最多支持 6 个并发请求，谷歌曾经做过实验，把 6 改成 10，然后尝试访问了三千多个网页，发现平均访问时间竟然还增加了 5% 左右。这是因为一次请求涉及的域名有限，再多的并发 HTTP 请求并不能显著提高带宽利用率，反而会消耗性能。&lt;/p&gt;
&lt;h3 id=&#34;spdy-的做法&#34;&gt;SPDY 的做法&lt;/h3&gt;
&lt;p&gt;有没有办法解决队头阻塞呢？&lt;/p&gt;
&lt;p&gt;答案是肯定的。SPDY 协议的做法很值得借鉴，它采用了多路复用（Multiplexing）技术，允许多个 HTTP 请求共享同一个 TCP 连接。我们假设每个资源被分为多个包传递，在 HTTP 1.1 中只有前面一个资源的所有数据包传输完毕后，后面资源的包才能开始传递（HOC 问题），而 SPDY 并不这么要求，大家可以一起传输。&lt;/p&gt;
&lt;p&gt;这么做的代价是数据会略微有一些冗余，每一个资源的数据包都要带上标记，用来指明自己属于哪个资源，这样客户端最后才能把他们正确的拼接起来。不同的标记可以理解为图中不同的颜色，每一个小方格可以理解为资源的某一个包。&lt;/p&gt;
&lt;h3 id=&#34;tcp-窗口&#34;&gt;TCP 窗口&lt;/h3&gt;
&lt;p&gt;是不是觉得 SPDY 的多路复用已经够厉害了，解决了队头阻塞问题？很遗憾的是，并没有，而且我可以很肯定的说，只要你还在用 TCP 链接，HOC 就是逃不掉的噩梦，不信我们来看看 TCP 的实现细节。&lt;/p&gt;
&lt;p&gt;我们知道 TCP 协议会保证数据的可达性，如果发生了丢包或者错包，数据就会被重传。于是问题来了，如果一个包丢了，那么后面的包就得停下来等这个包重新传输，也就是发生了队头阻塞。当然 TCP 协议的设计者们也不傻，他们发明了滑动窗口的概念：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1621150247344.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
这样的好处是在第一个数据包（1-1000） 发出后，不必等到 ACK 返回就可以立刻发送第二个数据包。可以看出图中的 TCP 窗口大小是 4，所以第四个包发送后就会开始等待，直到第一个包的 ACK 返回。这样窗口可以向后滑动一位，第五个包被发送。&lt;/p&gt;
&lt;p&gt;如果第一、二、三个的包都丢失了也没有关系，当发送方收到第四个包时，它可以确信一定是前三个 ACK 丢了而不是数据包丢了，否则不会收到 4001 的 ACK，所以发送方可以大胆的把窗口向后滑动四位。&lt;/p&gt;
&lt;p&gt;滑动窗口的概念大幅度提高了 TCP 传输数据时抗干扰的能力，一般丢失一两个 ACK 根本没关系。但如果是发送的包丢失，或者出错，窗口就无法向前滑动，出现了队头阻塞的现象。&lt;/p&gt;
&lt;h2 id=&#34;quic-是如何做的&#34;&gt;QUIC 是如何做的&lt;/h2&gt;
&lt;p&gt;所以说 HOC 不仅仅在 HTTP 层存在，在 TCP 层也存在，这也正是 QUIC 协议要解决的问题。回顾 SPDY 是如何解决 HOC 的，没错，多路复用（Multiplex）。QUIC 协议也采用了多路复用技术。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1621150282852.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
UIC 协议基于 UDP 实现，我们知道 UDP 协议只负责发送数据，并不保证数据可达性。这一方面为 QUIC 的多路复用提供了基础，另一方面也要求 QUIC 协议自己保证数据可达性。&lt;/p&gt;
&lt;p&gt;SPDY 为各个数据包做好标记，指明他们属于哪个 HTTP 请求，至于这些包能不能到达客户端，SPDY 并不关心，因为数据可达性由 TCP 协议保证。既然客户端一定能收到包，那就只要排序、拼接就行了。QUIC 协议采用了多路复用的思想，但同时还得自己保证数据的可达性。&lt;/p&gt;
&lt;p&gt;TCP 协议的丢包重传并不是一个好想法，因为一旦有了前后顺序，队头阻塞问题将不可避免。而无序的数据发送给接受者以后，如何保证不丢包，不错包呢？这看起来是个不可能完成的任务，不过如果把要求降低成：最多丢一个包，或者错一个包。事情就简单多了，操作系统中有一种存储方式叫 RAID 5，采用的是异或运算加上数据冗余的方式来保证前向纠错（FEC: Forward Error Correcting）。QUIC 协议也是采用这样的思想，这里不再赘述。&lt;/p&gt;
&lt;p&gt;利用冗余数据的思想，QUIC 协议基本上避免了重发数据的情况。当然 QUIC 协议还是支持重传的，比如某些非常重要的数据或者丢失两个包的情况。&lt;/p&gt;
&lt;h3 id=&#34;少-rtt请求更快速&#34;&gt;少 RTT，请求更快速&lt;/h3&gt;
&lt;p&gt;前面说到，一次 HTTPS 请求，它的基本流程是三次 TCP 握手外加四次 SSL/TLS 握手。也就是需要三个 RTT。但是 QUIC 在某些场景下，甚至能够做到 0RTT。&lt;/p&gt;
&lt;p&gt;首先介绍下什么是 0RTT。所谓的 0RTT 就是通信双方发起通信连接时，第一个数据包便可以携带有效的业务数据。而我们知道，这个使用传统的TCP是完全不可能的，除非你使能了 TCP 快速打开特性，而这个很难，因为几乎没人愿意为了这个收益去对操作系统的网络协议栈大动手脚。未使能 TCP 快速打开特性的TCP传输第一笔数据前，至少要等1个RTT。&lt;/p&gt;
&lt;p&gt;我们这里再说说 HTTP2。对于 HTTP2 来说，本来需要一个额外的 RTT 来进行协商，判断客户端与服务器是不是都支持 HTTP2，不过好在它可以和 SSL 握手的请求合并。这也导致了一个现象，就是大多数主流浏览器仅支持 HTTPS2 而不单独支持 HTTP2。因为 HTTP2 需要一个额外的 RTT，HTTPS2 需要两个额外的 RTT，仅仅是增加一个 RTT 就能获得数据安全性，还是很划算的。&lt;/p&gt;
&lt;h3 id=&#34;tcp-快速打开&#34;&gt;TCP 快速打开&lt;/h3&gt;
&lt;p&gt;何谓 TCP 快速打开，即客户端可以在发送第一个 SYN 握手包时携带数据，但是 TCP 协议的实现者不允许将把这个数据包上传给应用层。这主要是为了防止 TCP 泛洪攻击 [。&lt;/p&gt;
&lt;p&gt;因为如果 SYN 握手的包能被传输到应用层，那么现有的防护措施都无法防御泛洪攻击，而且服务端也会因为这些攻击而耗尽内存和 CPU。&lt;/p&gt;
&lt;p&gt;当然 TCP 快速打开并不是完全不可行的。人们设计了 TFO (TCP Fast Open)，这是对 TCP 的拓展，不仅可以在发送 SYN 时携带数据，还可以保证安全性。&lt;/p&gt;
&lt;p&gt;TFO 设计了一个 Cookie，它在第一次握手时由 server 生成，Cookie 主要是用来标识客户端的身份，以及保存上次会话的配置信息。因此在后续重新建立 TCP 连接时，客户端会携带 SYN + Cookie + 请求数据，然后不等 ACK 返回就直接开始发送数据。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1621150338682.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
服务端收到 SYN 后会验证 Cookie 是否有效，如果无效则会退回到三次握手的步骤，如下图所示：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1621150351416.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
同时，为了安全起见，服务端为每个端口记录了一个值 PendingFastOpenRequests，用来表示有多少请求利用了 TFO，如果超过预设上限就不再接受。&lt;/p&gt;
&lt;p&gt;关于 TFO 的优化，可以总结出三点内容:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;TFO 设计的 Cookie 思想和 SSL 恢复握手时的 Session Ticket 很像，都是由服务端生成一段 Cookie 交给客户端保存，从而避免后续的握手，有利于快速恢复。&lt;/li&gt;
&lt;li&gt;第一次请求绝对不会触发 TFO，因为服务器会在接收到 SYN 请求后把 Cookie 和 ACK 一起返回。后续客户端如果要重新连接，才有可能使用这个 Cookie 进行 TFO.&lt;/li&gt;
&lt;li&gt;TFO 并不考虑在 TCP 层过滤重复请求，以前也有类似的提案想要做过滤，但因为无法保证安全性而被拒绝。所以 TFO 仅仅是避免了泛洪攻击（类似于 backlog），但客户端接收到的，和 SYN 包一起发来的数据，依然有可能重复。不过也只有可能是 SYN 数据重复，所以 TFO 并不处理这种情况，要求服务端程序自行解决。这也就是说，不仅仅要操作系统的支持，更要求应用程序（比如 MySQL）也支持 TFO。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;TFO 使得 TCP 协议有可能变成 0-RTT，核心思想和 Session Ticket 的概念类似: 将当前会话的上下文缓存在客户端。如果以后需要恢复对话，只需要将缓存发给服务器校验，而不必花费一个 RTT 去等待。&lt;/p&gt;
&lt;p&gt;结合 TFO 和 Session Ticket 技术，一个本来需要花费 3 个 RTT 才能完成的请求可以被优化到一个 RTT。如果使用 QUIC 协议，我们甚至可以更进一步，将 Session Ticket 也放到 TFO 中一起发送，这样就实现了 0-RTT 的对话恢复。&lt;/p&gt;
&lt;h2 id=&#34;quic-是怎么做的&#34;&gt;QUIC 是怎么做的&lt;/h2&gt;
&lt;p&gt;让我们看看 QUIC 是怎么做的。&lt;/p&gt;
&lt;p&gt;首先声明一点，如果一对使用 QUIC 进行加密通信的双方此前从来没有通信过，那么 0-RTT 是不可能的，即便是 QUIC 也是不可能的。&lt;/p&gt;
&lt;p&gt;QUIC 握手的过程需要一次数据交互，0-RTT 时延即可完成握手过程中的密钥协商，比 TLS 相比效率提高了 5 倍，且具有更高的安全性。在握手过程中使用 Diffie-Hellman 算法协商初始密钥，初始密钥依赖于服务器存储的一组配置参数，该参数会周期性的更新。初始密钥协商成功后，服务器会提供一个临时随机数，双方根据这个数再生成会话密钥。&lt;/p&gt;
&lt;p&gt;具体握手过程如下：&lt;/p&gt;
&lt;p&gt;(1) 客户端判断本地是否已有服务器的全部配置参数，如果有则直接跳转到(5)，否则继续&lt;/p&gt;
&lt;p&gt;(2) 客户端向服务器发送 inchoate client hello(CHLO) 消息，请求服务器传输配置参数&lt;/p&gt;
&lt;p&gt;(3) 服务器收到 CHLO，回复 rejection(REJ) 消息，其中包含服务器的部分配置参数&lt;/p&gt;
&lt;p&gt;(4) 客户端收到 REJ，提取并存储服务器配置参数，跳回到(1)&lt;/p&gt;
&lt;p&gt;(5) 客户端向服务器发送 full client hello 消息，开始正式握手，消息中包括客户端选择的公开数。此时客户端根据获取的服务器配置参数和自己选择的公开数，可以计算出初始密钥。&lt;/p&gt;
&lt;p&gt;(6) 服务器收到 full client hello，如果不同意连接就回复 REJ，同(3)；如果同意连接，根据客户端的公开数计算出初始密钥，回复 server hello(SHLO)消息，SHLO 用初始密钥加密，并且其中包含服务器选择的一个临时公开数。&lt;/p&gt;
&lt;p&gt;(7) 客户端收到服务器的回复，如果是 REJ 则情况同(4)；如果是 SHLO，则尝试用初始密钥解密，提取出临时公开数&lt;/p&gt;
&lt;p&gt;(8) 客户端和服务器根据临时公开数和初始密钥，各自基于 SHA-256 算法推导出会话密钥&lt;/p&gt;
&lt;p&gt;(9) 双方更换为使用会话密钥通信，初始密钥此时已无用，QUIC 握手过程完毕。之后会话密钥更新的流程与以上过程类似，只是数据包中的某些字段略有不同。&lt;/p&gt;
&lt;h1 id=&#34;写在最后&#34;&gt;写在最后&lt;/h1&gt;
&lt;p&gt;想起有一个名言：计算机领域没有什么问题是加一层解决不了的，如果有，就再加一层。网络模型本来就是层层累加，到了 Web 得以快速生动的展现给人们以丰富的内容。从 HTTP 的演变过程中，我们可以看到中间又累加了若干层。不知道以后，又会是怎么样呢？&lt;/p&gt;
&lt;p&gt;大家会发现，笔者在文中不止一次提到了演变这个词。是的，这是来自达尔文进化论中的理论。在笔者看来，“物竞天择，适者生存”的演变理论和计算机领域的技术变化是很类似的，只不过在这里，不是天择，而是人择。由市场，由用户来选择。不知道接下来，作为选择者的我们，又将怎样主导技术的走向？&lt;/p&gt;
">当我谈 HTTP 时，我谈些什么?</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/G2KB6-qOq/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;本文转自:&lt;a href=&#34;https://www.upyun.com/tech/article/577/HTTP%2F3%20%E6%9D%A5%E4%BA%86%EF%BC%8C%E4%BD%A0%E4%BA%86%E8%A7%A3%E5%AE%83%E4%B9%88%EF%BC%9F.html&#34;&gt;https://www.upyun.com/tech/article/577/HTTP%2F3 来了，你了解它么？.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;作为我们网上冲浪最为常见，也经常被人忽视的 HTTP 已经更新换代到了 HTTP/3。本文简单明了的带你认识 HTTP/3 的作用。&lt;/p&gt;
&lt;h1 id=&#34;http3-是什么&#34;&gt;HTTP/3 是什么？&lt;/h1&gt;
&lt;p&gt;要深入了解 HTTP/3，那首先要知道什么是 HTTP/3。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1621086450147.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
如上图所示，HTTP/3 是基于 QUIC 的协议。而 QUIC 协议是 Google 提出的一套开源协议，它基于 UDP 来实现，直接竞争对手是 TCP 协议。&lt;/p&gt;
&lt;p&gt;另外，要聊 HTTP/3，HTTP 的发展历程是怎么也绕不过去的，而且可以讲很久。&lt;/p&gt;
&lt;h1 id=&#34;http3-的优点及不足&#34;&gt;HTTP/3 的优点及不足&lt;/h1&gt;
&lt;p&gt;今天我们在这里简单说一下 HTTP/3 相比较 HTTP/2 进步的那些点。&lt;/p&gt;
&lt;p&gt;回归正题，相比 HTTP/2 而言 HTTP/3 有以下几点提升：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;HTTP/3 使用 stream 进一步扩展了 HTTP/2 的多路复用。在 HTTP/3 模式下，一般传输多少个文件就会产生对应数量的 stream。当这些文件中的其中一个发生丢包时，你只需要重传丢包文件的对应 stream 即可。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTP/3 不再是基于 TCP 建立的，而是通过 UDP 建立，在用户空间保证传输的可靠性，相比 TCP，UDP 之上的 QUIC 协议提高了连接建立的速度，降低了延迟。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;通过引入 Connection ID，使得 HTTP/3 支持连接迁移以及 NAT 的重绑定。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTP/3 含有一个包括验证、加密、数据及负载的 built-in 的 TLS 安全机制。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;拥塞控制。TCP 是在内核区实现的，而 HTTP/3 将拥塞控制移出了内核，通过用户空间来实现。这样做的好处就是不再需要等待内核更新可以实现很方便的进行快速迭代。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;头部压缩。HTTP/2 使用的 HPACK，HTTP/3 更换成了兼容 HPACK 的 QPACK 压缩方案。QPACK 优化了对乱序发送的支持，也优化了压缩率。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;没有哪项技术是完美无缺的，更不用说是还在发展中的 HTTP/3 了。&lt;/p&gt;
&lt;p&gt;HTTP/3 建立传输用的是 UDP 协议，而在 HTTP/3 出现前 UDP 的通常出现地点是类似《计算机网络》这样的书面理论，即便是实际应用也大多和网络攻击一起出现，这就导致 UDP 的名声不太好。名声差了自然在硬件上的支持也捉襟见肘，大部分互联网服务也就理所当然的对 UDP 的访问进行限制。&lt;/p&gt;
&lt;h1 id=&#34;准备好迎接-http3-了吗&#34;&gt;准备好迎接 HTTP/3 了吗？&lt;/h1&gt;
&lt;p&gt;但是毫无疑问的，HTTP/3 是目前最前沿的互联网标准，它的缺点可以通过不断的改进来完善。相比与 HTTP/3 本身的缺陷问题，作为一项新技术最致命的问题是能否获得足够多的有效支持，从而进行大范围推广。&lt;/p&gt;
&lt;p&gt;那么当前的环境已经有迎接 HTTP/3 的能力了么？&lt;/p&gt;
&lt;p&gt;HTTP/3 作为互联网的标准革新之一，在支持方面无非两点，一个是服务端，一个是客户端。&lt;/p&gt;
&lt;p&gt;先来看一下客户端，大家所熟悉的浏览器 Chrome 以及常用 Curl 命令行工具都已经支持 HTTP/3 特性。在 Chrome 的开发者工具一栏里你可以看到一项显示为“HTTP/2+quic/99”，这就是 Chrome 已经支持 HTTP/3 的证据。毕竟 HTTP/3 的组成离不开 QUIC 协议。&lt;/p&gt;
&lt;p&gt;而在 Curl 命令行工具(&lt;a href=&#34;https://github.com/curl/curl&#34;&gt;https://github.com/curl/curl&lt;/a&gt;) 的最新版本， 你只需在常规的命令末尾添加“--HTTP/3”即可使用 HTTP/3，如果目标服务器支持，它会自然的返回“HTTP/3 200”。&lt;/p&gt;
&lt;p&gt;确认了客户端的支持，我们接下来看一下服务端。&lt;/p&gt;
&lt;p&gt;自 2013 年 QUIC 被正式公开以来，到 2020 年已经发展了差不多7年，目前网上已经有了不少热门开源的项目，除去带头大哥 Google 在完成了对自身搜索引擎的支持，还同时拉上了 Gmail 、YouTube 等站点。但对于国内的绝大部分站点来说，HTTP/3 之路，似乎还停留在东土大唐，即使 Nginx 已经公开声明：“我们已经支持 QUIC 协议“。&lt;/p&gt;
&lt;p&gt;我们可以看到，虽然目前环境还没有全面迭代到 HTTP/3 ，但是 HTTP/3 的发展是不可阻拦的。&lt;/p&gt;
">HTTP/3 来了，你了解它么？</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/EbWtYgMvU/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;本文转自:&lt;a href=&#34;https://zhuanlan.zhihu.com/p/64467370&#34;&gt;https://zhuanlan.zhihu.com/p/64467370&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;中国大陆目前国际网络的建设状况&#34;&gt;中国大陆目前国际网络的建设状况&lt;/h1&gt;
&lt;p&gt;根据新华网&lt;a href=&#34;http://www.xinhuanet.com/info/2019-04/03/c_137945444.htm&#34;&gt;最新的报道&lt;/a&gt;指出，截至 2019 年 4 月，全国三大运营商——电信、联通、移动保有宽带用户数如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;中国电信：1.46 亿户；&lt;br&gt;
中国联通：0.8088 亿户&lt;br&gt;
中国移动：1.57 亿户。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;根据公布在 中华人民共和国国家互联网信息办公室&amp;amp;中共中央网络安全和信息化委员会办公室 页面的，由 中国互联网络信息中心 于 2019 年 2 月公布的&lt;a href=&#34;http://www.cac.gov.cn/2019-02/28/c_1124175677.htm&#34;&gt;“第43次《中国互联网络发展状况统计报告》”&lt;/a&gt;指出，国内主要骨干网络国际出口带宽共有 8,946,570 Mbps，国内主流三大运营商所拥有的国际出口带宽数据如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;中国电信：4,537,680 Mbps；&lt;br&gt;
中国联通：2,234,738 Mbps；&lt;br&gt;
中国移动：1,997,000 Mbps；&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;由此可得，各家出口带宽的总量比较如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;中国电信 ＞ 中国联通 ＞ 中国移动&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;结合上述宽带用户数，可得各家人均用户出口带宽量比较如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;中国联通 ＞ 中国电信 ＞ 中国移动&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;国际出口带宽量的增长，与海缆建设周期息息相关：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620810934625.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
根据中国信息通信研究院公布的中国国际光缆互联互通白皮书指出：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;2009-2012 年,数据中心成为驱动国际海底光缆建设的最大驱动力，国际海底光缆又迎了一个建设小高潮。目前，全球海缆建设正在进入第三次建设高潮，全球 40%的海缆是 2000 年之前建设的，已经逐步进入了海缆使用生命 周期的尾期，未来几年，数据中心互联及互联网带宽需求将持续增长， 全球海缆将进入一个新旧更替的时期，形成海缆布局的时间窗口， 2016 年跨太平洋、跨大西洋、亚欧间海缆系统已经开始升级换代。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;2013 年国际出口带宽的猛增，和云计算的普及息息相关。&lt;/p&gt;
&lt;p&gt;另外，随着老旧的中美光缆（CUCN）于 2016 年底退役，目前中美之间的连接，主要由太平洋直达高速光缆（TPE）和正在建设的新跨太平洋国际海底光缆（NCP）承载，NCP 建成后，将极大缓解中美之间网络拥堵的状况。&lt;/p&gt;
&lt;p&gt;“人均”问题不解决，晚高峰拥堵的状况是注定无解的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;与未来国际流量发展预期和世界主要国家相对，中国的国际海缆发展仍显不足,美国的海缆数量是中国的 8 倍，人均带宽是中国近 20 倍；日本的海缆数量是中国 2 倍多，人均带宽是中国近 10 倍；英国海缆数量是中国的 5 倍多，人均带宽是中国 72 倍；新加坡海缆数量是中国 2 倍多，人均带宽是中国 262 倍。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;前途是光明的，道路是曲折的，海缆建设是一个投资大的、长期的、系统化的、复杂的工程，既然正在规划中的海缆，并不能直接享受到，所以我们就只能就目前的情况，做一个分析。&lt;/p&gt;
&lt;h1 id=&#34;目前国内三大主流运营商的国际出口路由现状&#34;&gt;目前国内三大主流运营商的国际出口路由现状&lt;/h1&gt;
&lt;p&gt;看过上述分析的同学应该晓得了，如果有经常访问外网的需求，使用中国联通的固网是最明智的选择，那么，这三大运营商的国际出口路由具体是什么情况呢？我们来逐一分析。&lt;/p&gt;
&lt;h2 id=&#34;1-中国电信&#34;&gt;1. 中国电信&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814000707.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;中国电信目前拥有两条线路，一条是 163 骨干网（ChinaNet），另一条就是 CN2 网络；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;相对 CN2 而言，有的人又习惯称 163 骨干网为 CN1，163 网是中国电信建设的最早的一个网络，它为超过 1 亿的中国电信用户承载包括连往境外的，普通质量的互联网业务。身为电信用户，如果在晚上连接境外网络总是感觉卡顿，丢包高，99.99%的原因都是因为走的这张网，大家一起挤，线路就 boom 了；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CN2，即“ChinaNet Next Carrying Network（ChinaNet 的下一代承载网络）”，在 2005 年投入使用，最初架设的目标，是提供一个拓扑合理，架构先进，建设科学，用于满足未来 10-20 年替代 163 网成为未来新骨干网的网络（这个 flag 还未实现），CN2 网络能够同时承载语音、数据、视频、全球互联等业务，尤其是全球互联方面，相对于 163 网而言，CN2 网络的低丢包、低延时、轻负载，让众多用户趋之若鹜；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;据统计，在中国电信的总网络连接中，163 网络承担了 85% 的网络流量，其余的 15% 流量，由 CN2 网络承担；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;除了上篇文章我们提到的，外网走专线的中国电信政企网，中国电信还针对普通宽带用户，推出过氮气瓶，或称为“电信精品网”的服务，但不知道何种原因（疑似超售），这种服务现在不提供了。简单来讲，就是不管境外网络节点是普通线路，还是专门推出的CN2 网络优化版（仅针对中国大陆的通信），让在境内用户访问境外网络时，统一直接并入到 CN2 网络；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;回国或出国，必定经过北京/上海/广州；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;进出口路由路径，分为三个品级：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;163 网（CN1）；&lt;/li&gt;
&lt;li&gt;CN2 GT（Global Transfer 又称半程 CN2 ）；&lt;/li&gt;
&lt;li&gt;CN2 GIA（Global Internet Access 又称纯 CN2/全程 CN2）；&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;网络路由路径遵守固定路径/边界网关协议（BGP）；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在高峰期会有策略性丢包减少对骨干网的负载；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;虽然出口宽带总量最大，且人均出口带宽排行第二，但电信 163 网连接国际网络，会在高峰时段，在路由出海前的最后一跳，根据优先级，策略性地人为丢包，以减轻对主网的负担(QOS)，这让普通电信用户糟糕的外网访问质量雪上加霜；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;中国电信的服务主旨：用户能用钱解决的问题，都不是问题，剩余的问题，统统都是因为“钱没给够”而导致的问题。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;中国电信 163 网络 AS4134 路由拓扑图，图示来源：&lt;a href=&#34;https://bgp.he.net/AS4134&#34;&gt;https://bgp.he.net/AS4134&lt;/a&gt;&lt;br&gt;
IPv4:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620811329916.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
IPv6:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620811358657.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
说明：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;中国电信的 163 网络，一般会经过市级 → 省级 → 国际出口 → 境外接入点 AS（自治路由协议） 号为 4134 的路由节点，这些路由节点的 IP 地址开头一律是 “202.97.&lt;em&gt;.&lt;/em&gt;”，全程不会经过 CN2 网络节点；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;163 网络国内之间互相访问基本上不存在性能瓶颈，只有在国际出口才会发生拥堵；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;仅统计国际网络的访问质量，163 网络全天的丢包率在 5% ~ 10%左右，如果在夜晚间高峰期（UTC+8 18:00 至 23:00 时），丢包率可达到 15% 以上；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;会经过更多的路由数量；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;163 网(民用电信宽带都属于这种)，是全中国用户数量最大，访问国际网络体验最差的线路，国外网站用浏览器打开需要转圈等上个十来分钟，PC、PS、Xbox 连接外服下载极慢(十几 kb / 秒)，玩游戏卡顿(丢包)等现象屡见不鲜；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;除了例如自“云上贵州”落地中国后，iOS / Mac 用户连接 app store、iCloud 速度迟缓的情况大有改观这样的案例，所有 163 网用户在访问没有在中国大陆境内(不包含港澳台)布设本地服务器或 CDN 加速服务的境外网站或网络服务，被迫忍受极其缓慢的速度等现象，在未来 10 - 20 年之内无法缓解；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;某国家级别大型网关，利用机器学习和人工干预等手段，会实时对境内和境外通信的互联网流量，做深度包检测、数据请求头分析、带高危协议特征流量的干扰和阻断等工作，从而保障中华人民共和国互联网通信的安全，代价是损耗一部分外网通信的性能(存疑)；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;不要想当然地以为，某 VPS 距离接入网络的地域蛮近的（上海 → 日本 / 广州 → 新加坡等），延迟和掉包情况一定不大，在该 VPS 商家有大量用户访问和绕路以及晚高峰情况下，163 网络的劣化程度比你想象的要严重得多：如从中国 → 新加坡（godaddy 新加坡虚拟主机），实际上是从中国 → 美国 → 新加坡），单程环两次北太平洋，看你怕不怕。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一个典型的 163 网络的国际访问路由，注意出海前经过路由的 AS 号和对应的 IP 地址&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620811543895.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
16 ~ 17 年时，连接亚太地区的路径普遍较差，绕美是家常便饭.&lt;/p&gt;
&lt;p&gt;从 18 年末，渐渐有了好转，电信一般都是绕日 NTT 过去，不过访问质量依旧很糟糕，线路无优化商家的劣势就是通信不稳定:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620813559023.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
中国电信 CN2 网络 AS4809 路由拓扑图，图示来源：&lt;a href=&#34;https://bgp.he.net/AS4809&#34;&gt;https://bgp.he.net/AS4809&lt;/a&gt;&lt;br&gt;
IPv4:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620813617487.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
IPv6:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620813644223.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
说明：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;CN2 网络的拓扑图远比 163 网复杂许多，整个网络的建设充分利用了各个节点之间的互联性，而不像 163 网那样简单粗暴地采用从上到下、从一到多的布设逻辑，从而充分使每一个节点在遭遇重负载时，可以迅速由周围节点来缓解负载；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CN2 GT 产品在从市级 → 省级 → 国际出口这一段走的是 163 网络，国际出口 → 境外接入点这一段汇入 CN2 网络，返程同理，偶尔可能会走联通的国际网络；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;作为典型的半程 CN2 产品，CN2 GT 网络的数据包即使在国际间传送几乎不会出现丢包的情况，但依然非常容易在国内这一段拥堵时，出现被中国电信舍弃数据包的情况，CN2 GT 网络全天的丢包率在 4% ~ 6%左右，如果在夜晚间高峰期（UTC+8 18:00 至 23:00 时），丢包率可达到 8% 以上；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CN2 GIA 产品在从市级 → 省级 → 国际出口 → 境外接入点的过程中，全程走 AS 号为 4809 的路由节点，这些路由节点的 IP 地址开头一律是 “59.43.&lt;em&gt;.&lt;/em&gt;”，全程不会经过 163 网络节点；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在没有购买昂贵的政企专线网络或氮气瓶加速服务的情况下，中国电信普通宽带用户连接海外节点具体走何种线路，取决于对方节点采用了何种路由自治协议，当然，决定它并不是靠心情，而是要和接入的电信运营商签署协议，一旦签署了走何种协议，如纯 CN2 网络，势必要向中国电信缴纳一笔高昂的 CN2 网络使用费用（最后这笔钱还得由用户承担），这就导致支持 CN2 GIA 网络的 VPS 产品价格最昂贵，CN2 GT 价格其次，163 网最为低廉（不用向中国电信缴纳一笔专门优化中国线路的银子）；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;作为中国电信的旗舰产品，CN2 GIA 产品的表现绝不会令任何人失望，无论是白天，还是晚高峰时期，纯 CN2 线路的掉包率均在 0.1% 以下，用户在访问过程中，行云流水，畅快丝滑。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;其实如果更严格地划分，CN2 GIA 产品还分为单网、双网、三网三种，顾名思义，单网 CN2 GIA 一般指的是仅中国电信用户访问去回，走 CN2 GIA 网络，联通/移动/教育网等用户访问过去，均走各自运营商的国际出口（典型产品为阿里云国际香港节点）；双网 CN2 GIA 一般指的是中国电信/中国联通用户访问过去，走 CN2 GIA 网络（特别地，该产品允许中国联通线路在省级跨网并入到中国电信的 CN2 网络，典型产品为标准互联的圣何塞 CN2 GIA 产品）；三网 CN2 GIA 一般指的是中国电信/中国联通/中国移动三网用户的去回访问，均会在省级并入到 CN2 网络，适用性最强（典型产品为搬瓦工的 DC9、DC6 机房）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;部分偏远地区的电信用户（比如在县级、村级、非重点市级）访问境外 CN2 GIA 线路的服务器时，会经过 IP 地址为 202.97.&lt;em&gt;.&lt;/em&gt; 的 AS4314 路由一跳，并入到已布设 CN2 网络的重点市级节点，随后再全程走 CN2 网络。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;由于担负的网络流量并不高，冗余量不够，CN2 网络的防御力比较脆弱。比如说，VPS 商之间同行攻击的情况屡见不鲜，所以很容易发现某家 CN2 GIA 网络的 VPS 一旦被打（DDoS攻击），毫无还手之力，整个网络会陷入瘫痪，只有等硬扛过去，该家的 CN2 GIA 网络才能重新恢复使用。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一个非常典型的 CN2 GIA 网络，注意跳了一下 202.97 打头的路由，其余全程 59.43:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620813794863.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
一个非常典型的 CN2 GT 网络，注意在国内走的时候，一定是 202.97 路由，出海后再走 59.43 路由:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620813817069.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;2-中国联通这部分会加入一些-vps-线路购置经验谈&#34;&gt;2. 中国联通(这部分会加入一些 VPS 线路购置经验谈)&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814048408.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;中国联通宽带用户增长率不高，拥有的总用户数最近竟被移动赶超，目前市场份额处于垫底，但对用户来说无疑是极其利好的消息。因为其拥有全国仅次于电信用户的国际总出口带宽，这就意味着中国联通用户访问外网遭遇的烦心事儿比电信和/移动用户要少很多，如果不想在 CN2 GIA 上花一笔大洋，一个普通中国联通宽带用户的国际访问“人权”是最有保障的；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;出海和归来均走北上广；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;出/回走 AS4837（联通 169 网络）/AS9929（A网）路由，暂无类似中国电信那样的国际精品网络产品；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;网络路由路径遵守固定路径/边界网关协议（BGP）；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;晚高峰时期骨干网选择性丢包的力度比中国电信低很多；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;美日线路绝赞性价比。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;中国联通 169 网络 AS4837 路由拓扑图，图示来源：https://bgp.he.net/AS4837&lt;br&gt;
IPv4:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814223987.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
IPv6:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814238200.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
说明：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;中国联通普通用户从市级 → 省级 → 国际出口 → 境外接入点的过程中，全程走 AS 号为 4837 的路由节点，这些路由节点的 IP 地址开头一律是 “219.158.&lt;em&gt;.&lt;/em&gt;”，全程不会经过 A网（AS9929）；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;经过的路由数较多，导致延迟普遍比 CN2 GIA 网络要高；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;169 网络全天的丢包率在 1% ~ 3%左右，如果在夜晚间高峰期（UTC+8 18:00 至 23:00 时），丢包率可达到 4% 以上；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;如果用户生活在中国联通的国际出口城市（北/上/广），或离这三座城市的距离很近，那么可以获得非常不错的延迟。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;美国地区：直连，不错。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;新加坡地区，比较依赖对方 VPS 商的线路优化，很多情况下联通去程统一绕日本 NTT（一家我很讨厌的日本线路，不谈国际声誉，只要从中国连接到日本走得是这条线，不爆炸我送你一包辣条）过去；回程直连广州联通或是依旧绕日返回。除了阿里云国际新加坡这样对三网不错的，联通用户慎选新加坡机房。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;香港地区，也得看商家和线路，最普通的，如 Softlayer 等，依旧绕日 NTT，垃圾的一批；部分线路不错的机房，如安畅机房、沙田、香港阿里云、PCCW 等，一般直接从广州联通过去，到港走香港联通或香港 PCCW，但这种机房一般都是针对三网一起优化的，联通当然跑的也不差，除非兼顾其他运营商的访问者，否则联通用户没必要花大价钱选择三网优化的香港地区机房。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;日本地区，表现之好，花费之低，超乎想象，尤其是众多日本本土 VPS 商（如 Cloudgarage、IDCF、Kagoya、Conoha、Sakura、ABLENET、GMOCloud等），联通用户去/回程统一经过上海联通的 IIJ 线路，质量非常理想，且上述日本本土商家的月付价格普遍不高，非常值得联通用户的选择，诸如 Linode 东京区二（Linode 东京区一走纯 KDDI 线路，联通表现也不错，可惜早已绝版）/ Vultr 东京等机房，走的是 NTT 线路，线路质量奇差，虽然它们购买门槛低，但非常不值得选择，买之前一定要测一下。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;不少研究日本 VPS 的同学，都知道中日之间有一条品级最高的线路，名曰 bbtec ，我有必要单独拿出来说一下，它是日本软银(Soft Bank)的定制线路，神壕专属，价格昂贵。日本阿里云有在用这条线路，但一个是接入该线路的 VPS 商家本来就不多，产品难寻，还有就是阿里云日本的账号注册限制太严，非日本本土手机号＋无日本国内住所无法收到纸质注册确认信并寄回就不能买，这就挡住几乎所有国内人了。我印象里能勉强买到，且提供 bbtec 的只还有 Ucloudbiz，他家机房实际在韩国首尔，IP 地址映射到的日本福冈，XEN 虚拟架构，不如主流的 KVM 先进，价格也不便宜。另一方面就是感觉 bbtec 这款线路高不成低不就的：对电信用户，bbtec 国内部分并未接入 CN2，走得依旧是 163，该卡还是卡，且日本地区根本就没有 CN2 GIA 产品，所以中国电信用户在任何时候都绝不应该选择任何一家日本地区的 VPS，加多少钱都没有更好的效果；对联通用户而言，有物美价廉的 IIJ 为何要选它；对移动用户而言，没有任何特殊加成，还得从广州过去，舍近求远，你高攀不起，它爱搭不理，bbtec 线路我觉得没有任何入手价值。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;韩国地区，韩国地区的 VPS 市场竞争不充分，可以购买的本地商家不多，大多由国人代理运营，印象减分，再加上韩国地区比较严厉的互联网成人内容管制政策，韩国 VPS 有一条 porn 墙，不值得选择。&lt;br&gt;
俄罗斯地区，毛熊的不少线路对联通用户是比较友好的，与中国临近，地理位置不吃亏，价格比较实惠。联通统一从北京出发，经过 Rostelecom (&lt;a href=&#34;https://rt.ru&#34;&gt;https://rt.ru&lt;/a&gt;) 线路过去，来回新西伯利亚机房的质量普遍比莫斯科的要好。但还有以下这些无法克服的问题：1. 用俄语难以跟客服沟通；2. 不支持支付宝，paypal，付款困难；3. 别想着用来给美服、港服吃鸡，游戏加速，俄罗斯地区连接香港和美国的延迟极高；4. 同理，移动固网用户会先去香港，再去俄罗斯，延迟很高；5. 如果是建站，只有中国联通、欧洲用户访问过去的速度不错，全世界其他地区连接俄罗斯的速度都不理想，随着国力衰弱，俄罗斯网络设施的可利用价值不太高；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;海外国人运营，支持支付宝付款，价格奇低，非一线大厂，NTT 线路，犄角旮旯地区，符合上述六条规则中的三条，打死都别碰，碰就是交学费。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一个典型的中国联通 169 网络连接外网路径图:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814616245.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
169 网络的中美回程也不绕路:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814639192.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
169 网络也比较看中对方 VPS 商的线路优化:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814663128.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
御三家：Linode/Vultr/DigitalOcean 新加坡节点电信/联通去程绕日，费拉不堪:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814684882.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
普通新加坡线路回程部分从广州直连回来，部分依旧绕日:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814701735.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
IIJ 线路对联通十分友好，非常适合中国华东、华南地区的联通用户选择:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814731516.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
珍爱生命，远离 NTT:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814818435.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814827514.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
生活在中国东北、华北地区，且预算有限的联通用户，可以试试俄罗斯 VPS:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814850856.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
中国联通 A 网 AS9929 路由拓扑图，图示来源：&lt;a href=&#34;https://bgp.he.net/AS9929&#34;&gt;https://bgp.he.net/AS9929&lt;/a&gt;&lt;br&gt;
IPv4：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620814896917.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
IPv6：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620815052636.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
说明：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;169 网络和 A 网之间的区别，与 163 网络和 CN2 之间的区别并不是一个概念，A 网早在中国网通时代就已存在，属于中国网通的骨干网。在网通和联通合并后，联通仍继续建设当年从电信 163 网分出来的那一部分，即现如今的 169 网(分出来的原因是应当年政企分离的要求，不是电信自己分的)，而这张 A 网就闲置了。虽然该产品的定位，名义上和中国电信的 CN2 网络对标，但这张“吃老本”的 A 网所具备的优势仅仅是用户少，网络负荷小，所以表现也还不错，一般给政企、高端用户使用。但由于这张网络多年没有再发展，所以跟持续扩容的 CN2 比，质量方面的差距只会越来越大。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;从市级 → 省级 → 国际出口 → 境外接入点的过程中，全程走 AS 号为 9929 的路由节点，这些路由节点的 IP 地址开头一律是 “218.105.&lt;em&gt;.&lt;/em&gt;/210.&lt;em&gt;.&lt;/em&gt;.*”，部分偏远地区，会经过 169 网络汇入到 A 网；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;由于该网的建设初衷就是为国内的网络服务，A 网仅会出现在国内，去程出海后一律并入到 169 网络上；回程必须要经过 169 网络，走到国内部分才转入到 A 网，这是所谓“精品 A 网”与 CN2 网络之间最大的差别；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;通过 A 网络访问外网全天的丢包率在 1% ~ 2%左右，如果在夜晚间高峰期（UTC+8 18:00 至 23:00 时），丢包率可达到 3% 以上；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;这个网的技术并不先进，用的人只要变多，或是负责出海数据去回的 169 网炸了，就顿露马脚。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一个典型的中国联通 A 网回程路由:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620815189058.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
对方网络没做优化的情况下，A 网回程也不会绕路:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620815212029.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
红框圈起来的就是传说中的 A 网，出海后果然便汇入到 169 网络上:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620815235791.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;3-中国移动&#34;&gt;3. 中国移动&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620986355803.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;中国移动进出国际网络，在国内经过的绝大部分流量，均由 AS9808 网络承载，旧铁通的 AS9314 网络几乎已被放弃；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;暂未发现中国移动有“精品出口网络”产品；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;AS9808 网络在北京/上海/广州均有进出海光缆，距多方 Traceroute 观察，广州移动承担了大部分中国移动网络进出口的流量，如中美、中国东南亚等地区；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PCCW 与中国移动有着说不清道不明的屁眼交易关系；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;上海移动仅提供分散广州移动出口流量的职能，且流经上海移动的流量，会转交给国内其他运营商（如联通）进行国际通信；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;北京移动主要承担与欧洲地区进出口流量的通信（直连，非绕美）；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;网络路由路径遵守固定路径/边界网关协议（BGP）；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;暂未确定在高峰期是否会有策略性丢包，以减少对骨干网的负载；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;通过手机用户赠宽带等方式，中国移动迅速积累了一大批固网宽带用户，在总出口量排行老三、总用户量跃居国内第一的情况下，如果不大幅拓展国际总出口量，未来普通移动网络用户的国际互联网访问质量着实堪忧。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;中国移动 AS9808 路由拓扑图，图示来源：&lt;a href=&#34;https://bgp.he.net/AS9808&#34;&gt;https://bgp.he.net/AS9808&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;IPv4：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620986458854.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
IPv6：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620986474614.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
说明：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;中国移动的进出口跳跃性很大，国内部分必走 AS9808 路由（221.176.&lt;em&gt;.&lt;/em&gt;/221.183.&lt;em&gt;.&lt;/em&gt;），在部分地区访问部分 VPS，会并入到铁通 AS9314/电信 163 网络/联通 169 网络的路由节点；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;目前来看，中国移动网络的国际访问质量中规中矩，尤其是电信用户谈之色变的东南亚未优化 VPS 线路（一般要从日本 NTT 过去或是绕美），在移动用户看来真是小 Case，如果不能通过广州移动直接过去，那就呆在广州移动绕一圈再过去；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;PCCW（电讯盈科） 线路目前是中港之间或是从中国到东南亚其他地区前且必须从香港中转线路的中，国内除纯 CN2 GIA 以外质量最好的线路；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;以前移动就有“国内墙中墙，国外直接上”的优良传统，通过 AS9808 网络访问外网全天的丢包率在 1% ~ 3%左右，如果在夜晚间高峰期（UTC+8 18:00 至 23:00 时），丢包率可达到 3% 以上；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;国内部分需经过的路由节点较多；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;回程和去程的路径很少恶意绕路。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;绕道联通&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620986612456.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
直连且有独立的中美线路&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620986630514.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
访问 Vultr 新加坡的线路质量很不错，三网最佳&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620986642741.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
对于位于香港的服务器，VPS 商如果和移动有合作，则全程走中国移动线路，否则走 PCCW&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620986666405.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
北京移动主要负责处理欧洲地区的外网通信&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620986679287.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;谨记木桶理论&#34;&gt;谨记木桶理论&lt;/h1&gt;
&lt;p&gt;即使有“全程 CN2”、“A 网”等“精品网络”光环加持，一定不要忘了，网络速度、延迟、丢包等关键指标，还与 VPS 商的销售行为息息相关，就比如说，商家标称“共享 1Gbps”，如果平均分给 8 个人用，每个人能享受到的速度就是 128Mbps，但如果商家贪心，把 VPS 超售 10 倍（无论是 OpenVZ/KVM/HyperV 等架构，网络端口都可以为所欲为地超售），那么每个人在高峰期只能享用 12.8 Mbps 的带宽，如果你的邻居们各个都是“一键脚本”大神，什么锐速、暴力魔改 BBR、KCPTun 多倍狂发包 等争抢网络资源的奇技淫巧一股脑儿使劲怼，而你什么优化也不做时，自然就更吃亏，源头速度被卡死了，国家给你单独铺一条海缆也没用。&lt;/p&gt;
&lt;p&gt;#牢记品质三原色&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620986742742.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
">国内主流网络运营商国际连接线路简谈</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/gfV9Uqj8F/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;本文转自：&lt;a href=&#34;https://www.cloudflare.com/zh-cn/learning/ddos/what-is-a-ddos-attack/&#34;&gt;https://www.cloudflare.com/zh-cn/learning/ddos/what-is-a-ddos-attack/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;什么是-ddos-攻击&#34;&gt;什么是 DDoS 攻击？&lt;/h1&gt;
&lt;p&gt;分布式拒绝服务（DDoS）攻击是通过大规模互联网流量淹没目标服务器或其周边基础设施，以破坏目标服务器、服务或网络正常流量的恶意行为。&lt;/p&gt;
&lt;p&gt;DDoS 攻击利用多台受损计算机系统作为攻击流量来源以达到攻击效果。利用的机器可以包括计算机，也可以包括其他联网资源（如 IoT 设备）。&lt;/p&gt;
&lt;p&gt;总体而言，DDoS 攻击好比高速公路发生交通堵塞，妨碍常规车辆抵达预定目的地。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620728184860.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;ddos-攻击的工作原理&#34;&gt;DDoS 攻击的工作原理&lt;/h1&gt;
&lt;p&gt;DDoS 攻击是通过连接互联网的计算机网络进行的。&lt;/p&gt;
&lt;p&gt;这些网络由计算机和其他设备（例如 IoT 设备）组成，它们感染了恶意软件，从而被攻击者远程控制。这些个体设备称为机器人（或僵尸），一组机器人则称为僵尸网络。&lt;/p&gt;
&lt;p&gt;一旦建立了僵尸网络，攻击者就可通过向每个机器人发送远程指令来发动攻击。&lt;/p&gt;
&lt;p&gt;当僵尸网络将受害者的服务器或网络作为目标时，每个机器人会将请求发送到目标的 IP 地址，这可能导致服务器或网络不堪重负，从而造成对正常流量的拒绝服务。&lt;/p&gt;
&lt;p&gt;由于每个机器人都是合法的 Internet 设备，因而可能很难区分攻击流量与正常流量。&lt;/p&gt;
&lt;h1 id=&#34;如何识别-ddos-攻击&#34;&gt;如何识别 DDoS 攻击&lt;/h1&gt;
&lt;p&gt;DDoS 攻击最明显的症状是网站或服务突然变慢或不可用。但是，造成类似性能问题的原因有多种（如合法流量激增），因此通常需要进一步调查。流量分析工具可以帮助您发现 DDoS 攻击的一些明显迹象：&lt;br&gt;
* 来自单个 IP 地址或 IP 范围的可疑流量&lt;br&gt;
* 来自共享单个行为特征（例如设备类型、地理位置或 Web 浏览器版本）的用户的大量流量&lt;br&gt;
* 对单个页面或端点的请求数量出现不明原因的激增&lt;br&gt;
* 奇怪的流量模式，例如一天中零碎时间上的激增或看似不自然的模式（例如，每 10 分钟出现一次激增）&lt;/p&gt;
&lt;p&gt;DDoS 攻击还有其他更具体的迹象，具体取决于攻击的类型。&lt;/p&gt;
&lt;h1 id=&#34;常见的-ddos-攻击有哪几类&#34;&gt;常见的 DDoS 攻击有哪几类&lt;/h1&gt;
&lt;p&gt;不同类型的 DDoS 攻击针对不同的网络连接组件。为了解不同的 DDoS 攻击如何运作，有必要知道网络连接是如何建立的。&lt;/p&gt;
&lt;p&gt;互联网上的网络连接由许多不同的组件或“层”构成。就像打地基盖房子一样，模型中的每一步都有不同的用途。&lt;/p&gt;
&lt;p&gt;OSI 模型（如下图所示）是一个概念框架，用于描述 7 个不同层级的网络连接。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620728353166.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
虽然几乎所有 DDoS 攻击都涉及用流量淹没目标设备或网络，但攻击可以分为三类。攻击者可能利用一种或多种不同的攻击手段，也可能根据目标采取的防范措施循环使用多种攻击手段。&lt;/p&gt;
&lt;h2 id=&#34;应用程序层攻击&#34;&gt;应用程序层攻击&lt;/h2&gt;
&lt;h3 id=&#34;攻击目标&#34;&gt;攻击目标：&lt;/h3&gt;
&lt;p&gt;此类攻击有时称为第 7 层 DDoS 攻击（指 OSI 模型第 7 层），其目标是耗尽目标资源。&lt;/p&gt;
&lt;p&gt;攻击目标是生成网页并传输网页响应 HTTP 请求的服务器层。在客户端执行一项 HTTP 请求的计算成本比较低，但目标服务器做出响应却可能非常昂贵，因为服务器通常必须加载多个文件并运行数据库查询才能创建网页。&lt;/p&gt;
&lt;p&gt;第 7 层攻击很难防御，因为难以区分恶意流量和合法流量。&lt;/p&gt;
&lt;h3 id=&#34;应用程序层攻击示例&#34;&gt;应用程序层攻击示例：&lt;/h3&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620728401946.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;http-洪水&#34;&gt;HTTP 洪水&lt;/h3&gt;
&lt;p&gt;HTTP 洪水攻击类似于同时在大量不同计算机的 Web 浏览器中一次又一次地按下刷新 – 大量 HTTP 请求涌向服务器，导致拒绝服务。&lt;/p&gt;
&lt;p&gt;这种类型的攻击有简单的，也有复杂的。&lt;/p&gt;
&lt;p&gt;较简单的实现可以使用相同范围的攻击 IP 地址、referrer 和用户代理访问一个 URL。复杂版本可能使用大量攻击性 IP 地址，并使用随机 referrer 和用户代理来针对随机网址。&lt;/p&gt;
&lt;h2 id=&#34;协议攻击&#34;&gt;协议攻击&lt;/h2&gt;
&lt;h3 id=&#34;攻击目标-2&#34;&gt;攻击目标：&lt;/h3&gt;
&lt;p&gt;协议攻击也称为状态耗尽攻击，这类攻击会过度消耗服务器资源和/或防火墙和负载平衡器之类的网络设备资源，从而导致服务中断。&lt;/p&gt;
&lt;p&gt;协议攻击利用协议堆栈第 3 层和第 4 层的弱点致使目标无法访问。&lt;/p&gt;
&lt;h3 id=&#34;协议攻击示例&#34;&gt;协议攻击示例：&lt;/h3&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;2&#34;&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620728449707.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;syn-洪水&#34;&gt;SYN 洪水&lt;/h3&gt;
&lt;p&gt;SYN 洪水就好比补给室中的工作人员从商店的柜台接收请求。&lt;/p&gt;
&lt;p&gt;工作人员收到请求，前去取包裹，再等待确认，然后将包裹送到柜台。一时之间，工作人员收到太多包裹请求，来不及确认，直到无法处理更多包裹，实在不堪重负，致使无人能对请求做出回应。&lt;/p&gt;
&lt;p&gt;此类攻击利用 TCP 握手（两台计算机发起网络连接时要经过的一系列通信），通过向目标发送大量带有伪造源 IP 地址的 TCP“初始连接请求”SYN 数据包来实现。&lt;/p&gt;
&lt;p&gt;目标计算机响应每个连接请求，然后等待握手中的最后一步，但这一步确永远不会发生，因此在此过程中耗尽目标的资源。&lt;/p&gt;
&lt;h2 id=&#34;容量耗尽攻击&#34;&gt;容量耗尽攻击&lt;/h2&gt;
&lt;h3 id=&#34;攻击目标-3&#34;&gt;攻击目标：&lt;/h3&gt;
&lt;p&gt;此类攻击试图通过消耗目标与较大的 Internet 之间的所有可用带宽来造成拥塞。攻击运用某种放大攻击或其他生成大量流量的手段（如僵尸网络请求），向目标发送大量数据。&lt;/p&gt;
&lt;h3 id=&#34;放大示例&#34;&gt;放大示例：&lt;/h3&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;3&#34;&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620728541749.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h1 id=&#34;如何防护-ddos-攻击&#34;&gt;如何防护 DDoS 攻击？&lt;/h1&gt;
&lt;p&gt;若要缓解 DDoS 攻击，关键在于区分攻击流量与正常流量。&lt;/p&gt;
&lt;p&gt;例如，如果因发布某款产品导致公司网站涌现大批热情客户，那么全面切断流量是错误之举。如果公司从已知恶意用户处收到的流量突然激增，或许需要努力缓解攻击。&lt;/p&gt;
&lt;p&gt;难点在于区分真实客户流量与攻击流量。&lt;/p&gt;
&lt;p&gt;在现代互联网中，DDoS 流量以多种形式出现。流量设计可能有所不同，从非欺骗性单源攻击到复杂的自适应多方位攻击无所不有。&lt;/p&gt;
&lt;p&gt;多方位 DDoS 攻击采用多种攻击手段，以期通过不同的方式击垮目标，很可能分散各个层级的缓解工作注意力。&lt;/p&gt;
&lt;p&gt;同时针对协议堆栈的多个层级（如 DNS 放大（针对第 3/4 层）外加 HTTP 洪水（针对第 7 层））发动攻击就是多方位 DDoS 攻击的一个典型例子。&lt;/p&gt;
&lt;p&gt;为防护多方位 DDoS 攻击，需要部署多项不同策略，从而缓解不同层级的攻击。&lt;/p&gt;
&lt;p&gt;一般而言，攻击越复杂，越难以区分攻击流量与正常流量 —— 攻击者的目标是尽可能混入正常流量，从而尽量减弱缓解成效。&lt;/p&gt;
&lt;p&gt;如果缓解措施不加选择地丢弃或限制流量，很可能将正常流量与攻击流量一起丢弃，同时攻击还可能进行修改调整以规避缓解措施。为克服复杂的破坏手段，采用分层解决方案效果最理想。&lt;/p&gt;
&lt;h2 id=&#34;黑洞路由&#34;&gt;黑洞路由&lt;/h2&gt;
&lt;p&gt;有一种解决方案几乎适用于所有网络管理员：创建黑洞路由，并将流量汇入该路由。在最简单的形式下，当在没有特定限制条件的情况下实施黑洞过滤时，合法网络流量和恶意网络流量都将路由到空路由或黑洞，并从网络中丢弃。&lt;/p&gt;
&lt;p&gt;如果互联网设备遭受 DDoS 攻击，则该设备的互联网服务提供商（ISP）可能会将站点的所有流量发送到黑洞中作为防御。这不是理想的解决方案，因为它相当于让攻击者达成预期的目标：使网络无法访问。&lt;/p&gt;
&lt;h2 id=&#34;速率限制&#34;&gt;速率限制&lt;/h2&gt;
&lt;p&gt;限制服务器在某个时间段接收的请求数量也是防护拒绝服务攻击的一种方法。&lt;/p&gt;
&lt;p&gt;虽然速率限制对于减缓 Web 爬虫窃取内容及防护暴力破解攻击很有帮助，但仅靠速率限制可能不足以有效应对复杂的 DDoS 攻击。&lt;/p&gt;
&lt;p&gt;然而，在高效 DDoS 防护策略中，速率限制不失为一种有效手段。&lt;/p&gt;
&lt;h2 id=&#34;web-应用程序防火墙&#34;&gt;Web 应用程序防火墙&lt;/h2&gt;
&lt;p&gt;Web 应用程序防火墙（WAF） 是一种有效工具，有助于缓解第 7 层 DDoS 攻击。在互联网和源站之间部署 WAF 后，WAF 可以充当反向代理，保护目标服务器，防止其遭受特定类型的恶意流量入侵。&lt;/p&gt;
&lt;p&gt;通过基于一系列用于识别 DDoS 工具的规则筛选请求，可以阻止第 7 层攻击。有效的 WAF 的一个关键价值是能够快速实施自定义规则以应对攻击。&lt;/p&gt;
&lt;h2 id=&#34;anycast-网络扩散&#34;&gt;Anycast 网络扩散&lt;/h2&gt;
&lt;p&gt;此类缓解方法使用 Anycast 网络，将攻击流量分散至分布式服务器网络，直到网络吸收流量为止。&lt;/p&gt;
&lt;p&gt;这种方法就好比将湍急的河流引入若干独立的小水渠，将分布式攻击流量的影响分散到可以管理的程度，从而分散破坏力。&lt;/p&gt;
&lt;p&gt;Anycast 网络在缓解 DDoS 攻击方面的可靠性取决于攻击规模及网络规模和效率。&lt;/p&gt;
">DDoS科普系列：什么是 DDoS 攻击？</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/tools/"" data-c="
          &lt;h1 id=&#34;图床&#34;&gt;图床&lt;/h1&gt;
&lt;p&gt;本站已上线专属图床，大家可以通过以下链接访问：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Vercel:   &lt;a href=&#34;https://figurebed.gd1214b.tk&#34;&gt;https://figurebed.gd1214b.tk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Cloudflare Pages: &lt;a href=&#34;https://figurebed.pages.dev/&#34;&gt;https://figurebed.pages.dev/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Netlify: &lt;a href=&#34;https://figurebed.netlify.app/&#34;&gt;https://figurebed.netlify.app/&lt;/a&gt;&lt;br&gt;
&lt;strong&gt;警告 你所上传的所有图片都会保存在位于中国大陆的服务器中,切勿传输违反相关国家和国际法规的图片和个人隐私图片. 详情请查看本站的&lt;a href=&#34;https://blog.gd1214b.icu/post/disclaimers/&#34;&gt;免责声明&lt;/a&gt;.&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;随机密码生成器&#34;&gt;随机密码生成器&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Vercel ：  &lt;a href=&#34;https://password.gd1214b.tk/&#34;&gt;https://password.gd1214b.tk/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Cloudflare Pages: &lt;a href=&#34;https://gd1214b-password.pages.dev/&#34;&gt;https://gd1214b-password.pages.dev/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Netlify: &lt;a href=&#34;https://gd1214b-password.netlify.app/&#34;&gt;https://gd1214b-password.netlify.app/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;2048小游戏&#34;&gt;2048小游戏&lt;/h1&gt;
&lt;p&gt;怎么玩&lt;br&gt;
怎么玩：使用方向键让方块整体上下左右移动（如果你的设备带有触摸屏，则请滑动触摸屏）。如果两个带有相同数字的方块在移动中碰撞，则它们会合并为一个方块，且所带数字变为两者之和。每次移动时，会有一个值为2或者4的新方块出现，所出现的数字都是2的幂。 当值为2048的方块出现时，游戏即胜利.&lt;br&gt;
发布页面&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cloudflare Pages: &lt;a href=&#34;https://gd1214b-2048.pages.dev/&#34;&gt;https://gd1214b-2048.pages.dev/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Vercel: &lt;a href=&#34;http://2048.gd1214b.tk/&#34;&gt;http://2048.gd1214b.tk/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Netlify: &lt;a href=&#34;https://gd1214b-2048.netlify.app/&#34;&gt;https://gd1214b-2048.netlify.app/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
">工具</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/CoDNIXdTR/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;本文转自:&lt;a href=&#34;https://mp.weixin.qq.com/s?__biz=Mzg2OTIyMzY0Ng==&amp;amp;mid=2247483696&amp;amp;idx=1&amp;amp;sn=5fd8a3d57308bdbf993ab7545c141a8e&amp;amp;chksm=cea11c81f9d69597487bf17018dba4d329a491c98abed4d6f1b1a88a83abcd2a2d8cfe18a2c7&amp;amp;scene=158#rd&#34;&gt;https://mp.weixin.qq.com/s?__biz=Mzg2OTIyMzY0Ng==&amp;amp;mid=2247483696&amp;amp;idx=1&amp;amp;sn=5fd8a3d57308bdbf993ab7545c141a8e&amp;amp;chksm=cea11c81f9d69597487bf17018dba4d329a491c98abed4d6f1b1a88a83abcd2a2d8cfe18a2c7&amp;amp;scene=158#rd&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;本文旨在分析“翻墙”行为的法律风险，并基于现行规范性法律文件和相关案例进行学术讨论。在分析相关法条时可能需要对部分计算机专业术语进行释义。但本文不涉及有关“翻墙”的任何技术指导或方法的具体介绍。&lt;/p&gt;
&lt;p&gt;另，本文讨论的一切“XXX合法与违法”问题，分析的主体都是“单纯访问境外网站”，不包括“访问、发布、传播违法有害信息”，后者当然属于违法犯罪行为，但这和翻墙行为没有任何本质联系，因为在境内网站也可访问、发布、传播违法有害信息。&lt;/p&gt;
&lt;p&gt;在本文大致框架形成以前，我已查阅国内几乎所有关于“翻墙”的论文和文章，大部分探讨都存在着严重的问题，有些是法学常识性问题（或不讨论法律层面的问题），有些是计算机技术方面的常识性问题（常出现在法学类文章中）。&lt;/p&gt;
&lt;p&gt;这是一个很有趣的现象——“翻墙”是一个同时牵涉法学和计算机技术的两个领域的跨学科问题。很多法学专家不了解技术；很多技术人员，也没有意愿探讨技术涉及的法律问题。这个疑难问题今天终于被我这个“既没学好法，又没学好计算机”的奇葩捡了漏。望两个学科的大佬们对于本文可能出现的纰漏予以指正！&lt;/p&gt;
&lt;p&gt;如果你能完整阅读完这篇一万余字的文章（的第一章、第二章部分），你最大的收获，就是能够认识到某律所文章的部分段落（见下文引用部分）在论证中犯下的严重前提错误：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;由于企业的“翻墙”行为既未使用合法的“国际出入口信道”，也未接入合法的“接入网络”，甚至未使用境内的“互联网络”，已经违反了《中华人民共和国计算机信息网络国际联网管理暂行规定》的规定，公安机关有权责令企业停止国际联网行为，同时给予警告，并处以15000元以下的罚款。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在看完第四章的基础上），你将对“GFW”、“翻墙”等话题有更深入、更正确的认识，同时避免被不怀好意的人的类似观点（见下文引用部分）欺骗。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;因为全球大部分根域名服务器都设立在美国，所以美国掌握互联网的底层，而中国必须建立GFW来保障互联网安全。这也是互联网+产业安全运转的重要基础。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;本文论证的逻辑链如下：&lt;br&gt;
国际出入口信道是物理信道，现行法只规定不允许非法架设物理信道——翻墙必定使用合法物理信道（主要在第四章展开论证）——翻墙不违法&lt;/p&gt;
&lt;p&gt;本文的主要结论如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;“个人使用vpn等工具翻墙”的禁止性规定是不存在的，无论是从技术角度还是法律方面，访问境外网站和境内网站没有任何本质区别；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;一切翻墙行为都必须使用国家批准的合法国际出入口信道，因为全球互联网的本来面貌就是所有国家网络基建的互联互通（主要在第四章展开论证）；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;GFW的运行基本原理是“网络攻击或入侵检测”（主要在第四章展开论证）；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;“翻墙”的基本原理是抵御“网络攻击或入侵检测”（主要在第四章展开论证）。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;案例导入及相关材料真实性的检证&#34;&gt;案例导入及相关材料真实性的检证&lt;/h1&gt;
&lt;p&gt;2018年12月28日，广东韶关南雄市公安局对“翻墙”的朱某某作出行政处罚决定，理由为“擅自建立、使用非法定信道进行国际联网”，处以1000元人民币罚款，其处罚依据为《中华人民共和国计算机信息网络国际联网管理暂行规定》第六条、第十四条。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620293844801.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;广东公安执法信息公开平台行政处罚决定书信息 韶雄公(网)行罚决字 [2019]1号&lt;br&gt;
&lt;a href=&#34;http://www.gdgafz.alldayfilm.com/bookDetail.html?type=1&amp;amp;id=1134323&#34;&gt;http://www.gdgafz.alldayfilm.com/bookDetail.html?type=1&amp;amp;id=1134323&lt;/a&gt;&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620294082225.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
笔者此前看到此新闻时一度是不相信的，但未曾料到，近日在检索过程中真的在官方信息公开平台查到了这一案件的处罚决定。但上图显示的“行政处罚决定书”拍摄样图并非来源于官方，且样图有很多可疑之处（法律文书课老师看到可能会被气哭），在此提前予以指出：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;标准模板，横线是提前固定的，但细看便可发现，正文文字下划线与页面的边距不统一，因此这明显是在正文文字填写之后才事后加上“下划线”格式的。且文字没有统一边距；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在“现查明”的正文部分，“‘蓝灯’（Lantern Pro）软件APP”中的“软件”和“APP”系表意相同的两个名词，此处连用存在语病，十分怪异；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在内容部分，“且最近一周的登陆次数为487次”并没有相应的证据材料予以佐证。首先，行政相对人不可能记住自己使用vpn的连接次数，因此该数据不可能从询问笔录中反映出来。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;其次，手机app本身并不会保存每天的连接次数，也没有日志的功能；&lt;/p&gt;
&lt;p&gt;此外，即使该数据在手机和app内部以日志的形式保存，行政机关也不可能靠妄加猜测突然检查朱某某的手机，而是只可能使用远程手段（例如公安机关远程监控系统、电信运营商的举报或直接向运营商收集用户访问境外ip地址相关信息），但这样的证据并没有在此份决定书样图中反映出来，所以在证据层面是可疑的。&lt;/p&gt;
&lt;p&gt;另附一份我在实习期间曾经手的一份行政处罚决定书的模板（关键信息已经隐藏）。从图中可见，基层机关行政处罚决定书的格式和行文要求是非常高的。而前后两相比较，可以看出前一份处罚决定书颇有些山寨的味道。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620294061874.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
当然，上述文书所反映的问题并不必然证明其为刻意捏造，因为笔者对于不同地区基层行政机关的法律文书和执法水平差异并不了解，但至少上述缺陷会降低该材料的可信度。&lt;/p&gt;
&lt;h1 id=&#34;法条分析及相关专业名词释义&#34;&gt;法条分析及相关专业名词释义&lt;/h1&gt;
&lt;p&gt;上述行政处罚案件的处罚依据如下:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;《中华人民共和国计算机信息网络国际联网管理暂行规定》（国务院令第195号）（1996年1月23&amp;gt;日）&lt;br&gt;
第六条      计算机信息网络直接进行国际联网，必须使用邮电部国家公用电信网提供的国际出入口信道。任何单位和个人不得自行建立或者使用其他信道进行国际联网。&lt;br&gt;
第十四条　违反本规定第六条、第八条和第十条的规定的，由公安机关责令停止联网，给予警告，可以并处15000元以下的罚款；有违法所得的，没收违法所得。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;关于发布《计算机信息网络国际联网出入口信道管理办法》的通知（邮部〔１９９６〕４９２号）&lt;br&gt;
第二条 我国境内的计算机信息网络直接进行国际联网，必须使用邮电部国家公用电信网提供的国际出入口信道。&lt;br&gt;
任何单位和个人不得自行建立或者使用其它信道（含卫星信道）进行国际联网。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;什么是邮电部国家公用电信网提供的国际出入口信道&#34;&gt;什么是邮电部国家公用电信网提供的国际出入口信道？&lt;/h2&gt;
&lt;p&gt;有很多人一看到“自行建立或使用”、“国际出入口信道”就激动地跳了起来，认为其含义和“使用vpn访问境外网站”是同一种意思，但实际上这是一个非常大的误解。&lt;/p&gt;
&lt;p&gt;首先，从立法渊源上看，“国际出入口信道”一词最早起源于1996年出台的《中华人民共和国计算机信息网络国际联网管理暂行规定》（下称暂行规定）和关于发布《计算机信息网络国际联网出入口信道管理办法》的通知（邮部〔１９９６〕４９２号）（下称管理办法）。但很遗憾，在两部规范性法律文件内，并没有对“国际出入口信道”作出释义。但从后者的第二条第二款我们可以从“（含卫星信道）”这一标注中洞察到“信道”可能的含义——即它很可能具有物理意义。&lt;/p&gt;
&lt;p&gt;好在，1998年国务院信息化领导小组又出台了一部相关的部门规章，对“国际出入口信道”的含义作出了明确的规定。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;关于印发《中华人民共和国计算机信息网络国际联网管理暂行规定实施办法》的通知&lt;br&gt;
（国信［１９９８］００１号）&lt;br&gt;
第三条 本办法下列用语的含义是：&lt;br&gt;
（三）国际出入口信道，是指国际联网所使用的&lt;strong&gt;物理信道&lt;/strong&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;因此，国际出入口物理信道，只限于陆地光缆、海底光缆以及卫星通讯等实际存在的、供国内外进行数据、信息交换的物理介质。&lt;/p&gt;
&lt;p&gt;根据《电信业务分类目录（2015年版）》，国际联网所使用的物理信道包括但不限于以下几种：国际陆缆、国际海缆、陆地入境站、海缆登陆站、国际地面传输通道、国际卫星地球站、卫星空间段资源、国际传输通道的国内延伸段，以及国际通信网带宽、光通信波长、电缆、光纤、光缆等国际通信传输设施。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620294357761.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620294362920.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
与此同时，我们在立法中可以发现不少细节，其足以就“国际出入口信道属于物理信道”这一论点找出进一步的佐证。&lt;/p&gt;
&lt;p&gt;首先必须对GFW的渊源有一定的了解。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;防火长城（英语：Great Firewall，常用简称：GFW，中文也称中国国家防火墙，中国大陆民众俗称墙、网络长城、功夫网等等），是对中华人民共和国政府在其互联网边界审查系统（包括相关行政审查系统）的统称。此系统起步于1998年，其英文名称得自于2002年5月17日Charles R. Smith所写的一篇关于中国网络审查的文章《The Great Firewall of China》，取与Great Wall（长城）相谐的效果，简写为Great Firewall，缩写GFW。&lt;br&gt;
来源:维基百科:&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E9%98%B2%E7%81%AB%E9%95%BF%E5%9F%8E&#34;&gt;https://zh.wikipedia.org/wiki/防火长城&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;可以发现，GFW项目在1998年才刚刚起步，其命名甚至在2002年才出现，继而才出现“翻墙”这一概念。1996年《中华人民共和国计算机信息网络国际联网管理暂行规定》出台之时，甚至没有GFW这一概念的存在，事实上也根本不存在互联网审查，那么，1996年、1998年规范性法律文件中的概念何以提前预测并指向1998年以后才诞生的事物？一项禁止性规定又何以禁止不存在的东西？&lt;/p&gt;
&lt;p&gt;因此，毫不避讳地说，若国内各地基层公安机关真的广泛存在“依据上述规范性法律文件对公民的‘翻墙’行为予以处罚”的现象，那绝对是明显的适用法律错误。&lt;/p&gt;
&lt;p&gt;更进一步，《暂行规定》为“擅自设立非法国际出入口信道”的行为设定了行政处罚事项，而该处罚的裁量基准是“15000元人民币以下”。这个数字，从当今的经济水平来看，对于个人来说不算一个很大的数字（但实际上这个上限对于个人来说已经很高了）。但是我们不要忘了，设立该处罚事项的规范性法律文件是在1996年出台的，我们必须关注1996年前后的职工平均工资水平，才能洞察“1万5”在行政裁量基准上的合理与否。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;关于公布上海市1998年度职工月平均工资、国有企业职工年平均工资及增长率的通知&lt;br&gt;
二、1998年度全市国有企业职工年平均工资为11546元，比上年增长0.8%（增幅按国家统计局新口径作了相应调整）。凡按1998年国有企业职工年平均工资计算的事项，均按此水平执行。&lt;br&gt;
沪劳保综发（1999）18号 上海市劳动和社会保障局&lt;br&gt;
（来源：&lt;a href=&#34;http://law.51labour.com/lawshow-36037.html&#34;&gt;http://law.51labour.com/lawshow-36037.html&lt;/a&gt;）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;你很难想象，在1998年，上海市作为全国经济重镇，职工的年平均工资才1万余元，但“翻一次墙”的行政处罚上限就可以达到一个上海普通职工工作一年半获得的工资——这不仅完全与行政法比例原则相违背，且即使是没有法学基础的人看到这样的景象都会感到震惊和难以置信。因此，我们从行政处罚的裁量基准可以反推得出，触犯上述规定的行政相对人，更可能是资本力量雄厚的企业——毕竟，一家有能力往台湾海峡私拉电线埋下海底光缆、或者为了“逛推特”专门制造并发射私人通信卫星的企业，才可能承受1万5的罚金。“建立国际出入口信道”，还真不是你普通人玩得起的！&lt;/p&gt;
&lt;p&gt;但很有意思的是，《暂行规定》历经20多年，裁量基准竟然从未发生变化，依旧是上限一万五。但是1996年的一万五和2020年的一万五，可完全不是一个数量级的。但立法部门竟然从没有想着修订，也着实让人奇怪。&lt;/p&gt;
&lt;h2 id=&#34;1996年的国际出入口信道的概念在20年间是否发生变化&#34;&gt;1996年的“国际出入口信道”的概念在20年间是否发生变化&lt;/h2&gt;
&lt;p&gt;有人会进一步质疑，“国际出入口信道”这一概念，有没有可能随着时代的发展以及新规范性法律文件的出台，从而被赋予新的内涵和外延呢？我们不妨找一找最近几年的相关文件和新闻来分析一下。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;为了推动中国与塔吉克斯坦、巴基斯坦间国际通信业务的共同发展，促进区域的共同繁荣，工业和信息化部批准中国电信设置塔什库尔干国际通信信道出入口，为中亚、南亚区域经济发展提供良好的通信平台和保障。　　&lt;br&gt;
中塔直达光缆的建设，可以满足中塔间双边落地业务需求……（省略）……中巴直达光缆的建设将从根本上改变……（省略）……，满足中把双边落地及转接业务需求，对巴基斯坦国际出入口带宽能力的丰富和提升具有重大战略意义。&lt;br&gt;
工业和信息化部批准设置塔什库尔干国际通信信道出入口 发布时间：2011-06-27 来源：电信管理局&lt;br&gt;
链接:&lt;a href=&#34;http://www.miit.gov.cn/n1146290/n1146402/n7039597/c7065495/content.html&#34;&gt;http://www.miit.gov.cn/n1146290/n1146402/n7039597/c7065495/content.html&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;首先，从2011年工业和信息化部的“批准设置塔什库尔干国际通信信道出入口”的新闻中，我们可以明显看出一个因果联系，即【国际出入口的设立→提升了国际出入口带宽能力】，而只有物理意义的光缆才可能事实上增强数据出入境的吞吐量，虚拟网络连接是做不到的，因此很容易进一步推导得出——“设置国际通信信道出入口”其本身就是“建设直达光缆”，因此，此时“信道”仍然是物理意义上的。&lt;/p&gt;
&lt;p&gt;进一步，从近期的规范性法律文件来看，与“翻墙”关系最密切的莫过于工业和信息化部关于清理规范互联网网络接入服务市场的通知（工信部信管函[2017]32号） 以及工业和信息化部办公厅关于深入推进互联网网络接入服务市场清理规范工作的通知（工信厅信管函〔2018〕161号）。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;工业和信息化部办公厅关于深入推进互联网网络接入服务市场清理规范工作的通知&lt;br&gt;
但随着清理规范工作深入开展，一些深层次矛盾逐步浮出水面，部分企业违规自建传输网络、非法经营传输业务及违规经营跨境数据通信等问题仍较为突出，……（省略）……有关事项通知如下：　&lt;br&gt;
四、各基础电信企业要加强网络资源和用户台账管理，采取技术、管理、法律等措施，防范网络资源被用于非法经营。要配合各通信管理局做好违规线索核查，及时关停被用于非法经营、违规使用的网络资源。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;工业和信息化部关于清理规范互联网网络接入服务市场的通知（工信部信管函[2017]32号）&lt;br&gt;
二、工作重点&lt;br&gt;
（二）严格资源管理，杜绝违规使用&lt;br&gt;
4.违规开展跨境业务问题。未经电信主管部门批准，不得自行建立或租用专线（含虚拟专用网络VPN）等其他信道开展跨境经营活动。基础电信企业向用户出租的国际专线，应集中建立用户档案，向用户明确使用用途仅供其内部办公专用，不得用于连接境内外的数据中心或业务平台开展电信业务经营活动。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;看到这两份文件的一些措辞，很多人又会将“专线（含虚拟专用网络VPN）等其他信道”等同于1996年、1998年文件提及的“国际出入口信道”，但两者是不同的概念。&lt;/p&gt;
&lt;p&gt;首先应当明确的是，两者的规制主体范围是不同的，1996年文件针对的是所有企业和个人，而2017年文件仅限于跨境业务经营的企业；96年文件中“国际出入口信道”概念的外延仍然受到1998年《中华人民共和国计算机信息网络国际联网管理暂行规定实施办法》的限制，即其外延仅限于物理层面的信道，而2017年文件中的“专线”（含虚拟专用网络VPN）同时包含物理层面的信道以及虚拟专用网络。因此，前者（因“信道”的物理性而）不限制个人使用虚拟vpn，后者也（因规制主体不包括个人而）不限制个人使用虚拟vpn。&lt;/p&gt;
&lt;p&gt;另外，分析法条不能脱离于立法背景，之所以将17年、18年两份文件并列展示，是因为两者立法在“规制vpn”领域的意图是一致的——“部分企业违规自建传输网络、非法经营传输业务及违规经营跨境数据通信等问题仍较为突出”、“防范网络资源被用于非法经营”。其表明，相关文件的出台针对的是企业违规跨境经营以及无资质企业非法经营网络服务（包括云服务、CDN服务），但与个人访问境外网站皆无直接关系。&lt;/p&gt;
&lt;p&gt;值得一提的是，虽然上述文件是为了规制“企业违规使用vpn服务”的乱象，但其具体的措施却是将市场上一切没有相关资质的vpn服务全部一刀切，而相当多的vpn服务的主要受众是普通大众。因此，从名义上，政府规制的是企业违规跨境经营，但实际上对于个人用户访问境外网站产生了极为深远的消极影响，一个很直观的事实就是——自2018年以来，apple store的所有vpn软件全部下架。因此，其公开的立法目的和最后的政策效果是有很大差距的。&lt;/p&gt;
&lt;h2 id=&#34;当我们讨论翻墙行为究竟是否违法时我们首先应该讨论什么&#34;&gt;当我们讨论“翻墙行为”究竟是否违法时，我们首先应该讨论什么&lt;/h2&gt;
&lt;p&gt;我认为近些年人们对于“翻墙”的研究和讨论有些本末倒置了。&lt;/p&gt;
&lt;p&gt;行政法规作出一个禁止性规定，首先要有禁止的主体和对象。换言之，在我们讨论“翻墙违法性”之前，我们应当先讨论到底什么是“墙”，“墙”到底存不存在。&lt;/p&gt;
&lt;p&gt;这道墙在我们每个人眼中看来，显然它是事实存在的。我在上一篇文章提及一个想法——“在一个个生活事实和亲身体验中，人的大脑永远不会欺骗自己”。但是，生活事实和亲身体验很可能影响我们对于一件事情在法律意义上的判断——因为人们倾向于相信，如果一件事情在生活中是被事实禁止的，那么他就一定规定在了法条上。&lt;/p&gt;
&lt;p&gt;但实际上：&lt;/p&gt;
&lt;p&gt;没有任何一个公开的规范性文件规定过：个人不允许访问境外网站。&lt;br&gt;
没有一个哪怕是效力最低的红头文件敢声称：访问youtube、Twitter是违法的。&lt;br&gt;
如果你觉得有，请带着法条来找我（但请不要携带上述我提及的规范性法律文件来找我）。&lt;/p&gt;
&lt;p&gt;其实到这一段为止，关于个人翻墙的法律问题已经全部讲完了，但还没有形成完整的逻辑链。因为上文只解决了大前提的问题，若没有论证翻墙行为的本质这一小前提，那么就不能得出翻墙合法或违法的结论。因此在下面一节，我提前总结了技术方面的几个重要结论（虽然不是法律问题，不应放在这一章），它们的论证部分统一放在本文第四章，其论证过程是相当庞杂和啰嗦的，因此第四章仅供感兴趣的朋友们阅读。而对于大多数人来说，看完下一节的结论性总结（且无条件相信的话），对于个人翻墙问题的讨论实际上已经可以就此终结了。&lt;/p&gt;
&lt;h2 id=&#34;翻墙行为是否属于私自架设物理信道&#34;&gt;翻墙行为是否属于私自架设物理信道？&lt;/h2&gt;
&lt;p&gt;上文，我们明确了现行法对于个人上网的禁止性规定只限于“禁止违规搭建违法物理信道”，那么翻墙是否就是其字面意思——从一堵墙私拉一根网线翻过去呢？答案是否定的。&lt;/p&gt;
&lt;p&gt;在看完第四章的互联网技术讨论部分，你会对以下几个重要事实有基本的认识。&lt;br&gt;
（1）&lt;br&gt;
任何人通过任何手段访问任何境外网站，不管是合法手段还是非法手段，不管是访问合法网站还是有违法信息的网站，其必定要通过中国电信、中国联通和中国移动三家电信运营商（经批准）架设的陆上或海底光缆。因此，翻墙不可能违反关于“物理信道”的规定，如果有，那就是适用法律错误。&lt;br&gt;
（2）&lt;br&gt;
全球互联网的本来面貌并非是每一个国家都在各自为政，各自建立一个庞大的“局域网”，相反，几乎所有国家的网络都是互联互通的。有了国家之间建设的陆上、海底光缆，民众访问境内网站和境外网站从技术上是没有任何区别的，在现行法意义上也是没有任何区别的。&lt;br&gt;
（3）&lt;br&gt;
你不能访问境外网站唯一的原因，是你正在遭受DNS劫持、域名污染、DDOS攻击、TCP旁路阻断、BGP劫持（黑洞路由）等网络攻击或防御手段。（这些专业名词会在第四章详细介绍。）这些攻击防御手段只有技术人员才能感受到，普通人唯一的感受就是无法访问外网。当前没有任何公开的官方文件证实了上述攻击手段存在，现行法也没有为上述任何网络攻击手段提供合法性依据。&lt;br&gt;
（4）&lt;br&gt;
你通过任何手段进行翻墙，这一行为的本质是抵御或逃避上述网络攻击，并使用国家批准的合法互联网基础设施访问境外网站，不存在违法的问题，也没有实际的社会危害。&lt;/p&gt;
&lt;h1 id=&#34;提供翻墙方法-售卖翻墙服务的违法性&#34;&gt;提供翻墙方法、售卖翻墙服务的违法性&lt;/h1&gt;
&lt;p&gt;这一段虽然和本文主题“个人翻墙”并没有直接关系，但本文的结论和现行司法实践对于“出售翻墙工具”的论证是矛盾的，所以必须指出来。&lt;/p&gt;
&lt;p&gt;下图展示了可能涉及“翻墙”的罪名，我们主要关注第一类案由：“非法出售可访问境外互联网网站的&#39;VPN&#39;翻墙服务”，其对应的罪名是“提供侵入、非法控制计算机信息系统程序、工具罪”。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620380626725.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
目前出售翻墙服务是违法犯罪行为，相关的案例在无讼的检索结果中不计其数。法院判决的论述部分基本上与下面的引用大同小异：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;本院认为，被告人为牟取非法利益，违反国家规定，在互联网推广用于侵入计算机信息系统的程序、工具，情节特别严重，其行为已构成提供侵入、非法控制计算机信息系统的程序、工具罪。公诉机关指控的罪名成立。经查，本案的“XXX”软件，利用公用网络架设专用网络，并进行数据加密传输，使计算机信息系统自由访问中国境内无法访问的境外网站，因此，该软件属于“用于侵入计算机信息系统的程序、工具”。被告人在未经电信主管部门批准的情况下，提供的“XXX”软件使客户的计算机自由访问境外网站，数据传输受到加密保护，突破我国技术安全防护措施，危害了国家信息网络安全，符合提供侵入、非法控制计算机信息系统的程序、工具罪的客体。&lt;br&gt;
（2018）鄂1202刑初389号&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;自从我学习了这个罪名以来，就对此抱有极大的质疑。翻墙工具怎么可以等同于“用于侵入计算机信息系统的程序、工具”？&lt;/p&gt;
&lt;p&gt;一个最简单的反驳实例就是，GFW最早的原理是将google.com指向无效ip地址（即第四章论述的DNS污染/域名劫持），而最早的翻墙原理是在本地建立一个DNS库，将google.com指向真实的ip地址，或者使用8.8.8.8这样尚未被污染的DNS服务器，这样当你在浏览器键入google.com这一域名的时候，其就会访问正确的服务器。而这一行为的唯一操作步骤，就是打开windows的一个名为hosts的系统文件，将谷歌域名对应的ip地址录入，或者修改本地网卡的DNS设置，翻墙的效果就达成了。这样一个简单的步骤，怎么可能侵入了外人的计算机信息系统？&lt;/p&gt;
&lt;p&gt;而“架设专用网络，进行数据加密”是一个非常常用的网络应用，很简单的例子，在家里访问学校的图书馆以及学术资源，要打开vpn软件，这就是建立了一个加密通道，其和翻墙软件的原理是一模一样的，只存在结果上的不同。而这种技术突破“我国技术安全防护措施”的唯一原因，是由于这个所谓的“防护措施”会对你的网络请求进行分析，而加密流量很难被分析。况且，现行的规范性法律文件从没有提及这些法院判决中提到的“我国技术安全防护措施”。&lt;/p&gt;
&lt;p&gt;另一个很有意思的问题是法院判决中通常会提到的“使计算机信息系统自由访问中国境内无法访问的境外网站”。但看了本文第四章，你就会认识到，这个世界上的互联网的本来面貌，就是让每个人可以自由地访问不同国家的服务器，并且这种自由在2002年以前是普遍存在的，在2010年以前也是大部分人都能享受到的。除非真的有一部行政法规出台，告诉我个人不能访问境外网站，这样我才能理解法院竟然能给出这样的表述。&lt;/p&gt;
&lt;p&gt;另外，你可以洞察到，在法官论证部分，通常会有常人难以发现的跳跃性和滑坡论证。例如，“利用公用网络架设专用网络，并进行数据加密传输，使计算机信息系统自由访问中国境内无法访问的境外网站，因此，该软件属于“用于侵入计算机信息系统的程序、工具”。”这句话看似行云流水，但你细究下来，就会产生非常多的疑问——为什么一个工具可以自由访问原本无法访问的境外网站，就是侵入计算机信息系统的工具？为什么有些网站不能访问，其依据是什么？侵入的是哪一个计算机信息系统？该系统的ip地址是什么？地理位置具体在哪里？有什么相关规定吗？这种暧昧和含糊其辞其实不难理解，因为GFW这个词真的从未出现在某个文件上，但难以想象，“翻墙”这个词居然可以在相关的判决文书中随处可见。&lt;/p&gt;
&lt;p&gt;但是，我是绝对支持对一些市面上大部分出售翻墙工具的人进行惩罚的，因为他们之中很多人都只是偷窃了开源项目技术人员的劳动成果，亦或是提供与其宣称不符的劣质（违法）产品，从而收取暴利，收割智商税。从构成要件上看，我认为其更加符合非法经营罪的构成要件，而非提供侵入、非法控制计算机信息系统程序、工具罪，因为后者在论证上存在着严重的逻辑漏洞。&lt;/p&gt;
&lt;p&gt;另外，不仅仅是出售翻墙工具，还有很多技术人员因为编写开源翻墙项目而获此罪名。因此，这一领域的法律问题应该结合计算机技术问题被更深入、更广泛的探讨，这也是我写这一篇文章的初始动机。因为很多人确实需要通过境外网站查询学术资料、海淘等，这些行为都不存在违法性。而当他们使用翻墙工具访问境外网站大多不受惩罚的同时，惩罚却被转嫁到了提供翻墙方法的人之上。&lt;/p&gt;
&lt;p&gt;而与此同时，现在社会上出现一种声音，他们也同意国家根本不禁止个人翻墙，但他们更进一步表达了他们的自信和乐观，他们认为国家不仅不禁止翻墙，还鼓励有独立思考能力的人翻墙输出文化（依据是李子柒）；同时认为：对于真正有独立思考能力的人来说，翻墙实在是太容易了，甚至他们会用嘲讽的语气阴阳怪气道：“没有独立思考能力的人活该待在墙内”。这种风气我认为非常不好，毫不避讳地说，这是吃人血馒头的行为。因为他们不知道，真正致力于“为他们寻找访问境外网站方法”的人，大多承受着极大的法律风险，而与此同时，GFW的技术手段越来越强悍，翻墙的成本越来越高，普通人甚至很容易在这一领域被骗——对于这些问题，他们向来是采取无视态度的。如果让这种声音成为这个社会的主流，那么我对这一领域在未来进展的预测将是极其悲观的。&lt;/p&gt;
&lt;p&gt;更进一步，我们应当思考，当程序员为“人们正常访问合法境外网站”而努力的时候，法律工作者的努力又在哪里？为什么现在大部分法律工作者都在就着错误的计算机基本常识来进行法律方面的论证呢？我不禁陷入了深思……&lt;/p&gt;
&lt;h1 id=&#34;从计算机技术角度解读什么是墙什么是翻墙&#34;&gt;从计算机技术角度解读：什么是墙，什么是翻墙&lt;/h1&gt;
&lt;p&gt;在了解GFW和翻墙的原理之前，你必须对互联网运行的基本原理有一个宏观的了解——至少，你需要知道当你在浏览器键入baidu.com，页面呈现在你眼前时，究竟发生了什么。你只有知道发生了什么，才可能看懂GFW是怎么样阻止你访问网页，而翻墙又是如何让你穿越重重阻碍成功访问境外服务器的页面的。&lt;/p&gt;
&lt;h2 id=&#34;1-互联网访问的基本原理osi参考模型&#34;&gt;1、互联网访问的基本原理——OSI参考模型&lt;/h2&gt;
&lt;p&gt;我们之中一定有很多人还依稀记得高中、大学计算机课曾提及“互联网分成好几个层次”。最浅显易懂的当然是物理层，因为日常生活中，光纤、网线、电话线之类的东西是随处可见、看得见摸得着的。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620380709387.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
那么，关于GFW和翻墙的一切话题，都在上述模型中的哪一层呢？你以为他们在第一层（物理层），实际上他们分布在第三层（网络层）、第四层（传输层）和第七层（应用层）。&lt;/p&gt;
&lt;p&gt;为了让大家更好地理解这个“老千层饼”，我分别以访问baidu.com主页和境外服务器ip来简单阐述一下其过程中涉及的原理（对应OSI参考模型）。&lt;/p&gt;
&lt;h3 id=&#34;国内网站访问原理&#34;&gt;国内网站访问原理&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;在浏览器输入baidu.com&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;浏览器并不会直接聪明地找到百度的服务器。&lt;/p&gt;
&lt;p&gt;正如我们在使用传统电话时，不可能直呼一个朋友的名字，电话就自动打过去了——我们一定需要知道朋友的电话号码。此时baidu.com就相当于你的一个朋友的名字，而它的电话号码就是我们熟知的ip地址（第三层：网络层）。但我们不可能像记住朋友手机号那样记住baidu.com对应的ip地址39.156.69.79，而是需要一个电话号码簿替我们记住。这个电话号码簿有很多种，例如浏览器缓存（短时）、本地DNS缓存、hosts文件、网卡配置信息里的DNS服务器以及DNS根域名服务器，优先级从前到后。在上述所有“电话号码簿”中，都记载了“baidu.com=39.156.69.79”这样一个信息，当我们命令浏览器访问baidu.com时，（若浏览器缓存、本地DNS缓存、hosts文件都没有记载这位朋友的号码），那么浏览器就会使用UDP协议（第四层：传输层）向DNS服务器请求baidu.com背后的ip地址，DNS服务器域名系统解析（第七层：应用层）后返回正确的ip地址。&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;浏览器拿到ip地址后向正确的服务器发送http请求&lt;/p&gt;
&lt;p&gt;http协议（第七层：应用层）是建立在tcp协议（第四层：传输层）基础之上的的，tcp在建立连接前有三次握手。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;通过dns解析之后，拿到了ip，就可以通过ip向服务器发送http请求了，因为http是工作在第七层应用层，tcp是工作在第四层传输层，所以发生http请求之前，还会进行tcp的三次握手。&lt;/p&gt;
&lt;p&gt;tcp的三次握手是：客户端首先向服务器发送一个带有SYN标识和一个seq的随机数，服务端收到后，需要给客户端回应一个ack，ack的值就是刚才的seq随机数的值+1，在回应包里，还包含一个SYN的标识和一个seq随机数。客户端收到服务端发过来的回应包之后，再给服务端发送一个ack，ack的值就是刚才服务端发过来的seq的值+1。上面三步完成之后，三次握手就完成了，下面就可以开始传数据了。&lt;/p&gt;
&lt;p&gt;为什么建立连接要这么复杂呢？一切为了安全和可靠。DNS服务所运用的UDP协议和http请求的tcp协议最大的区别在于，UDP就像一个在国际货物运输过程中前赴后继、不顾一切的承运人，它努力以最快的速度把“货物”交付到你手上，但态度极差，从来不主动跟你联系，也不会接你的电话，货物是否损毁或者送错了人都不在它的义务范围内；而TCP就像一个严谨、可靠、负责、慢条斯理的承运人，它在为你进行货物运输时会不断和你建立联系，在送货前不停打电话跟你反复确认，而且要打三次，生怕送错了人，送完货物也会不紧不慢地和你再三确认，要跟你打四通电话。&lt;/p&gt;
&lt;p&gt;网上一个更形象的例子是——&lt;/p&gt;
&lt;p&gt;TCP 三次握手好比在一个夜高风黑的夜晚，你一个人在小区里散步，不远处看见一位漂亮妹子迎面而来，但因为路灯有点暗等原因不能100%确认，所以要通过招手的方式来确定对方是否认识自己。&lt;br&gt;
你首先向妹子招手(syn)，妹子看到你向自己招手后，向你点了点头挤出了一个微笑(ack)。你看到妹子微笑后确认了妹子成功辨认出了自己。&lt;/p&gt;
&lt;p&gt;但妹子有点不好意思，向四周看了一看，有没有可能你是在看别人呢？她也要确认一下。妹子也向你招了招手(syn)，你看到妹子向自己招手后知道对方是在寻求自己的确认，于是也点了点头挤出了微笑(ack)，妹子看到你的微笑后确认了你就是在向自己打招呼。于是两人加快步伐，走到一起，彼此之间相互拥抱。&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;数据包是如何从你在上海的计算机发至架设在北京的百度服务器呢？&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;tcp三次握手已经很生动形象了，但毕竟从上海发送一个数据包至百度架设在北京的服务器的难度，与“在小区里和美女当面互相打招呼”的难度压根不在一个数量级，数据包是如何通过祖国大地下架设的“杂乱无章”、连通全国的光纤中找到去往北京的最快的路，而不至于兜圈或者迷路呢？&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620382548778.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
这要得益于国内几家国有电信运营商建立的庞大的骨干网和城域网。我们作为外行，可以把这种网络理解成一个个互相连通的节点。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620382568209.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
例如，中国电信163骨干网分为北京、上海、广州3大片区，这三个片区有大型的骨干路由作为邻近省级区域的数据交汇中心，例如上海片区涵盖了上海、江苏、安徽、山东、浙江、福建、江西这几个省，而每个省的内部又有庞大的、互相连接的城域网，而在某个城市的城域网内部，又有数以万计的学校、企业、家庭等局域网的接入，从而形成了从局域网→城域网→广域网三个层级。&lt;/p&gt;
&lt;p&gt;此外，不只是中国电信，其他运营商也有各自的骨干网，例如中国联通有CHINA169骨干网和CNCNET骨干网，中国移动有CMNET全国骨干网……不同国家级互联网业务提供商（Internet Service Provider， ISP）建立的不同骨干网之间也有数据交换的中心，这使得信息和数据包可以自由地从全国的任何地方流向任何地方。（相关链接：《互联网骨干网全面解析》&lt;a href=&#34;https://zhuanlan.zhihu.com/p/32090927&#34;&gt;https://zhuanlan.zhihu.com/p/32090927&lt;/a&gt;）&lt;/p&gt;
&lt;p&gt;连通性的问题解决了，还要解决数据包在庞大的“网上公路”迷路的可能性。在上述提到的各个级别的网路中，分布着无数路由节点，每一张骨干网都有自己负责的路由群组和节点，整个群组统称为as自治系统（Autonomous system），每一个骨干网管理的as自治系统都经过名为互联网号码分配局的国际机构分配唯一识别代码，例如，中国电信163骨干网的as自治系统编号为AS4134。每一张骨干网都有内部路由协议，每一个节点都在依据某种规定互相交换他们所连通的ip地址信息，作为数据包在“旅行”过程中的指路人。而全国性的骨干网之间也依靠外部路由协议互相交换它们所掌握的“服务器地图“，典型的有BGP协议。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;边界网关协议（英语：Border Gateway Protocol，缩写：BGP），一个去中心化自治路由协议。它通过维护IP路由表或‘前缀’表来实现自治系统（AS）之间的可达性，属于矢量路由协议，其使用基于路径、网络策略或规则集来决定路由。&lt;br&gt;
维基百科 &lt;a href=&#34;https://zh.wikipedia.org/wiki/%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE&#34;&gt;https://zh.wikipedia.org/wiki/边界网关协议&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;BGP协议使得各大骨干网的路由节点可以以tcp数据包的形式互相转发其掌握的路由信息，从而形成一个庞大的、完整的决策网，对数据包提供全面的“导航服务”，它能计算出数据包从一个客户端通往另一个外省客户端必经的最优路线和路由节点。条条大路通罗马，当一个路由节点故障时，因为各个节点都互相沟通，从而可以带领数据包选择其他路线通网可达的节点，避免“兜圈子”、“迷路”等情况。&lt;/p&gt;
&lt;p&gt;使用traceroute（链接：https://tools.ipip.net/traceroute.php），可以利用ICMP 协议定位您的计算机和目标计算机之间的所有路由器节点。下图展示了我从自己的计算机访问百度设在北京的服务器39.156.69.79所经过的骨干网和路由节点，可以看见其经过了AS4812（中国电信163骨干网）的124.74.232.53、124.74.166.125等路由节点，而其途径的AS9808为中国移动骨干网的AS自治系统。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620382652706.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;传输数据，发送http请求报文，加载页面（省略）&lt;br&gt;
→http协议是明文协议&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;→https协议更加安全，其在tcp握手的基础之上增加了以下步骤：&lt;/p&gt;
&lt;p&gt;验证服务器数字证书、在SSL安全加密隧道协商加密算法的密钥等。&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;关闭连接前的tcp四次握手（省略）&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;境外网站访问原理&#34;&gt;境外网站访问原理&lt;/h3&gt;
&lt;p&gt;在了解了国内数据包交换原理之后，全球的数据交换就很好理解了——你可以简单地把它理解为国家级骨干网之间的连接和交换。而从国内访问境外服务器有一个特殊之处就在于，我国的国际出入口运营资质是被中国电信、中国联通、中国移动三家国家级ISP垄断的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;跨国企业使用跨境服务合规方式。跨国企业因协同办公、数据交互等自用需求，可以采用以下方式实现跨境联网：跨国企业从境内发起直接租用3家基础电信企业的国际专线（包括虚拟专网），与企业办公自用网络和设备连接；跨国企业从境外直接发起或委托境外运营商，向3家基础电信企业租用国际专线（包括虚拟专网），与企业办公自用网络和设备连接。跨国企业租用国际专线自建自用办公网络时，可委托有资质的第三方（含持国内IP-VPN、固定网国内数据传送等业务许可的企业）提供系统集成、代维代管等外包服务，但第三方企业不得从事国际专线（包括虚拟专网）的线路资源租售等电信业务经营活动。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;2018年1月10日在北京召开了《跨境数据通信业务政策宣贯会暨产业联盟筹备大会》，国内数十家IP-VPN等相关业务经营企业参加了此次大会。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;而国内数据跨境的物理传输介质一般为陆上光缆和海底光缆。通过上海直达美国的CN2骨干网海底光缆，亦或是从广州到香港的163骨干网线路的连接，国内和国外的数据完全可以自由地进行交换，而服务器的连接、数据包的交换、路由的选择，其本质上和访问国内服务器并没有什么区别，其协议的使用也是全球通用的。&lt;/p&gt;
&lt;p&gt;所以，一个真正的国际互联网并不存在所谓的“墙”，它依旧是通过海底光缆等物理介质，作为OSI模型中的第一层，为其他几个层次的互联网运行提供服务。不管你是否翻墙，不管你访问的是合法的境外网站还是受到管制和审查的网站，一旦你成功ping同，实现了数据的交换，那么数据包就一定要通过我国设立的互联网国际出入口，从一条条光缆直达国外的服务器。&lt;/p&gt;
&lt;p&gt;因此，我很遗憾地看到，即使是律所发表的相关文章&lt;a href=&#34;http://www.tenetlaw.com/index.php?m=content&amp;amp;c=index&amp;amp;a=show&amp;amp;catid=8&amp;amp;id=989&#34;&gt;《天衡解析 | “翻墙”上网的正确姿势》&lt;/a&gt;，也犯了非常严重的计算机常识性错误，导致该篇文章论证的前提就是不正确的。这篇文章指出：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;由于企业的“翻墙”行为既未使用合法的“国际出入口信道”，也未接入合法的“接入网络”，甚至未使用境内的“互联网络”，已经违反了《中华人民共和国计算机信息网络国际联网管理暂行规定》的规定，公安机关有权责令企业停止国际联网行为，同时给予警告，并处以15000元以下的罚款。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;然而， 当我们对互联网运行的机制和原理有了初步的了解后就能轻松发现这句标红的话的严重错误——我在上文所介绍的一切专业术语的实际运作，不管是DNS解析、TCP握手，还是AS自治系统、BGP、路由跳转、ICMP协议……一切的基础都是物理层。&lt;/p&gt;
&lt;p&gt;如果你没有接入各大运营商设立在城市里的合法的城域网；&lt;/p&gt;
&lt;p&gt;如果数据包没有经过各大国家级ISP的合法骨干网和路由节点AS自治系统；&lt;/p&gt;
&lt;p&gt;如果境外数据访问没有经过国内三大运营商经国家批准设立的合法国际出入口并通过合法的陆上、海底光缆设施直达境外服务器……&lt;/p&gt;
&lt;p&gt;你的一切数据交换和网站访问都是不可能凭空实现的。&lt;/p&gt;
&lt;p&gt;换句话说，即使一家企业使用某个国外代理服务器作为中转节点以逃避GFW的审查，这一翻墙行为的一切基础都是建立在使用合法的国家互联网基础设施之上的。因为你不可能自己去发射一颗卫星专门用来刷推特，也不可能自己制造海底电缆，自发地潜水到海底接入别的国家的网络。&lt;/p&gt;
&lt;p&gt;因此，对于普通个人和企业来说（这里的“普通”是指没有能力发射卫星、埋海底光缆），根本不存在所谓“非法的国际出入口信道”、非法的“接入网络”、“在不使用境内互联网络的前提下访问域外服务器”。&lt;/p&gt;
&lt;p&gt;一个最直接的证据，也是每个人都能亲身试验的方法，就是使用前文介绍的traceroute命令，访问某个境外服务器的ip地址，遍历数据包途经的骨干网和路由节点，你就会知道，你到底是不是在使用国家级电信运营商布建的、国家批准的网络基础设施了。我随机使用一个尚未被限制的境外服务器ip测试一下，结果如下：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620545692474.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
可见，当你成功访问境外服务器，当然也意味着成功实现了翻墙，但你的数据经过的是AS4812（中国电信上海路由群组）、AS4134（中国电信163骨干网路由群组），最后通过海底光缆直连美国加利福尼亚州洛杉矶的AS8100路由群组。你使用的一切光缆、路由节点、海底光缆，全都是经过工信部审批通过的国家级互联网基础设施。翻墙就是使用了非法的信道——这种逻辑是很可笑的。&lt;/p&gt;
&lt;p&gt;因此，国际出入口就在那里等着你，海底光缆也在向你招手，凭什么不能访问境外网站呢？在看了下文GFW原理和翻墙原理的介绍，你就会知道，你不能访问境外网站的唯一原因是你正在遭受一个不受法律规制的系统的不间断网络攻击，而你使用任何途径翻墙的基本原理永远都是——你使用了某种技术抵御或避免了上述网络攻击。&lt;/p&gt;
&lt;h2 id=&#34;gfw的原理&#34;&gt;GFW的原理&lt;/h2&gt;
&lt;p&gt;首先，我们反复强调，GFW这个概念在当前一切公开的规范性法律文件中都是不存在的。因此，对“翻墙”进行处罚、甚至将“翻墙”这个词写在一个法律文书中简直是无中生有、自取其辱，是非常荒谬的行为。&lt;/p&gt;
&lt;p&gt;其次，在学习了以下原理之后，你将清楚地认识到：现行法律规定的所谓“信道”都是在物理层的，而GFW和翻墙的较量基本上都发生在传输层、网络层、会话层、应用层（参见OSI模型）等等，这些层级是法外之地。&lt;/p&gt;
&lt;p&gt;在看下文之前，可以同时回顾——你究竟是如何能够访问一个网站的页面的。GFW目前已知的原理有以下几种：&lt;/p&gt;
&lt;h3 id=&#34;基于udp协议的域名解析服务劫持dns缓存污染&#34;&gt;基于UDP协议的域名解析服务劫持/DNS缓存污染&lt;/h3&gt;
&lt;p&gt;大家一定还记得那个电话号码簿的故事。GFW最早、最初始的原理，就是将这个电话号码簿掉包，或者将号码簿里的电话号码替换成错误的号码，这个原理诞生于2002年，在2012年以前达到高峰。GFW对所有经过骨干出口路由的基于UDP的DNS域名查询请求进行Intrusion Detection Systems（入侵检测系统）检测，一旦发现处于黑名单关键词中相匹配的域名查询请求，防火长城作为中间设备会向查询者返回虚假结果。&lt;/p&gt;
&lt;p&gt;简而言之，DNS域名污染就好比你想在电话号码簿上查询朋友的电话号码，但是不曾想，电话号码簿被人掉包了，你拿到的是假的电话号码簿，原本正确的手机号码被替换成了错误的号码，导致你无法打通电话。而该系统触发的规则使用了类似正则表达式的结构，例如规定“对于一切*.google.com的域名解析到某个不存在的ip地址”。&lt;/p&gt;
&lt;p&gt;直接使用windows的ping命令就可以亲眼看到DNS污染的运作效果。谷歌官网的服务器明明架设在美国科罗拉多丹佛，但从下图可以看见，在国内从DNS服务器请求到的ip地址却是93.46.8.90这个来自意大利的无效IP地址。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620545784700.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
此项技术不仅是2012年前后人们无法再访问Google的直接原因，其在运转过程中更是殃及了全球DNS域名解析服务的正常运作。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;种DNS污染的方式曾经向中国大陆以外的用户造成影响。2010年3月，当美国和智利的用户试图访问热门社交网站如facebook.com和youtube.com还有twitter.com等域名，他们的域名查询请求转交给中国控制的DNS根镜像服务器处理，由于这些网站在中国被封锁，结果用户收到了错误的DNS解析信息，这意味着防火长城的DNS污染已影响国际互联网。2010年4月8日，中国大陆一个小型ISP的错误路由数据，经过中国电信的二次传播，扩散到了整个国际互联网，波及到了AT&amp;amp;T、Level3、德国电信、Qwest和西班牙电信等多个国家的大型ISP。(来源:&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E9%98%B2%E7%81%AB%E9%95%BF%E5%9F%8E#TCP%E8%BF%9E%E6%8E%A5%E9%87%8D%E7%BD%AE&#34;&gt;维基百科&lt;/a&gt;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;DNS污染殃及全球用户的基本原理很简单，就是诸多国外用户的DNS请求被他们的ISP电信运营商随机分发给了全球的根域名缓存服务器（也就是那个优先级最低的电话簿），而碰巧，他们请求被分发给了来自中国的根域名服务器，而因为GFW的存在，其提供的是错误的、虚假的DNS解析服务，其造成的后果可想而知。&lt;/p&gt;
&lt;p&gt;因此在这里我忍不住插一句题外话。我曾亲耳听见一个计算机专业毕业的人谈及中国的互联网安全现状。他说，因为全球大部分根域名服务器都设立在美国，所以美国掌握互联网的底层，中国必须建立GFW来保障互联网安全。现在，你应该可以体会到这种言论的恶毒之处。因为现在你终于了解到，电话簿可以随时复制，根域名服务器根本就不是什么互联网的底层，而是最高层（应用层）中一个很简单的技术，你的浏览器永远最先访问本地DNS缓存，往往一般都无须根域名服务器就能解析IP地址；而中国的根域名服务器会对境外服务器域名解析错误的ip地址，因此现实情况是中国的DNS污染在影响全球的互联网运行，而非美国影响了中国的互联网安全，这是完全的颠倒是非。&lt;/p&gt;
&lt;h3 id=&#34;ip地址或传输层端口人工封锁bgp路由劫持路由黑洞&#34;&gt;IP地址或传输层端口人工封锁——BGP路由劫持/“路由黑洞”&lt;/h3&gt;
&lt;p&gt;我们依稀记得BGP好像是各个ISP主干网之间路由节点共享信息的协议，BGP劫持就是伪造位于主干道的路由节点的路由表，将其根本没有或者不可能连通的ip地址导入路由表，诱骗邻近节点相信该节点拥有这一ip地址的访问通道。GFW通过人工方式维护一个针对特定IP地址封锁的列表，从而实现特定ip地址的路由欺骗，这样一个节点我们将其称之为“路由黑洞”。因为基于BGP协议，各个节点之间是无条件信任的，所以这个“谎言”一传十、十传百，只要一个主干道路由节点被诱骗，其连接的所有节点都会被骗，成为GFW运作的&amp;quot;帮凶&amp;quot;。而BGP劫持的“可传染性”特征曾经导致全球互联网访问故障。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;2010年4月8日，中国大陆一个小型ISP的错误路由数据，经过中国电信的二次传播，扩散到了整个国际互联网，波及到了AT&amp;amp;T、Level3、德国电信、Qwest和西班牙电信等多个国家的大型ISP。&lt;br&gt;
A Chinese ISP Momentarily Hijacks the Internet. PC World. 2010-04-09 [2011-05-19]. （原始内容存档于2011-06-22）.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;我们依旧可以通过traceroute观察到这一技术的运行效果，我们尝试traceroute一下google.com的真实ip地址，得到如下结果：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620545943807.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
可以看见，当数据包跳转给中国电信上海AS4812群组的101.95.120.166路由节点之后，就再也跟踪不到数据包的踪迹了。这是因为在这一节点，存在着一个无效的路由黑洞，其声称自己拥有172.217.24.12这一ip地址的访问可达性，但话音刚落，它就把数据包丢弃在角落了……&lt;/p&gt;
&lt;p&gt;与此同时，骨干路由器还有一种ACL Based Forwarding (ABF)的匹配规则，可以在全国骨干路由器同步步数ip端口封锁规则，由于理解不太深入，这里不做专门介绍。&lt;/p&gt;
&lt;p&gt;另外，在路由黑洞成为封锁ip的主要途径以前，GFW在早期使用的是访问控制列表（ACL）技术来封锁特定的IP地址，但这种方法有性能不佳的问题。这里不做专门介绍。&lt;/p&gt;
&lt;h3 id=&#34;tcp-rst重置包括对基于tcp协议的dns域名解析的重置&#34;&gt;TCP RST重置（包括对基于TCP协议的DNS域名解析的重置）&lt;/h3&gt;
&lt;p&gt;我们依稀记得TCP建立连接前的三次握手，也一定还记得那天在小区里与美女浪漫的邂逅。将TCP RST重置套用到这个浪漫的故事里，可以直接表现为：当你对着妹子招手时，旁边突然冲出来一陌生男子骗你说，“对不起，这是我的女朋友，请不要打扰她”；而随后，他又挡在你面前伪装成你的样子，冲向那位女子说，“刚刚招手的就是我，你别误会，我根本就不是在跟你打招呼，我只是在打蚊子，拜拜”——这个生动的故事为我们展现了，一个无耻的第三人就这样强行闯入了一个纯洁男子和妙龄女子的浪漫邂逅。&lt;br&gt;
RST阻断也称为TCP旁路阻断，其运行的原理如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;通常需要进行阻断的情况是审计控制系统旁路监听内网。旁路监听的方式一般是将主交换机的数据镜像到控制系统，控制系统可以采用libpcap捕获数据包。在这种情况下要阻断tcp连接的建立只要在监听到第一次握手的时候，控制系统伪造服务器发起第二次握手回应，就能阻断客户端与服务器连接的建立。因为我们的系统在内网，发出的报文肯定比服务器快，这样客户端接收到我们伪造的报文以后会回应第三次握手，当服务器真正的报文到达的时候客户端将不再处理，此时客户端再向服务器请求数据，因为seq号和ack号出错，服务器不会受理客户端的请求。&lt;br&gt;
版权声明：本文为CSDN博主「pluton」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。 原文链接：&lt;a href=&#34;https://blog.csdn.net/pluton/java/article/details/5816227&#34;&gt;https://blog.csdn.net/pluton/java/article/details/5816227&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;TCP协议规定，只要看到RST包，连接立马被中断。从浏览器里来看就是连接已经被重置。大部分的RST是条件触发的，比如URL中包含某些关键字。目前享受这种待遇的网站就多得去了，著名的有facebook。还有一些网站，会被无条件RST。也就是针对特定的IP和端口，无论包的内容就会触发RST。比较著名的例子是https的wikipedia。GFW在TCP层的应对是利用了IPv4协议的弱点，也就是只要你在网络上，就假装成任何人发包。所以GFW可以很轻易地让你相信RST确实是Google发的，而让Google相信RST是你发的。&lt;br&gt;
《G.F.W的原理》 &lt;a href=&#34;http://www.oneyearago.me/2019/06/14/learn_gwf/&#34;&gt;http://www.oneyearago.me/2019/06/14/learn_gwf/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;与此同时，DNS解析服务并非全部都使用UDP协议，也有部分使用TCP协议的DNS解析请求，其被封禁也是依靠TCP的RST重置，&lt;br&gt;
通过这一技术的反推，有业内人士定位了GFW存在的大致位置。其原理如下：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;IP协议的特性叫TTL。TTL是Time to Live的简写。IP包在每经过一次路由的时候，路由器都会把IP包的TTL减去1。如果TTL到零了，路由器就不会再把IP包发给下一级路由。由于GFW会在监听到不和谐的IP包之后发回RST包来重置TCP连接。那么通过设置不同的TTL就可以知道从你的电脑，到GFW之间经过了几个路由器。比如说TTL设置成9不触发RST，但是10就触发RST，那么到GFW就是经过了10个路由器。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;另外一个IP协议的特性是当TTL耗尽的时候，路由器应该发回一个TTL EXCEEDED的ICMP包，并把自己的IP地址设置成SRC（来源）。结合这两点，就可以探测出IP包是到了IP地址为什么的路由器之后才被GFW检测到，结合IP地址地理位置的数据库就可以知道其地理位置。&lt;br&gt;
《G.F.W的原理》 &lt;a href=&#34;http://www.oneyearago.me/2019/06/14/learn_gwf/&#34;&gt;http://www.oneyearago.me/2019/06/14/learn_gwf/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620546389143.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h3 id=&#34;协议检测根据流量协议拆包关键词匹配封锁&#34;&gt;协议检测→根据流量协议拆包→关键词匹配→封锁&lt;/h3&gt;
&lt;p&gt;我们在上面一段曾了解到，GFW的TCP旁路阻断的前提是“将主交换机的数据镜像到控制系统”。这其实也是目前业内猜测的 GFW系统存在的主要方式——GFW存在于骨干路由器节点，其作为一个设备附着在主干路由器身边，通过“分光”的方式把数据包复制到另外一根光纤上。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620546425631.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
基于此，GFW作为一个独立设备就可以作为旁观者分析经过其附着的主干路由器的所有数据包。&lt;/p&gt;
&lt;p&gt;HTTP协议有非常明显的特征，可以轻易被GFW系统检测和识别，GFW进而依据HTTP协议规则对数据包进行拆解，由于其表现为明文，所以可以直接进行关键词匹配。例如，从HTTP的GET请求中取得请求的URL。然后GFW拿到这个请求的URL去与关键字做匹配，比如查找Twitter是否在请求的URL中。而关键字匹配使用的依旧是一些高效的正则表达式。&lt;/p&gt;
&lt;h3 id=&#34;深度包检测机器学习识别翻墙流量直接阻断&#34;&gt;深度包检测（机器学习识别翻墙流量→直接阻断）&lt;/h3&gt;
&lt;p&gt;当前流行的一切翻墙协议例如shadowsocks、v2ray的VMess 协议等不具有非常显著的特征，而后者可以伪装成其他类型的流量，例如伪装成微信视频等。但无论如何，对于混淆流量和非传统加密协议，GFW正在使用大家耳熟能详的“人工智能”技术，将这些各种各样难以判断和识别的翻墙流量与正规的政企跨境流量相区分开来。&lt;/p&gt;
&lt;h3 id=&#34;ddos攻击&#34;&gt;DDoS攻击&lt;/h3&gt;
&lt;p&gt;不再展开论述，可参考近年来Github网站遭受的攻击。&lt;/p&gt;
&lt;h2 id=&#34;翻墙的原理&#34;&gt;翻墙的原理&lt;/h2&gt;
&lt;p&gt;这一部分我不再展开论述，因为是有法律风险的。有一定网络基础知识的人，在看完上述GFW原理之后，应当能够头脑风暴一下，想出很多合理的逃避审查的思路，也能理解为什么我在上文提及“翻墙不等于侵入计算机系统”了。主要的翻墙原理有以下几种。&lt;/p&gt;
&lt;p&gt;（1）早期对DNS污染的应对——给hosts文件添加一个离线库就行了&lt;br&gt;
（2）各种奇形怪状的加密协议，包括流量伪装，避免被直接拆包作关键词审查&lt;br&gt;
（3）无视GFW发送的RST重置数据包（无视那个第三人，继续暧昧的相遇）&lt;br&gt;
（4）连接境外未被封禁的代理服务器作为中转站，逃过GFW的ip封锁&lt;br&gt;
……&lt;/p&gt;
&lt;h1 id=&#34;结语&#34;&gt;结语&lt;/h1&gt;
&lt;p&gt;在文章结尾，我依旧要强调，本文不涉及有关“翻墙”的任何技术指导或方法的具体介绍，同时必须强调——千万不要翻墙访问、发布、传播违法有害信息。&lt;/p&gt;
&lt;p&gt;我们很多人都记得2012年以前的那个时代，想要用谷歌搜索资料，只需要修改DNS服务器为8.8.8.8即可，再不济，改个hosts文件就行了。现在，越来越多的方法被封锁了，在这个节骨眼上，居然还有很多人盲目乐观，甚至以他人不懂翻墙而沾沾自喜，这样的现象伴随着民族主义思潮愈演愈烈。&lt;/p&gt;
&lt;p&gt;但是我相信，认真学习自己的专业知识，同时广泛地接受和学习其他领域的专业知识，就能轻松避免被网上大肆输出情绪的人鼓动和欺瞒，保持冷静地思考——你真的可以对现状有一个清晰的认识和判断，并在不久的将来参与到各行各业的运行过程中，为社会做出贡献。&lt;/p&gt;
&lt;p&gt;而这篇文章，就权当我在学习之余的放松心情、自娱自乐罢。&lt;/p&gt;
&lt;p&gt;那么现在，你能否就程序员群体提出的以下选择题给出正确解答了呢？&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620546621696.webp&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
">个人使用vpn"翻墙"是否违法？——基于规范性法律文件、案例以及相关计算机技术的分析与讨论</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/UdDINeaAU/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;作者：欧洲金靴&lt;br&gt;
链接：&lt;a href=&#34;https://www.zhihu.com/question/455705530/answer/1852406576&#34;&gt;https://www.zhihu.com/question/455705530/answer/1852406576&lt;/a&gt;&lt;br&gt;
来源：知乎&lt;br&gt;
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;调休制度实在是反动，不论是官定还是资定。&lt;/p&gt;
&lt;p&gt;看似一口气放五天假、七天假、八天假，但统统会在前后的双休中找回来。等于是“借你的双休，来补足我设立的法定假期额度”。&lt;/p&gt;
&lt;p&gt;可问题是，这双休也是打工人本就法定的自有假期，你这一“借”，归还否？&lt;/p&gt;
&lt;p&gt;“借”的时候，商量否？本身所有的所谓“三天假”都会克扣双休，这种操作放在996的大背景下就更加让人崩溃：原本就已然996的状态，却又因为小长假的“寻补”而继续进一步攫取压榨双休。&lt;/p&gt;
&lt;p&gt;为了促成五天假、七天假的实现，反而让长假前后的996更恶化了一个层次，直接堂而皇之地变成了007：“辛苦点，下礼拜给你一连放五天……”&lt;/p&gt;
&lt;p&gt;这就是在劳资双方的经济与政治地位均不平等的情况下，关于时间的分配权、假期的操控权完全为资本所控。&lt;/p&gt;
&lt;p&gt;恩格斯曾描述过19世纪英国的工厂：“工人是禁止携带自己的钟表的，对于时间的定义也成为了资本家的特权。工人的工作时间要以工厂的时钟为准，而资本家和他的监工们往往会常常在时钟上做手脚：上班时先把时钟拨早一些，下班时又把时钟拨晚一些，通过增加工作时长剥削过多的剩余价值。”&lt;/p&gt;
&lt;p&gt;这与今天利用所谓的调休制度对假期设置进行干预操纵，难道不是一回事吗……&lt;/p&gt;
&lt;p&gt;从宏观舆论观察，似乎还要求打工人为这个赏给你的五天假、七天假感恩戴德，并会相当义正辞严、理直气壮地提醒你：“一口气放这么长时间的假，可别光想着休息啊！在家要常看看钉钉、企业WeChat……”&lt;/p&gt;
&lt;p&gt;这属于温水煮你的同时，还当着你的面明目张胆地往你屁股底下加柴火。&lt;/p&gt;
&lt;p&gt;集中时长加班所造成的身心两方面的伤害，这难道可以通过一口气睡它个五天五夜找补回来吗？&lt;/p&gt;
&lt;p&gt;更何况，这小长假也不是让你单纯休息的，是让你出门去消费的！哪怕这门外人山人海、各个景点被堵的水泄不通，你也必须消费，否则从拉动内需的角度你就是一个没有价值贡献的人。&lt;/p&gt;
&lt;p&gt;可是那些端坐高台的人似乎忘了，人们并不是不愿意消费、放松、逛街、吃喝，但这些理应置于规律性的周末双休中，而不是挤破头、让人窒息的五一/十一/春节小长假。&lt;/p&gt;
&lt;p&gt;最后的最后，工作时创造的价值和休息时消费的回馈全部归了企业，然而一切的代价则丢给自己承担。&lt;/p&gt;
&lt;p&gt;如19世纪美国马萨诸塞州一个鞋厂的监工说的话：“让一个身强力壮体格健全的18岁小伙子，在这里的任何一架机器旁边工作，我能够使他在22岁时头发变成灰白。”&lt;/p&gt;
&lt;p&gt;列宁在《论意大利社会党党内的斗争》中有指出：“只要阶级还没有消灭，任何关于一般自由和平等的谈论都是欺骗自己，或者是欺骗工人、欺骗全体劳动者和受资本剥削的人。无论如何，也是在维护资产阶级的利益罢了。”&lt;/p&gt;
&lt;p&gt;在一个实质性没有工会也没有任何区域性工人组织的情况下，目前的劳资局面很让人无语，早已失去集体庇护的工人阶级几乎是没有议价权和话语权的。&lt;/p&gt;
&lt;p&gt;甚至，他们压根连多余的、去进行“团结”的时间都没有，连发一条“我今天好累啊”的动态都没有时间。&lt;/p&gt;
&lt;p&gt;他们只是机器。休息的时间是什么？表象是为再生产提供蓄力，本质则是一份人权的落地，是民本之自由的一部分。&lt;/p&gt;
&lt;p&gt;工人理应享有休息与定义休息的权力。&lt;/p&gt;
&lt;p&gt;自由一旦被禁锢，其实对于规模化生产也是弊大于利的。这也是诸多行业眼下产生“内卷”现象的缘由之一，所以我说这种调休制度实为反动。&lt;/p&gt;
&lt;p&gt;如果还是回到大的宏观角度而论，阶级的自由如果被锁缚，则必将羁绊这个阶级的前进步伐。&lt;/p&gt;
&lt;p&gt;仍以列宁的观点为导：“资产阶级利用自由，是为了高枕无忧；无产阶级需要自由，是为了更广泛地开展争取社会主义的斗争。”（《地方自治局的迫害者和自由主义的汉尼拔》）&lt;/p&gt;
&lt;p&gt;前天4月22日是列宁151周年的纪念日，舆论追忆声浪寥寥；而近日一则“工人讨生活费被喷辣椒水”的新闻，流量同样被压低埋没……&lt;/p&gt;
&lt;p&gt;五一国际劳动节在即，这个为劳动者唱赞歌的政治节日倒是因为对劳动者极不友好的放假现状而登上了热搜，这太过讽刺了。&lt;/p&gt;
">2021年五一假期，调休之后实际只放假一天，为什么没有「不调休」的假期？</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/Computer-Networks-Overview/"" data-c="
          &lt;blockquote&gt;
&lt;p&gt;版权声明&lt;br&gt;
本博客所有的原创文章，作者皆保留版权。转载必须包含本声明，保持本文完整，并以超链接形式注明作者编程随想和本文原始地址：&lt;br&gt;
https://program-think.blogspot.com/2021/03/Computer-Networks-Overview.html&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;本文的目标读者&#34;&gt;本文的目标读者&lt;/h1&gt;
&lt;p&gt;今天这篇的标题是“扫盲”，也就是说：即使那些完全不懂 IT 领域，也不懂通讯领域的读者，依然能看懂（至少能看懂一部分）。为了做到这点，俺会尽量使用通俗的比喻，并适当加一些示意图。&lt;br&gt;
　　另外，就算你已经比较了解网络通讯领域，本文中提到的某些部分，也可能是你所不知道的。也就是说：懂行的同学，看看此文，也会有帮助。&lt;br&gt;
　　本文的标题特地强调了【系统性】——俺希望这篇教程能帮助读者对“计算机网络”这个领域进行系统性学习（何为“系统性学习”？请看&lt;a href=&#34;https://program-think.blogspot.com/2019/10/Systematic-Learning.html&#34;&gt;这篇教程&lt;/a&gt;）&lt;br&gt;
　　为了做到【系统性】这个目的，这篇教程很长。俺开博12年，这篇的长度估计能排到前5名。建议大伙儿慢慢看，不要着急。&lt;/p&gt;
&lt;h1 id=&#34;基本概念&#34;&gt;基本概念&lt;/h1&gt;
&lt;p&gt;为了足够通俗，俺先要介绍一些基本概念。&lt;/p&gt;
&lt;h2 id=&#34;信道channel&#34;&gt;信道（&lt;a href=&#34;https://en.wikipedia.org/wiki/Communication_channel&#34;&gt;channel&lt;/a&gt;）&lt;/h2&gt;
&lt;p&gt;这是通讯领域非常基本的概念，肯定要先聊聊它。&lt;br&gt;
　　通俗地说，信道就是“传送信息的通道”。&lt;/p&gt;
&lt;h3 id=&#34;信道的类型&#34;&gt;信道的类型&lt;/h3&gt;
&lt;p&gt;首先，信道可以从广义上分为“物理信道 ＆ 逻辑信道”。&lt;br&gt;
　　顾名思义，“物理信道”就是直接使用某种【物理介质】来传送信息；至于“逻辑信道”——是基于“物理信道”之上抽象出来的玩意儿（待会儿讲到“协议栈”的时候再聊）。&lt;/p&gt;
&lt;h3 id=&#34;信道的带宽&#34;&gt;信道的带宽&lt;/h3&gt;
&lt;p&gt;“带宽”指的是：某个信道在单位时间内最大能传输多少比特的信息。&lt;br&gt;
　　请注意：&lt;br&gt;
　　电气领域 ＆ 计算机领域都有“带宽”这个概念，但两者的定义不太一样。电气领域所说的“带宽”指的是“模拟带宽”，单位是“赫兹/Hz”；计算机领域所说的“带宽”指“数字带宽”，单位是“比特率”或“字节率”。&lt;br&gt;
　　后续章节提到“带宽”，都是指计算机领域的术语。&lt;/p&gt;
&lt;h3 id=&#34;带宽的单位容易把外行绕晕&#34;&gt;带宽的单位——容易把外行绕晕&lt;/h3&gt;
&lt;p&gt;“比特率”或“字节率”很容易搞混淆。用英文表示的话——大写字母 B 表示【字节】；小写字母 b 表示【比特】。&lt;/p&gt;
&lt;p&gt;由于带宽的数字通常很大，要引入“K、M、G”之类的字母表示数量级，于是又引出一个很扯蛋的差异——“10进制”与“2进制”的差异。&lt;br&gt;
　　【10进制】的 K 表示 1000；M 表示 1000x1000（1百万）&lt;br&gt;
　　【2进制】的 K 表示 1024（2的10次方）；M 表示 1024x1024（2的20次方）&lt;br&gt;
　　为了避免扯皮，后来国际上约定了一个规矩：对【2进制】的数量级要加一个小写字母 i。比如说：Ki 表示 1024；Mi 表示 1024x1024 ...... 以此类推。&lt;br&gt;
　　举例：&lt;br&gt;
　　1Kbps 表示“1000比特每秒”&lt;br&gt;
　　1KiBps 表示“1024字节每秒”&lt;/p&gt;
&lt;h3 id=&#34;信道的工作模式单工-vs-半双工-vs-全双工&#34;&gt;信道的工作模式：单工 VS 半双工 VS 全双工&lt;/h3&gt;
&lt;p&gt;再来说说信道的工作模式。大致可以分为如下三种。为了让大伙儿比较好理解，俺对每一种都举相应的例子。&lt;/p&gt;
&lt;p&gt;1. 单工（simplex）&lt;br&gt;
　　比如“电台广播”就是典型的【单工】。“电台”可以发信号给“收音机”，但“收音机”【不能】发信号给“电台”。&lt;/p&gt;
&lt;p&gt;2. 半双工（half-duplex）&lt;br&gt;
　　比如“单条铁路轨道”，就是典型的【半双工】。火车在单条铁轨上，可以有两种运行方向；但对于同一个瞬间，只能选其中一个方向（否则就撞车了）。&lt;/p&gt;
&lt;p&gt;3. 全双工（full-duplex）&lt;br&gt;
　　比如“光纤”就是典型的【全双工】。在同一根光导纤维中，可以有多个光束【同时相向】传播，互相不会干扰对方。&lt;/p&gt;
&lt;h2 id=&#34;端点&#34;&gt;端点&lt;/h2&gt;
&lt;p&gt;为了叙述方便，俺把参与通讯的对象（主体）称作“通讯端点”，简称“端点”。&lt;br&gt;
　　这里的“端点”是广义的，可以是硬件（比如某个网卡），也可以是软件（比如某个应用程序）。&lt;/p&gt;
&lt;h2 id=&#34;通讯协议protocol&#34;&gt;通讯协议（protocol）&lt;/h2&gt;
&lt;p&gt;所谓的“通讯协议”就是：参与通讯的各方所采用的某种【约定】。只有大家都遵守这个约定，才有可能相互传递信息。&lt;br&gt;
　　打个比方：如果两个人要用自然语言交流，前提是：双方使用相同（或相互兼容）的自然语言。&lt;br&gt;
　　“通讯协议”就类似某种自然语言，参与通讯的多个端点，都必须能理解这个语言。&lt;/p&gt;
&lt;h1 id=&#34;从分层到参考模型&#34;&gt;从“分层”到“参考模型”&lt;/h1&gt;
&lt;h2 id=&#34;分层&#34;&gt;分层&lt;/h2&gt;
&lt;p&gt;在聊“分层”之前，先说说“分工”。比如在一个公司中，通常设有不同的工种/岗位，这就【分工】。&lt;br&gt;
　　对于网络通讯也是如此，不太可能用一种通讯协议完成所有的信息传递任务（注：对于特别简单的网络，或许有可能只用单一协议；但如今的网络通讯已经很复杂，用【单个】通讯协议包办所有事情，已经不太可能）&lt;br&gt;
　　一旦采用了多种通讯协议，这几种协议之间，该如何配合捏？&lt;br&gt;
　　在网络通讯领域，采用的是【分层】的设计思路。多个层次的协议在一起协同工作，技术上称作“协议栈”（洋文叫做“protocol stack”）。&lt;/p&gt;
&lt;h2 id=&#34;协议栈的原理&#34;&gt;协议栈的原理&lt;/h2&gt;
&lt;p&gt;对于多层次的协议栈。每个层次都有各自的“端点”（进行通讯的主体）。处于【同一层次】的两个端点会使用该层次的协议进行通讯（注：同一个层次的协议，可能只有一个，也可能有多个）。&lt;br&gt;
　　除了最顶层，每个层次的端点会向其【直接】上层提供“服务”；除了最底层，每个层次的端点会调用【直接】下层提供的“服务”（这里所说的“服务”指某种“编程接口”，技术行话叫 API）。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620103298802.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620103316148.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;逻辑信道&#34;&gt;逻辑信道&lt;/h2&gt;
&lt;p&gt;（前一个小节说了）每个层次会向上一个层次提供服务（API 调用）。对上层而言，调用下层提供的 API 发送信息，其效果相当于在使用某种【信道】进行通讯，这也就是俺在 ★基本概念 那个章节所说的“逻辑信道”。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620103332581.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;数据格式的原理&#34;&gt;数据格式的原理&lt;/h2&gt;
&lt;p&gt;大部分协议会把要传送的数据切割为 N 份，每一份就是一个数据包。&lt;br&gt;
　　通常来说，数据包的格式有如下三部分：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;头部&lt;br&gt;
身体（也称作“有效载荷”）&lt;br&gt;
尾部（注：很多协议没有尾部）&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果你收过快递，可以把“网络数据包”与“快递包裹”作一个对照——&lt;br&gt;
数据包的“头/尾”，就类似于快递包裹的【包装袋】。数据包的“身体”，就类似于快递包裹里面的东西。&lt;/p&gt;
&lt;p&gt;对于【相邻】两层的协议，【下】层包含【上】层。也就是说：下层协议的【载荷】就是上层协议的【整体】。&lt;br&gt;
　　还是以快递举例：&lt;br&gt;
　　假设你从网上买了一台笔记本电脑。电脑出厂时，电脑厂商肯定会提供一个包装盒。快递公司在寄送这台笔记本的时候，又会在笔记本的盒子外面再加一个包装袋。对应到网络协议——“快递公司的包装袋”相当于【下层】协议；“电脑厂商的包装盒”，相当于【上层】协议。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620103392411.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;网络分层的参考模型&#34;&gt;网络分层的参考模型&lt;/h2&gt;
&lt;p&gt;上述所说的“分层 ＆ 协议栈”只是一个抽象的（笼统的）思路。具体要分几层？每一层要干啥事儿？这些都是很有讲究滴！网络技术发展了几十年，已经有很多牛人提出了各种不同的划分方案，称之为“网络分层的参考模型”（为了打字省力，以下简称“模型”）。&lt;br&gt;
　　在各种模型中，名气最大的当然是“OSI 模型”（洋文称作“&lt;a href=&#34;https://en.wikipedia.org/wiki/OSI_model&#34;&gt;OSI model&lt;/a&gt;”）。在后续的章节中，俺会以这个模型为主体，进行介绍。&lt;br&gt;
　　除了“OSI 模型”还有一个很出名的模型是“TCP/IP 模型”（因为互联网很成功，它才跟着出名）。&lt;br&gt;
　　对“TCP/IP 模型”的分层，不同的文章或书籍，说法不太一样（“3层、4层、5层”皆有），这就引发了一些争议。包括几位热心读者也在博客留言，表达不同意见。为了避免一家之言，贴出维基百科的“&lt;a href=&#34;https://en.wikipedia.org/wiki/Internet_protocol_suite#Layer_names_and_number_of_layers_in_the_literature&#34;&gt;这个链接&lt;/a&gt;”，其中给出了几种比较有名的说法。&lt;br&gt;
　　另外，俺想提醒一下：&lt;br&gt;
　　由于本文是基于【OSI 模型】进行展开。对于 TCP/IP 模型到底算几层，这方面的争论【不】影响本文后续的内容。&lt;/p&gt;
&lt;h1 id=&#34;osi-概述&#34;&gt;OSI 概述&lt;/h1&gt;
&lt;h2 id=&#34;osi-的历史&#34;&gt;OSI 的历史&lt;/h2&gt;
&lt;p&gt;OSI”的全称是“Open System Interconnection”。先说说它的历史。&lt;br&gt;
　　上世纪70年代，“国际电信联盟”（ITU）想对各国的电信系统（电话/电报）建立标准化的规格；与此同时，“国际标准化组织”（ISO）想要建立某种统一的标准，使得不同公司制造的大型主机可以相互联网。&lt;br&gt;
　　后来，这两个国际组织意识到：“电信系统互联”与“电脑主机互联”的性质差不多。于是 ISO 与 ITU 就决定合作，两家一起干。这2个组织的2套班子，从上世纪70年代开始搞，搞来搞去，搞了很多年，一直到1984年才终于正式发布 OSI 标准。&lt;/p&gt;
&lt;h2 id=&#34;osi-标准的两个组成部分&#34;&gt;OSI 标准的两个组成部分&lt;/h2&gt;
&lt;p&gt;严格来讲，OSI 包括两大部分——&lt;br&gt;
其一，抽象的概念模型，也就是前面提到的【OSI model】；&lt;br&gt;
其二，针对这个概念模型的具体实现（具体的通讯协议），洋文叫做【OSI protocols】。&lt;/p&gt;
&lt;p&gt;（前面说了）OSI 是由 ISO ＆ ITU 联手搞出来滴。这两个国际组织里面的人，要么是来自各国的电信部门，要么是来自各国的高校学者。总而言之，既有严重的官僚风气，又有明显的学究风气。（正是因为这两种风气叠加，所以搞了很多年，才搞出 OSI）&lt;br&gt;
　　OSI 的协议实现（OSI protocols），不客气地说，就是一堆垃圾——据说把 OSI protocols 所有的协议文档，全部打印成 A4 纸，摞起来得有一米多高！是不是很吓人？协议搞得如此复杂，严重违背了 IT 设计领域的 KISS 原则。&lt;br&gt;
　　由于 OSI protocols 实在太复杂，后来基本没人用。但 OSI model 反而广为流传，并且成为“网络分层模型”中名气最大，影响力最广的一个。&lt;br&gt;
　　因此，本文后续章节中，凡是提到 OSI，指的是【OSI model】。&lt;/p&gt;
&lt;h2 id=&#34;osi-模型的7层&#34;&gt;OSI 模型的7层&lt;/h2&gt;
&lt;p&gt;OSI 模型总共分7层，示意图参见如下表格：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620103709930.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
考虑到本文是针对一般性读者的【扫盲教程】，俺重点聊第1~4层。搞明白这几个层次之后，有助于你更好地理解网络的很多概念，也有助于你更好地理解很多信息安全的概念。&lt;br&gt;
　　网上已经有很多关于 OSI 的文章，可惜大部分写得粗糙——很多文章只是在照抄定义。&lt;br&gt;
　　俺曾经写过一篇&lt;a href=&#34;https://program-think.blogspot.com/2009/02/study-technology-in-three-steps.html&#34;&gt;《学习技术的三部曲：WHAT、HOW、WHY》&lt;/a&gt;，其中提到【理解技术】的不同层次。要想更好地理解 OSI 模型，你得搞明白：为啥需要引入某某层？（请注意：这是一个 WHY 型的问题）&lt;br&gt;
　　接下来在讨论 OSI 的每个层次时，俺都会专门写一个小节，谈该层次的【必要性】。搞明白【必要性】，你就知道为啥要引入这个层次。&lt;/p&gt;
&lt;h1 id=&#34;物理层概述&#34;&gt;物理层：概述&lt;/h1&gt;
&lt;h2 id=&#34;物理层的必要性&#34;&gt;物理层的必要性&lt;/h2&gt;
&lt;p&gt;通俗地说：直接与物理介质打交道的层次，就是物理层。这一层的必要性比较明显。&lt;br&gt;
　　因为所有的通讯，归根结底都要依赖于【物理介质】。与物理介质打交道，需要牵涉到很多与【物理学】相关的东东。比如：“无线电通讯”需要关心“频率/波长”；电缆通讯需要跟“电压”打交道；“光纤通讯”需要关心“玻璃的折射率＆光线的入射角” ......&lt;br&gt;
　　“物理层”的主要职责是：屏蔽这些细节，使得“物理层”之上的层次不用再去操心物理学。&lt;/p&gt;
&lt;h2 id=&#34;物理信道的类型&#34;&gt;物理信道的类型&lt;/h2&gt;
&lt;p&gt;何为“物理信道”，在本文开篇的“基本概念”已经提到了。&lt;br&gt;
　　对于“物理信道”，还可以进一步细分为如下三大类：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;有线信道（比如：双绞线、同轴电缆、光纤、等等）&lt;/li&gt;
&lt;li&gt;无线信道（比如：微波通讯、电台广播、卫星通讯、等等）&lt;/li&gt;
&lt;li&gt;存储信道&lt;br&gt;
“存储信道”比较少见，很多人没听说过，稍微解释一下。&lt;br&gt;
　　假设你要把一大坨信息传送给另一个人，除了用“有线 or 无线”这两种通讯方式，还可以把信息先保存到某种【存储介质】（比如硬盘），然后再把存储介质用某种方式（比如快递）转交给对方。这就是所谓的“存储信道”。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;信噪比&#34;&gt;&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E4%BF%A1%E5%99%AA%E6%AF%94&#34;&gt;信噪比&lt;/a&gt;（Signal-to-noise ratio）&lt;/h2&gt;
&lt;p&gt;俺在很多篇关于“学习＆心理学”的博文中提到过【信噪比】这个概念。其实这个概念是从通讯领域借用的术语。&lt;br&gt;
　　对于“物理信道”，总是会存在某些环境干扰，称之为“噪声”（Noise）。“信道传输的有用信息”与“无用的干扰噪声”，这两者的比值就是“信噪比”。&lt;br&gt;
　　“信噪比”单位是【分贝】。“分贝”洋文叫做“&lt;a href=&#34;https://en.wikipedia.org/wiki/Decibel&#34;&gt;decibel&lt;/a&gt;”（简写为 dB）。“deci”表示“十进制”；“bel”是为了纪念大名鼎鼎的贝尔（电话它爹）。&lt;/p&gt;
&lt;h2 id=&#34;带宽的限制因素&#34;&gt;带宽的限制因素&lt;/h2&gt;
&lt;p&gt;“物理信道”要依赖于物理传输介质。不管使用何种物理介质，都要受限于某些基本的物理学定律（比如“光速上限”）。另外，不管何种物理介质，总是会有或多或少的环境干扰（噪声）。这两个因素导致了：任何“物理信道”的最大传输率总是有限滴。&lt;br&gt;
　　由于物理层是最底下的一层，物理层之上的其它层次总是要直接或间接地依赖【物理信道】。因此，其它层次建立的“逻辑信道”，其带宽只会比“物理信道”的最大带宽更小。换句话说：“物理信道”的带宽上限也就是整个协议栈的带宽上限。&lt;/p&gt;
&lt;h2 id=&#34;多路复用&#34;&gt;&lt;a href=&#34;https://zh.wikipedia.org/wiki/%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8&#34;&gt;多路复用&lt;/a&gt;（Multiplexing）&lt;/h2&gt;
&lt;p&gt;一般来说，凡是能实现【长距离】通讯的“物理信道”，都有相当的经济成本。比如铺设“光纤、同轴电缆”都要花钱。无线电通讯虽然免去了铺设线路的成本，但需要竞标购买频段。因此，物理信道非常强调“多路复用”。&lt;br&gt;
　　所谓的“多路复用”，通俗地说就是：尽可能地共享物理信道，不要浪费了。&lt;br&gt;
　　“多路复用”有很多种类型；不同的类型，原理也不同。为了展示各种不同的原理，俺拿【无线通信】来说事儿。&lt;br&gt;
　　无线通信领域的“多路复用”，【至少】有如下几种：&lt;br&gt;
　　1. 频分多路复用/FDM（Frequency-Division Multiplexing）&lt;br&gt;
　　这个最简单，就是根据频率拆分。不同的线路占用不同的频段，互不干扰。（电台广播用的就是这个思路）&lt;br&gt;
　　但这个思路的缺点很明显——&lt;br&gt;
其一，要依赖足够宽的频段（频段是稀缺资源）；&lt;br&gt;
其二，不同线路的流量可能会动态变化。如果某个线路空闲，其占用的频段就浪费了。&lt;br&gt;
　　（注：光纤通讯中有个“波分多路复用/WDM”，本质上就是 FDM）&lt;br&gt;
　　2. 时分多路复用/TDM（Time-Division Multiplexing）&lt;br&gt;
　　这种思路只用一个很窄的频段。为了在同一个频道发送多个信道，采用【分时机制】，把时间切割成很小的时间片，每个线路占用一个时间片。周而往复。&lt;br&gt;
　　这个思路有点像十字路口的红绿灯——每隔一段时间，其中一条路可以通行。&lt;br&gt;
　　这个思路的优点是：可以只使用一个很窄的频段。缺点是：线路越多，每条线路等待越久；即使某个线路空闲，依然会占用时间片（浪费了资源）。&lt;br&gt;
　　3. 码分多路复用/CDM（Code-Division Multiplexing）&lt;br&gt;
　　这种思路采用某种【编码】的技巧，使得多个端点可以在同一个时间点使用同一频段发送数据；由于他们采用不同的编码方式，不会相互干扰。&lt;br&gt;
　　一般来说，CDM 要依赖于“扩频技术”（spread spectrum），需占用一个比较宽的频道范围。这算是缺点。但其优点很明显——&lt;br&gt;
其一，可以支持 N 个线路（N 动态变化）；&lt;br&gt;
其二，即使任何一个线路的流量动态变化，也不会浪费物理信道的资源。&lt;br&gt;
　　显然，这种思路明显优于 FDM ＆ TDM。如今在移动通讯领域大名鼎鼎的 CDMA（码分多址），采用的就是这个思路。&lt;/p&gt;
&lt;h1 id=&#34;物理层具体实例&#34;&gt;物理层：具体实例&lt;/h1&gt;
&lt;h2 id=&#34;物理层的协议&#34;&gt;物理层的【协议】&lt;/h2&gt;
&lt;p&gt;物理层的协议主要有如下：&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/Universal_Serial_Bus&#34;&gt;USB 协议&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/List_of_Bluetooth_protocols&#34;&gt;蓝牙协议的一部分&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/IEEE_802.11&#34;&gt;IEEE 802.11&lt;/a&gt; 的一部分（Wi-Fi）&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/IEEE_802.16&#34;&gt;IEEE 802.16&lt;/a&gt;（WiMAX）&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/IEEE_1394&#34;&gt;IEEE 1394&lt;/a&gt;（火线接口）&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/RS-232&#34;&gt;RS-232 协议&lt;/a&gt;（串行接口/串口）&lt;br&gt;
......&lt;br&gt;
（考虑到篇幅）俺不可能具体细聊这些协议，只是贴出每个的维基百科链接，感兴趣的同学自己点进去看。&lt;/p&gt;
&lt;h2 id=&#34;物理层的协议实现&#34;&gt;物理层的【协议实现】&lt;/h2&gt;
&lt;p&gt;对于电脑主机（含移动设备），“网卡硬件”包含了物理层的协议实现（参见如下示意图）&lt;br&gt;
　　另外，还有一些专门的【1层】网络设备，也提供物理层的功能（参见下一个小节）。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620107754703.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;物理层相关的网络设备&#34;&gt;物理层相关的【网络设备】&lt;/h2&gt;
&lt;p&gt;1. &lt;a href=&#34;https://zh.wikipedia.org/wiki/%E8%B0%83%E5%88%B6%E8%A7%A3%E8%B0%83%E5%99%A8&#34;&gt;调制解调器&lt;/a&gt;（modem）&lt;br&gt;
　　通俗地说，“调制解调器”就是用来翻译“数字信号 ＆ 模拟信号”。&lt;br&gt;
　　在发送信息时，modem 把电脑要发送的“字节流”（数字信号）翻译成“模拟信号”，然后通过物理介质发送出去；当它从物理介质收到“模拟信号”，再翻译成“数字信号”，传回给电脑。&lt;br&gt;
　　早期的拨号上网，modem 面对的物理介质是“固话线路”；如今家庭宽带普及，光纤入户，modem 面对的物理介质是“光纤线路”。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620107833132.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;2. &lt;a href=&#34;https://en.wikipedia.org/wiki/Repeater&#34;&gt;中继器&lt;/a&gt;（repeater）&lt;br&gt;
　　信号在物理介质中传输，会出现【衰减】（不论是“有线 or 无线”都有可能衰减）。“中继器”的作用是【信号增益】，使得信号能传得更远。&lt;br&gt;
　　另外，比如“微波通讯”是直线传播，而地球表面有弧度，还有地形的起伏。所以每隔一定距离要建“微波塔”。这玩意儿也相当于“中继器”。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620107862051.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;3. &lt;a href=&#34;https://zh.wikipedia.org/wiki/%E9%9B%86%E7%B7%9A%E5%99%A8&#34;&gt;集线器&lt;/a&gt;（hub）&lt;br&gt;
　　可以把“集线器”视作更牛逼的“中继器”——“中继器”只有两个口（只能连接两个通讯端点），而“集线器”有多个口（同时连接多个通讯端点）。&lt;br&gt;
　　通常所说的“集线器”是指“以太网集线器”。这种设备如今已经逐步淘汰，很少见到了。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620107904990.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
另外，很多同学应该都用过“USB hub”，就是针对 USB 线的“集线器”（“USB 线”也可以视作某种通讯介质）。&lt;/p&gt;
&lt;h1 id=&#34;链路层概述&#34;&gt;链路层：概述&lt;/h1&gt;
&lt;h2 id=&#34;链路层的必要性&#34;&gt;链路层的必要性&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;对信息的打包&lt;br&gt;
　　物理层传输的信息，通俗地说就是【比特流】（也就是一长串比特）。但是对于计算机来说，“比特流”太低级啦，处理起来极不方便。“链路层”要干的第一个事情，就是把“比特流”打包成更大的一坨，以方便更上层的协议进行处理。在 OSI 模型中，链路层的一坨，称之为“帧”（frame）。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;2. 差错控制&lt;br&gt;
　　物理介质的传输，可能受到环境的影响。这种影响不仅仅体现为“噪声”，有时候会出现严重的干扰，导致物理层传输的“比特流”出错（某个比特“从0变1”或“从1变0”）。因此，链路层还需要负责检查物理层的传输是否出错。在 IT 行话中，检测是否出错，称之为“差错控制机制”（后面有一个小节会简单说一下这个话题）。&lt;/p&gt;
&lt;p&gt;3. 流量控制&lt;br&gt;
　　假设两个端点通过同一个物理信道进行通讯，这两个端点处理信息的速度可能不同。如果发送方输出信息的速度超过接收方处理信息的速度，通讯就会出问题。于是就需要有某种机制来协调，确保发送方的发送速度不会超出接收方的处理速度。在技术行话中，这称之为“流量控制”，简称“流控”。&lt;/p&gt;
&lt;p&gt;4. 信道复用&lt;br&gt;
　　在上一个章节已经讲到：用于远距离通讯的“物理介质”，总是有成本。因此需要对物理信道进行“多路复用”，就会导致多个端点共用同一个物理信道。如果同时存在多个发送者和多个接收者。接收者如何知道某个信息是发给自己而不是别人？&lt;br&gt;
　　另外，某些物理介质可能不支持并发（无法同时发送信息）。某些物理介质可能是【半双工】，所有这些物理层的限制，都使得“多路复用”变得复杂。为了解决这些问题，链路层需要提供了某种相应的机制（协议），术语叫做“介质访问控制”（洋文是“Media Access Control”，简称 MAC）。后续小节会聊它。&lt;/p&gt;
&lt;h2 id=&#34;差错控制&#34;&gt;差错控制&lt;/h2&gt;
&lt;p&gt;为了发现传输的信息是否出错，设计了很多相应的数学算法。这些算法大体分为两类：“检错算法 ＆ 纠错算法”。&lt;br&gt;
　　简而言之，“检错算法”只能检测出错误，而“纠错算法”不但能检测出错误，还能纠正错误。很显然，“纠错算法”更牛逼，但是它也更复杂。&lt;br&gt;
　　常见的“检错算法”对传输的数据计算出一个【校验值】，接收方收到数据会重新计算校验和，如果算出来不对，就把收到的数据丢弃，让对方重发。“校验算法”的原理类似于&lt;a href=&#34;https://program-think.blogspot.com/2013/02/file-integrity-check.html&#34;&gt;《扫盲文件完整性校验——关于散列值和数字签名》&lt;/a&gt;一文中提到的“散列算法/哈希算法”。&lt;br&gt;
　　“纠错算法”更高级，由于涉及到更多数学，俺就不展开啦。&lt;br&gt;
　　对于【无线】物理信道，由于出错的概率更高，并且重新传输数据的成本也更高。所以【无线】通讯的链路层协议，更倾向于用【纠错】机制；作为对比，【有线】通讯的链路层协议，更倾向于用【检错】机制。&lt;/p&gt;
&lt;h2 id=&#34;mac-协议&#34;&gt;&lt;a href=&#34;https://en.wikipedia.org/wiki/Medium_access_control&#34;&gt;MAC 协议&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;“MAC 协议”用来确保对下层物理介质的使用，不会出现冲突。为了形象，俺拿“铁路系统”来比喻，说明“MAC 协议”的用途。&lt;br&gt;
　　假设有一条【单轨】铁路连接 A/B 两地。有很多火车想从 A 开到 B，同时还有很多火车想从 B 开到 A。&lt;br&gt;
　　首先，要确保不发生撞车（如果已经有车在 A 开往 B 的途中，那么 B 就不能再发车）；其次，即使是同一个方向的车，出发时间也要错开一个时间间隔。&lt;br&gt;
　　所有这些协调工作，都是靠“MAC 协议”来搞定。&lt;/p&gt;
&lt;h2 id=&#34;mac-地址&#34;&gt;MAC 地址&lt;/h2&gt;
&lt;p&gt;为了完成上述任务，光有“MAC 协议”还不够，还需要为每一个端点引入【惟一的】标识。这个标识就称作“MAC 地址”。&lt;br&gt;
　　通俗地说，每个网卡都内置了一个“MAC 地址”。这个地址是网卡在出厂的时候就已经设置好的，并且用某种机制确保该地址【全球唯一】。&lt;/p&gt;
&lt;p&gt;如何保证 MAC 地址全球唯一捏？简单说一下：&lt;br&gt;
　　MAC 地址包含6个字节（48个比特），分为两半。第一部分称作【OUI】，OUI 的24个比特中，其中2个比特有特殊含义，其它22个比特，用来作为网卡厂商的唯一编号。这个编号由国际组织 IEEE 统一分配。&lt;br&gt;
　　MAC 地址第二部分的24比特，由网卡厂商自己决定如何分配。每个厂商只要确保自己生产的网卡，后面这24比特是唯一的，就行啦。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620108096408.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
　由于俺在很多安全教程中鼓吹大伙儿使用“&lt;a href=&#34;https://program-think.blogspot.com/2012/10/system-vm-0.html&#34;&gt;操作系统虚拟机&lt;/a&gt;”，再顺便说说【虚拟网卡】的 MAC 地址。&lt;br&gt;
　　“虚拟网卡”是由【虚拟化软件】创建滴。IEEE 也给每个虚拟化软件的厂商（含开源社区）分配了唯一的 OUI。因此，虚拟化软件在创建“虚拟网卡”时，会使用自己的 OUI 生成前面24个比特；后面的24比特，会采用某种算法使之尽可能【随机化】。由于“2的24次方”很大（224 = 16777216），碰巧一样的概率很低。&lt;br&gt;
　　（注：如果手工修改 MAC 地址，故意把两块网卡的 MAC 地址搞成一样，那确实就做不到唯一性了。并且会导致链路层的通讯出问题）&lt;/p&gt;
&lt;h1 id=&#34;链路层具体实例&#34;&gt;链路层：具体实例&lt;/h1&gt;
&lt;h2 id=&#34;链路层的协议&#34;&gt;链路层的【协议】&lt;/h2&gt;
&lt;p&gt;链路层的协议主要有如下：&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/Media_access_control&#34;&gt;MAC 协议&lt;/a&gt;（介质访问控制）&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/Logical_link_control&#34;&gt;LLC 协议&lt;/a&gt;（逻辑链路控制）&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/Address_Resolution_Protocol&#34;&gt;ARP 协议&lt;/a&gt;（解析 MAC 地址）&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/IEEE_802.3&#34;&gt;IEEE 802.3&lt;/a&gt;（以太网）&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/IEEE_802.11&#34;&gt;IEEE 802.11&lt;/a&gt; 的一部分（Wi-Fi）&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/Point-to-Point_Protocol&#34;&gt;PPP 协议&lt;/a&gt;（拨号上网）&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/Serial_Line_Internet_Protocol&#34;&gt;SLIP 协议&lt;/a&gt;（拨号上网）&lt;br&gt;
......&lt;br&gt;
（考虑到篇幅）俺不可能具体细聊这些协议，只是贴出每个的维基百科链接，感兴趣的同学自己点进去看。&lt;/p&gt;
&lt;h2 id=&#34;链路层的协议实现&#34;&gt;链路层的【协议实现】&lt;/h2&gt;
&lt;p&gt;对于电脑主机（含移动设备），“网卡硬件 ＆ 网卡驱动”会包含链路层协议的实现（参见如下示意图）。&lt;br&gt;
　　另外，还有一些专门的【2层】网络设备，也提供链路层的功能（参见下一个小节）。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620108330012.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;链路层相关的网络设备&#34;&gt;链路层相关的【网络设备】&lt;/h2&gt;
&lt;p&gt;1. &lt;a href=&#34;https://zh.wikipedia.org/wiki/%E7%B6%B2%E8%B7%AF%E4%BA%A4%E6%8F%9B%E5%99%A8&#34;&gt;网络交换机&lt;/a&gt;（network switch）&lt;br&gt;
　　（注：一般提到“网络交换机”，如果不加定语，指的就是“2层交换机”；此外还有更高层的交换机，在后续章节介绍）&lt;br&gt;
　　为啥要有交换机捏？俺拿“以太网的发展史”来说事儿。&lt;br&gt;
　　以太网刚诞生的时候，称之为“经典以太网”，电脑是通过【集线器】相连。“集线器”前面提到过，工作在【1层】（物理层），并不理解链路层的协议。因此，集线器的原理是【广播】模式——它从某个网线接口收到的数据，会复制 N 份，发送到其它【每个】网线接口。假设有4台电脑（A、B、C、D）都连在集线器上，A 发数据给 B，其实 C ＆ D 也都收到 A 发出的数据。显然，这种工作模式很傻逼（低效）。由于“经典以太网”的工作模式才“10兆”，所以集线器虽然低效，还能忍受。&lt;br&gt;
　　后来要发展“百兆以太网”，再用这种傻逼的广播模式，就不能忍啦。于是“经典以太网”就发展为“交换式以太网”。用【交换机】代替“集线器”。&lt;br&gt;
　　交换机是工作在2层（链路层）的设备，能够理解链路层协议。当交换机从某个网线接口收到一份数据（链路层的“帧”），它可以识别出“链路帧”里面包含的目标地址（接收方的 MAC 地址），然后只把这份数据转发给“目标 MAC 地址相关的网线接口”。&lt;br&gt;
　　由于交换机能识别2层协议，它不光比集线器的性能高，而且功能也强得多。比如（稍微高级点的）交换机可以实现“MAC 地址过滤、VLAN、QoS”等多种额外功能。&lt;/p&gt;
&lt;p&gt;2. &lt;a href=&#34;https://zh.wikipedia.org/wiki/%E6%A1%A5%E6%8E%A5%E5%99%A8&#34;&gt;网桥/桥接器&lt;/a&gt;（network bridge）&lt;br&gt;
　　“交换机”通常用来连接【同一种】网络的设备。有时候，需要让两台不同网络类型的电脑相连，就会用到【网桥】。&lt;br&gt;
　　下面以“操作系统虚拟机”来举例（完全没用过虚拟机的同学，请跳过这个举例）。&lt;br&gt;
　　在这篇博文，俺介绍了虚拟机的几种“网卡模式”，其中有一种模式叫做【bridge 模式】。一旦设置了这种模式，Guest OS 的虚拟网卡，对于 Host OS 所在的外部网络，是【双向】可见滴。也就是说，物理主机所在的外部网络，也可以看见这块虚拟网卡。&lt;br&gt;
　　现在，假设你的物理电脑（Host OS）只安装了【无线网卡】（WiFi），而虚拟化软件给 Guest OS 配置的通常是【以太网卡】。显然，这是两种【不同】的网络。为啥 Guest OS 的以太网卡设置为“bridge 模式”之后，外部 WiFi 网络可以看到它捏？&lt;br&gt;
　　奥妙在于——虚拟化软件在内部悄悄地帮你实现了一个“网桥”。这个网桥把“Host OS 的 WiFi 网卡”与“Guest OS 的以太网卡”关联起来。WiFi 网卡收到了链路层数据之后，如果接收方的 MAC 地址对应的是 Guest OS，网桥会把这份数据丢给 Guest OS 的网卡。&lt;br&gt;
　　这种网卡模式之所以称作“bridge 模式”，原因就在于此。&lt;/p&gt;
&lt;h2 id=&#34;链路层相关的软件工具&#34;&gt;链路层相关的【软件工具】&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;嗅探抓包工具（Sniffer）&lt;br&gt;
　　要了解链路层的数据包结构，需要用到“嗅探工具”。这类工具能捕获流经你网卡的所有【链路层】数据包。前面聊“协议栈”的时候说过：下层数据包的载荷就是上层数据包的整体。因此，拿到【链路层】数据包也就意味着：你已经拿到2层之上的所有数据包的信息了。&lt;br&gt;
　　有些抓包工具自带图形界面，可以直接显示数据包的内容给你看。还有些只提供命令行（只是把获取的数据包保存为文件），然后要搭配其它图形化的工具来展示数据包的内容。&lt;br&gt;
　　抓包的工具有很多，名气最大的是 Wireshark（原先叫做 Ethereal）。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;2. ARP 命令&lt;br&gt;
　　首先，ARP 是“MAC 地址解析协议”的洋文名称。该协议根据“IP 地址”解析“MAC 地址”。&lt;br&gt;
　　Windows 自带一个同名的 arp 命令，可以用来诊断与“MAC 地址”相关的信息。比如：列出当前子网中其它主机的 IP 地址以及对应的 MAC 地址。这个命令在 Linux ＆ Mac OS 上也有。&lt;br&gt;
(未完待续...)&lt;/p&gt;
&lt;h1 id=&#34;网络层概述&#34;&gt;网络层：概述&lt;/h1&gt;
&lt;h2 id=&#34;网络层的必要性&#34;&gt;网络层的必要性&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;路由机制（routing）&lt;br&gt;
　　在 OSI 模型中，链路层本身【不】提供路由功能。你可以通俗地理解为：链路层只处理【直接相连】的两个端点（注：这么说不完全严密，只是帮助外行理解）&lt;br&gt;
　　对于某个复杂网络，可能有很多端点，有很复杂的拓扑结构。当拓扑足够复杂，总有一些端点之间【没有直连】。那么，如何在这些【没有直连】的端点之间建立通讯捏？此时就需要提供某种机制，让其它端点帮忙转发数据。这就需要引入“路由机制”。&lt;br&gt;
　　为了避免把“链路层”搞得太复杂，路由机制放到“链路层”之上来实现，也就是“网络层”。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;基于【路由】的地址编码方式&lt;br&gt;
　　链路层已经提供了某种全球唯一的地址编码方式（MAC 地址）。但“MAC 地址”有如下几个问题：&lt;br&gt;
其一，它是固定的（虽然可以用技术手段去修改 MAC 地址，但很少这么干）&lt;br&gt;
其二，MAC 地址的编码是基于【厂商】，无法体现网络拓扑结构。或者说，“MAC 地址”对于“路由机制”是不够友好滴。&lt;br&gt;
　　因此，需要引入一种更抽象（更高层）的地址，也就是“网络层地址”。咱们常说的“IP 地址”，是“网络层地址”的实现方式之一。&lt;/p&gt;
&lt;p&gt;为了帮你理解，举个例子：&lt;br&gt;
　　每个人都有身份证号（这就类似于“MAC 地址”）。当某人加入了某个公司，公司会为此人再分配一个“员工号”（这就类似于“网络地址”）。既然有身份证号，为啥公司还要另搞一套“员工编号”捏？因为“员工编号”有额外的好处。比如说：可以把员工号划分为不同的区间，对应不同的部门。这样一来，只要看到员工号，就知道此人来自哪个部门。&lt;br&gt;
　　类似道理，每个网卡都有自己固定的 MAC 地址，当这个网卡接入到不同的网络，每次都可以再分配不同的“网络地址”。通过“网络地址”可以看出这个网卡属于哪个网络（对路由比较方便）。&lt;/p&gt;
&lt;p&gt;2. 网际互联（&lt;a href=&#34;https://en.wikipedia.org/wiki/Internetworking&#34;&gt;internetwork&lt;/a&gt;）&lt;br&gt;
　　引入“网络层”的另一个目的是：屏蔽不同类型的网络之间的差异，从而有利于【网际互联】（也就是建立“网络的网络”）。&lt;br&gt;
　　一般来说，要想联通【异种】网络，就要求每个网络中都有一台主机充当【网关】（gateway）。【网关】起到“中介/翻译”的作用——帮不同的网络翻译协议，使得不同的网络可以互相联通。&lt;br&gt;
　　假设【没有】统一的网络层，网关的工作就很难做。就好比说：如果全球没有某种通用的自然语言，就需要培养非常多不同类型的翻译人才（假设有30种主要语言，任意两种互译，就需要几百种不同的翻译人才）。&lt;br&gt;
　　反之，如果有了某种统一的网络层标准，问题就好办多了（还是假设有30种主要语言，只要选定某种作为通用语，然后培养29种翻译人才，就可以实现任意两种语言互译）。&lt;br&gt;
　　如今的互联网时代，【IP 协议】就是那个充当统一标准的网络层协议。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620108920280.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;网络拓扑network-topology&#34;&gt;网络拓扑（network topology）&lt;/h2&gt;
&lt;p&gt;网络的拓扑结构有很多种，有简单的，有复杂的。一般来说，再复杂的拓扑，也可以逐步分解为若干简单拓扑的组合。&lt;br&gt;
　　对拓扑的研究，有专门一个数学分支（拓扑学）。考虑到本文只是扫盲，俺不可能再去聊“拓扑学”。因此，只挑几种简单的拓扑结构，让大伙儿有个直观的印象。&lt;br&gt;
以下是几种常见的拓扑结构&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620108958718.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
如今的互联网，整体的拓扑结构超级复杂。但还是可以逐步分解为上述几种基本的拓扑结构。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620109056854.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;互联网的拓扑从历史的角度看其健壮性&#34;&gt;互联网的拓扑——从“历史”的角度看其健壮性&lt;/h2&gt;
&lt;p&gt;上面那张图可以看出：互联网拓扑的【局部】有很多是“星形拓扑”（当然也有其它的）。但从【宏观】上看，更像是“网状拓扑”。&lt;br&gt;
　　在现实生活中，对于复杂结构，通常都会采用“树状层次结构”，以便于管理。比如：域名系统、公司组织结构、官僚系统 ...... 那为啥互联网的【宏观】拓扑结构是“网状”捏？这就要说到互联网的历史。&lt;/p&gt;
&lt;p&gt;在上世纪50年代（冷战高峰期），美国军方的指挥系统高度依赖于电信公司提供的电话网络。当时的电话网络大致如下——&lt;br&gt;
在基层，每个地区有电话交换局，每一部电话都连入当地的交换局。&lt;br&gt;
在全国，设有若干个长途局，每个交换局都接入某个特定的长途局（不同地区的交换局通过长途局中转）。&lt;br&gt;
　　简而言之，当时美国的电话网络是典型的【多级星形拓扑】。这种拓扑的优点是：简单、高效、便于管理；但缺点是：健壮性很差。从这个案例中，大伙儿可以再次体会到“效率”与“健壮性”之间的矛盾。&lt;br&gt;
　　话说1957年的时候，苏联成功试射第一颗洲际弹道导弹（ICBM），美国军方开始担心：一旦苏联先用洲际导弹攻击美国，只要把少数几个长途局轰掉，军方的指挥系统就会瘫痪。也就是说，“长途局”已经成为美国军方的【单点故障】（何为“单点故障”？参见这篇博文）。&lt;br&gt;
　　1960年，美国国防部找来大名鼎鼎的兰德公司进行咨询，要求提供一个应对核打击的方案。该公司的研究员 Paul Baran 设计了一个方案，把“星形拓扑”改为【网状拓扑】。采用【网状拓扑】的好处在于：即使发生全面核大战，大量骨干节点被摧毁，整个网络也不会被分隔成几个孤岛，军方的指挥系统依然能正常运作。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620109508606.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
有了兰德公司的方案，美国军方找到当时最大的电信公司 AT＆T，想要实现这个系统，结果被否决了。AT＆T 高层认为：搞这样一种系统根本不切实际。于是 Baran 的方案中途夭折。&lt;br&gt;
　　为啥 AT＆T 反对这个方案捏？一方面，成功的大公司总是有很强的思维定势（关于这点，参见这篇文章）；另一方面，Baran 的设计方案确实很超前——其前瞻性不仅包括“拓扑结构”，而且把当时电信行业的几大核心观念完全颠覆掉了（具体如何颠覆，后续章节还会再聊）。&lt;br&gt;
　　时间一晃又过了好多年，到了60年代末，由于一系列机缘巧合，英国佬发现了“Baran 方案”的价值，并据此搞了一个小型的 NPL 网络（NPL 是“国家物理实验室”的缩写）。然后在某次 ACM 会议上，美国佬看到英国佬的论文，才意识到：Baran 方案完全可行。经历了“出口转内销”的命运之后，该方案重新被美国国防部重视。之后，（国防部下属的）“高级计划研究局”（ARPA）开始筹建“阿帕网”（ARPANET），才有了如今的互联网。&lt;/p&gt;
&lt;h2 id=&#34;路由的大致原理&#34;&gt;路由的大致原理&lt;/h2&gt;
&lt;p&gt;聊完“拓扑”，再来聊“路由”。&lt;br&gt;
　　当主机 A 向主机 B 发送网络层的数据时，大致会经历如下步骤：&lt;br&gt;
1.&lt;br&gt;
A 主机的协议栈先判断“A B 两个地址”是否在同一个子网（“子网掩码”就是用来干这事儿滴）。&lt;br&gt;
如果是同一个子网，直接发给对方；如果不是同一个子网，发给本子网的【默认网关】。&lt;br&gt;
（此处所说的“网关”指“3层网关/网络层网关”）&lt;br&gt;
2.&lt;br&gt;
对于“默认网关”，有可能自己就是路由器；也可能自己不是路由器，但与其它路由器相连。&lt;br&gt;
也就是说，“默认网关”要么自己对数据包进行路由，要么丢给能进行路由的另一台设备。&lt;br&gt;
（万一找不到能路由的设备，这个数据就被丢弃，于是网络通讯出错）&lt;br&gt;
3.&lt;br&gt;
当数据到达某个路由器之后，有如下几种可能——&lt;br&gt;
3.1&lt;br&gt;
该路由器正好是 B 所在子网的网关（与 B 直连），那就把数据包丢给 B，路由过程就结束啦；&lt;br&gt;
3.2&lt;br&gt;
亦或者，路由器会把数据包丢给另一个路由器（另一个路由器再丢给另一个路由器） ...... 如此循环往复，最终到达目的地 B。&lt;br&gt;
3.3&lt;br&gt;
还存在一种可能性：始终找不到“主机 B”（有可能该主机“断线 or 关机 or 根本不存在”）。为了避免数据包长时间在网络上闲逛，还需要引入某种【数据包存活机制】（洋文叫做“Time To Live”，简称 TTL）。&lt;br&gt;
通常会采用某个整数（TTL 计数）表示数据包能活多久。当主机 A 发出这个数据包的时候，这个“TTL 计数”就已经设置好了。每当这个数据包被路由器转发一次，“TTL 记数”就减一。当 TTL 变为零，这个数据包就死了（被丢弃）。&lt;/p&gt;
&lt;p&gt;对于某些大型的复杂网络（比如互联网），每个路由器可能与其它 N 个路由器相连（N 可能很大）。对于上述的 3.2 情形，它如何判断：该转发给谁捏？&lt;br&gt;
　　这时候，“路由算法”就体现出价值啦——&lt;br&gt;
一般来说，路由器内部会维护一张【路由表】。每当收到一个网络层的数据包，先取出数据包中的【目标地址】，然后去查这张路由表，看谁距离目标最近，就把数据包转发给谁。&lt;br&gt;
　　上面这段话看起来好像很简单，其实路由算法挺复杂滴。考虑到本文是“扫盲性质”，而且篇幅已经很长，不可能再去聊“路由算法”的细节。对此感兴趣的同学，可以去看《计算机网络》的第5章。&lt;/p&gt;
&lt;h2 id=&#34;路由算法的演变史以互联网为例&#34;&gt;路由算法的演变史（以互联网为例）&lt;/h2&gt;
&lt;p&gt;技术菜鸟可以跳过这个小节）&lt;br&gt;
　　由于互联网的 IP 协议已经成为“网络层协议”的事实标准，俺简单聊一下互联网的路由机制是如何进化滴。&lt;/p&gt;
&lt;p&gt;第1阶段：静态全局路由表&lt;br&gt;
　　（前面说了）互联网的前身是“阿帕网/ARPANET”。在阿帕网诞生初期（上世纪70年代），全球的主机很少。因此，早期的路由表很简单，既是“全局”滴，又是“静态”滴。简而言之，每个路由器内部都维护一张“全局路由表”，这个“路由表”包含了全球所有其它路由器的关联信息。每当来了一个数据包，查一下这张全局路由表，自然就清楚要转发给谁，才能最快到达目的地。&lt;br&gt;
　　早期的阿帕网，主机的变化比较少，也很少增加路由器。每当出现一个新的路由器，其它路由器的管理员就手工编辑各自的“全局路由表”。&lt;br&gt;
　　为了加深大伙儿印象，特意找来两张70年代初的阿帕网拓扑图（注：图中的 IMP 是“Interface Message Processor”的缩写，也就是如今所说的“路由器”）。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620120438050.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620120452002.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
第2阶段：动态全局路由表&lt;br&gt;
　　后来，“阿帕网/互联网”的规模猛增，路由器数量也跟着猛增，隔三差五都有新的路由器冒出来。再用“静态路由表”这种机制，（编辑路由表的）管理员会被活活累死。于是改用“动态路由表”，并引入某种“路由发现机制”。但“路由表”依然是【全局】滴。&lt;/p&gt;
&lt;p&gt;第3阶段：动态分级路由表&lt;br&gt;
　　再到后来，全球的路由器越来越多，成千上万，再搞“全局路由表”已经不太现实了——&lt;br&gt;
一方面，“全局路由表”越来越大（查询的速度就越来越慢）&lt;br&gt;
另一方面，由于互联网的流量越来越大，每来一个数据包都要查表，查询越来越频繁。&lt;br&gt;
　　于是，路由器开始吃不消了。为了解决困境，想出一个新招数：引入“分级路由”（hierarchical routing）。所谓的“分级路由”就是：把整个互联网分为多个大区域，每个大区域内部再分小区域，小区域内部再分小小区域 ...... 看到这里，熟悉“数据结构与算法”的同学就会意识到——这相当于构造了一个【树状】层次结构。&lt;br&gt;
　　有了这个层次结构，每个路由器重点关注：自己所在的那个最小化区域里面的网络拓扑。如此一来，每个路由器的“路由表”都会大幅度减小。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620120473341.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;互联网的路由从cas的角度看其健壮性&#34;&gt;互联网的路由——从“CAS”的角度看其健壮性&lt;/h2&gt;
&lt;p&gt;如果把互联网视作一个系统，每个公网上的路由器都是一个自适应的主体。假如某个地区的网络流量突然暴涨，骨干网路由器会自动分流；假如因为地震或战争，导致某个地区的骨干网路由器全部下线，周边地区的路由器也会自动避开这个区域 .....&lt;br&gt;
　　所有这些工作，【不需要】依靠任何最高指挥中枢，去进行协调。&lt;br&gt;
　　相反，如果互联网的路由系统中，设立了某种“中央委员会”进行实时调度，那互联网早就完蛋了，根本无法成长为今天这种规模。&lt;/p&gt;
&lt;h2 id=&#34;网络层的两种交换技术电路交换circuit-switching-vs-分组交换packet-switching&#34;&gt;网络层的两种交换技术——电路交换（circuit switching） VS 分组交换（packet switching）&lt;/h2&gt;
&lt;p&gt;（技术菜鸟可以跳过这个小节）&lt;br&gt;
　　前面聊“互联网诞生”，说到兰德公司的“Baran 方案”。该方案对当时的电信系统提出几大革命性的变化，其中之一就是“分组交换”技术（也称“数据包交换”or“封包交换”）。&lt;br&gt;
　　一般来说，网络层的设计有两种截然不同的风格：【电路交换 VS 分组交换】。有时候也分别称之为“有连接的网络层 VS 无连接的网络层”。此处所说的“连接”指的是某种“虚电路”（洋文叫做“virtual circuit”，简称 VC）。&lt;/p&gt;
&lt;p&gt;要理解“虚电路”，首先要从老式的电话系统说起。&lt;br&gt;
　　最早期的电话，既没有拨号盘也没有按键，全靠一张嘴。当你拿起电话，先告诉接线员你要打给谁，接线员会用一根跳接线，插入电话交换设备的某个插孔，从而把你的电话机与对方的电话机相连。于是建立了一条两人之间的电话通路，也就是“电路”。你可以把“接线员”想象成某种“人肉路由器” 😃&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620120530652.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
后来发明了“自动电话交换机”，导致“接线员”全体下岗。虽然自动化了，但原理还是一样——当你在电话上拨了某人的号码，电话局的交换机会自动选择一条线路。只有当这条线路建立起来，对方的电话才会响。一旦双方开始通话，双方之间的语音都是通过这条线路传输。并且这条线路是独占的——只要通话不挂断，这条线路就不会再分配给其他人使用。&lt;/p&gt;
&lt;p&gt;前面提到“互联网诞生的历史”，当时军方推动的“Baran 方案”被 AT＆T 断然拒绝。因为这个方案完全颠覆了传统的电话系统——&lt;br&gt;
颠覆之1：把“模拟信号”颠覆为“数字信号”（这点比较好理解，俺就不解释了）&lt;br&gt;
颠覆之2：把“星形拓扑”颠覆为“网状拓扑”（关于这点，前面的小节已经讨论了）&lt;br&gt;
颠覆之3：把“电路交换”颠覆为“分组交换”（这就是本小节的重点）&lt;/p&gt;
&lt;p&gt;为了帮大伙儿理解上述第3点，举个例子：&lt;br&gt;
　　假设主机 A 要向主机 B 发送一大坨数据。因为数据太多，肯定要分成好几坨小一点的（分成多个数据包）。如何把这些数据包发送给对方捏？&lt;/p&gt;
&lt;p&gt;“电路交换”的实现方式&lt;br&gt;
在发送数据之前，要先建立连接通道（通过路由算法，找出 A ＆ B 之间的某条通路）。这条通路就是所谓的“虚电路/VC”。一旦 VC 建立，每一个数据包都是从这条拓扑路径进行路由。&lt;/p&gt;
&lt;p&gt;“分组交换”的实现方式&lt;br&gt;
在发送数据之前，【不需要】建立通道，让每个数据包独立进行路由。这种情况下，这几个数据包可能会走【不同的】拓扑路径。因此，数据包到达的顺序与发送的顺序【不一定】相同。接收方收到所有数据包之后，还要自己进行排序。&lt;br&gt;
　　&lt;br&gt;
　　当时的电话系统主要承载语音传输，“电路交换”显然性能更高。那为啥 Baran 的设计要采用“分组交换”捏？俺又要再次提到【效率 VS 健壮性】之间的矛盾与均衡。&lt;br&gt;
　　对于“电路交换”，一旦建立连接，同一个连接的所有数据都走相同的路径（会经过完全相同的路由器）。也就是说，传输的过程中，如果某个路由器挂掉了（网络掉线 or 硬件当机 or 软件崩溃）。那么，该路由器正在处理的 N 个连接全都要报废。而“分组交换”则更加灵活——即使某个路由器挂掉了，后续的数据包会自动转向另外的路由器，损失很小。&lt;br&gt;
　　“Baran 方案”之所以采用“分组交换”的设计，因为人家这个方案是提交给军方用来应对【全面核战争】滴，当然要考虑健壮性啦。&lt;/p&gt;
&lt;p&gt;话说这两种交换机制，各有很多支持者，并分裂为两大阵营，分别是：“电信阵营 VS 互联网阵营”。两大阵营的口水战持续了 N 年，都无法说服对方。到了后来设计 OSI 模型的时候，为了保持中立性与通用性，OSI 模型本身并没有强制要求网络层采用哪一种风格。&lt;br&gt;
　　经过几十年之后，咱们已经可以看出来：“互联网阵营”占据主导地位。如今，连电信系统都是架构在互联网之上。&lt;/p&gt;
&lt;h1 id=&#34;网络层具体实例&#34;&gt;网络层：具体实例&lt;/h1&gt;
&lt;h2 id=&#34;网络层的协议&#34;&gt;网络层的【协议】&lt;/h2&gt;
&lt;p&gt;网络层的协议有很多。由于“互联网”已经成为全球的事实标准，因此俺只列出属于“互联网协议族”的那些“网络层协议”：&lt;br&gt;
IP 协议（含 &lt;a href=&#34;https://en.wikipedia.org/wiki/IPv4&#34;&gt;IPv4&lt;/a&gt; ＆ &lt;a href=&#34;https://en.wikipedia.org/wiki/IPv6&#34;&gt;IPv6&lt;/a&gt;）&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol&#34;&gt;ICMP&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/Internet_Group_Management_Protocol&#34;&gt;IGMP&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://en.wikipedia.org/wiki/IPsec&#34;&gt;IPSec&lt;/a&gt;&lt;br&gt;
......&lt;br&gt;
（考虑到篇幅）俺不可能具体细聊这些协议，只是贴出每个的维基百科链接，感兴趣的同学自己点进去看。&lt;br&gt;
　　对上述这些协议，最重要的当然是 IP 协议。如果你想要深入了解 IP 协议，可以参考《TCP-IP 详解》。关于 IP 协议的书，此书的影响力最大。这本书共3卷，通常只需看第1卷。&lt;/p&gt;
&lt;h2 id=&#34;网络层的协议实现&#34;&gt;网络层的【协议实现】&lt;/h2&gt;
&lt;p&gt;对于电脑主机（含移动设备），网络层的协议实现通常包含在操作系统自带的网络模块中（也就是“操作系统协议栈”）。具体参见如下示意图。&lt;br&gt;
　　另外，还有一些专门的【3层】网络设备，也提供网络层的功能（参见本章节的后续小节）。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620196533414.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;ip-地址的格式及含义&#34;&gt;IP 地址的格式及含义&lt;/h2&gt;
&lt;p&gt;当年设计阿帕网的时候，采用了【4字节】（32比特）来表示“网络层地址”（也就是 IP 地址）。&lt;br&gt;
　　“IP 地址”的含义很重要，俺有必要解释一下：&lt;br&gt;
　　咱们平时所说的 IP 地址，采用【点分十进制】来表示。就是把地址的4个字节，先翻译为十进制，然后每个字节用一个小数点分隔开（参见如下示意图）：&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620196563350.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
“IP 地址”的32比特，分为两部分：第1部分用来标识【子网】，第2部分用来标识该子网中的【主机】。&lt;br&gt;
　　这两部分各占用多少比特，是不确定的。在这种情况下，“操作系统协议栈”如何知道哪些比特标识“子网”，哪些比特标识“主机”捏？奥妙在于【子网掩码】。所以，大伙儿在给系统配置 IP 地址的时候，通常都需要再设置一个【子网掩码】，就这个用途。&lt;/p&gt;
&lt;h2 id=&#34;ip-地址枯竭及其解决方法&#34;&gt;IP 地址枯竭，及其解决方法&lt;/h2&gt;
&lt;p&gt;前一个小节提到：IP地址包含【4字节】（32比特）。因此，最多只能表示【2的32次方】（42亿左右）的不同地址。考虑到还有很多地址保留给特殊用途，实际可用地址远远不到42亿。&lt;br&gt;
　　到了如今，全球网民都已经几十亿了，IP 地址开始枯竭。咋办捏？为了解决这个问题，发展出若干技术手段。简单说一下最常见的几种手段：&lt;/p&gt;
&lt;p&gt;1. IPv6&lt;br&gt;
　　名气最大（最多人知道）的技术手段，大概是 IPv6 了。这招想要一劳永逸地解决地址枯竭的问题，采用了16字节（128比特）来表示 IP 地址。&lt;br&gt;
　　设计 IPv6 的人自豪地宣称：即使给地球上的每一粒沙子分配一个 IPv6 地址，依然绰绰有余（确实没有吹牛，“2的128次方”是天文数字）。&lt;br&gt;
　　但 IPv6 的缺点在于，【无法】向下兼容原有的 IP 协议（原有的协议叫“IPv4”）。IPv6 的普及一直比较慢，这是主要原因。&lt;/p&gt;
&lt;p&gt;2. 代理服务器（proxy）&lt;br&gt;
　　比如说，某个公司有100人，100台电脑。如果每台电脑都分配公网 IP 地址，就要消耗100个公网地址（太浪费啦）。&lt;br&gt;
　　可以只申请一个公网 IP，然后在内网搞一个代理服务器，公网 IP 分配给它（代理服务器有两个网卡，一个接内网，一个接公网）。然后在其它电脑上设置代理，指向这台代理服务器，就都可以上外网啦。&lt;/p&gt;
&lt;p&gt;3. 网络地址转换（NAT）&lt;br&gt;
　　前面 proxy 那招有个缺点：内网的每台电脑里面的每个上网软件，都要单独设置代理。实在太麻烦啦！&lt;br&gt;
　　后来就发明了某种更牛逼的招数——网络地址转换（洋文是“Network Address Translation”，简称 NAT）。&lt;br&gt;
　　用了这招，还是只要申请一个公网 IP，分配给内网的网关（网关有两个网卡，一个接内网，一个接公网）。然后在内网的网关配置 NAT 功能，自动就可以让内网的每台电脑访问外网。&lt;br&gt;
　　在这篇博文，俺介绍了虚拟机的几种“网卡模式”，其中有一种模式叫做【NAT 模式】，就是指这个玩意儿。&lt;br&gt;
　　采用了 NAT 技术之后，可能会对某些应用软件（尤其是 P2P 类型的）造成兼容性问题，于是又发明了一些“NAT 穿透技术”（NAT traversal）。这类技术有好几种，如果有空的话，俺会单独写教程介绍。&lt;/p&gt;
&lt;p&gt;4. 其它解决方法&lt;br&gt;
　　关于“IPv4 地址空间耗尽”，解决方法肯定不止上面这几招。限于篇幅，就此打住。更多的讨论参见维基百科的“&lt;a href=&#34;https://en.wikipedia.org/wiki/IPv4_address_exhaustion&#34;&gt;这个链接&lt;/a&gt;”。&lt;/p&gt;
&lt;h2 id=&#34;网络层相关的网络设备&#34;&gt;网络层相关的【网络设备】&lt;/h2&gt;
&lt;p&gt;1. &lt;a href=&#34;https://zh.wikipedia.org/wiki/%E8%B7%AF%E7%94%B1%E5%99%A8&#34;&gt;路由器&lt;/a&gt;（router）&lt;br&gt;
　　（前面章节聊“路由原理”的时候，已经介绍过它；这里就不再浪费口水啦）&lt;/p&gt;
&lt;p&gt;2. 3层交换机（Layer 3 switching）&lt;br&gt;
　　“3层交换机”是在“2层交换机”的基础上，增加了对网络层的处理。因此，它可以做到类似路由器的效果——在几个子网之间转发数据。&lt;br&gt;
　　与路由器的差别在于——“3层交换机”链接的几个子网是【同种】网络；而路由器可以连接【异种】网络。&lt;br&gt;
　　从上面这句话看，“3层交换机”的能力显然不如“路由器”。既然已经有“路由器”，为啥还要发明“3层交换机”捏？这就要说到【单臂路由器】的弊端。&lt;br&gt;
　　对于企业内网的“2层交换机”，通常都支持 VLAN 功能。通俗地说：可以在交换机中划分多个【虚拟子网】。其实这些子网的中所有的电脑，都还是接入这台交换机，只不过这些子网配置了不同的网络地址。对于同一个 VLAN 内部的通讯，“2层交换机”自己就可以搞定（只需要用到2层协议）；但对于【跨】VLAN 主机之间的通讯，“2层交换机”就没戏啦（它没有路由功能）。因此，就必须在它旁边外加一个路由器，形成如下拓扑结构。在这个拓扑中，路由器只与单个设备（2层交换机）相连，所以称之为“单臂”。&lt;br&gt;
　　请注意：如下示意图只画了两台电脑，位于两个 VLAN。实际上可能有很多个 VLAN，每个里面有几十台电脑。于是，交换机与路由器之间的传输通道就会成为瓶颈——【跨】VLAN 的任意两台电脑通讯，数据包都要到路由器那里兜一圈。为了消除这种瓶颈，才发明了“3层交换机”——把路由功能直接集成到交换机内部。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620196721088.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;p&gt;3. &lt;a href=&#34;https://zh.wikipedia.org/wiki/%E7%84%A1%E7%B7%9A%E6%8E%A5%E5%85%A5%E9%BB%9E&#34;&gt;无线热点&lt;/a&gt;（Wireless Access Point）&lt;br&gt;
　　“无线热点”通常用来提供无线接入，使得某个【无线】设备能接入到某个【有线】网络中。一般来说，热点都内置了路由功能，那么它就是“无线路由器”，对应到“3层”（网络层）。反之，如果没有路由功能，它就是“网桥”，属于“2层”（链路层）。&lt;/p&gt;
&lt;h2 id=&#34;网络层相关的软件工具&#34;&gt;网络层相关的【软件工具】&lt;/h2&gt;
&lt;p&gt;1. &lt;a href=&#34;https://en.wikipedia.org/wiki/Ping_(networking_utility)&#34;&gt;ping&lt;/a&gt;&lt;br&gt;
　　这个命令，很多人应该都知道。早在 Win9x 就有这个命令了。它使用（网络层的）ICMP 协议来测试某个远程主机是否可达。&lt;br&gt;
　　提醒一下：&lt;br&gt;
　　如果 ping 命令显示某个 IP 地址不可达，有很多种情况。比如说：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;这个 IP 地址对应的主机已经关机&lt;br&gt;
这个 IP 地址对应的主机已经断线&lt;br&gt;
这个 IP 地址对应的主机拒绝响应 ICMP 协议&lt;br&gt;
从你本机到这个 IP 地址之间，有某个防火墙拦截了 ICMP 协议&lt;br&gt;
......&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;2. &lt;a href=&#34;https://en.wikipedia.org/wiki/Traceroute&#34;&gt;traceroute&lt;/a&gt;&lt;br&gt;
　　这是一个通用的工具，用来测试路由。很早以前的 Windows 就已经内置了它，命令是 tracert。在 POSIX（Linux＆UNIX）上通常叫 traceroute&lt;br&gt;
　　你可以用这个命令，测试你本机与互联网另一台主机之间的路由（也就是：从你本机到对方主机，要经过哪些路由器）&lt;/p&gt;
&lt;h1 id=&#34;传输层概述&#34;&gt;传输层：概述&lt;/h1&gt;
&lt;h2 id=&#34;传输层的必要性&#34;&gt;传输层的必要性&lt;/h2&gt;
&lt;p&gt;屏蔽“有连接 or 无连接”的差异&lt;br&gt;
　　（上一个章节提到）网络层本身已经屏蔽了【异种网络】的差异（比如“以太网、ATM、帧中继”之间的差异），而且网络层也屏蔽了路由的细节。但网络层本身还有一个差异，也就是网络层的两种交换技术：电路交换（有连接） VS 分组交换（无连接）。&lt;br&gt;
　　前面章节也提到了：上述两种交换技术各有很多支持者，并分裂为两大阵营。当年设计 OSI 模型的时候，为了保持中立性与通用性，并没有强制规定“网络层”必须采用何种交换机制。&lt;br&gt;
　　对于开发网络软件的程序员来说，当然不想操心“网络层用的是哪一种交换机制”。因此，需要对网络层的上述差异再加一个抽象层（也就是“传输层”）。&lt;/p&gt;
&lt;p&gt;从“主机”到“进程”&lt;br&gt;
　　前面介绍的“网络层”，其设计是面向主机（电脑）。“网络层地址”也就是某个主机的地址。&lt;br&gt;
　　而“传输层”是面向【进程】滴！因为传输层要提供给【网络软件】使用，而网络软件打交道的对象是【另一个网络软件】。因此，传输层必须在“网络层地址”的基础上，再引入某种新的标识，用来区分同一台主机上的不同【进程】。&lt;/p&gt;
&lt;h2 id=&#34;传输层的特殊性&#34;&gt;传输层的特殊性&lt;/h2&gt;
&lt;p&gt;在 OSI 7层模型中，传输层正好居中。这是一个很特殊的位置。&lt;br&gt;
　　OSI 模型最下面3层，与【网络设备】比较密切。这里面所说的“网络设备”，既包括那些独立的主机（比如“路由器、交换机、等”），也包括电脑上的硬件（比如“网卡”）。&lt;br&gt;
　　OSI 模型最上面3层，与【网络软件】比较密切（或者说，与“用户的业务逻辑”比较密切）。&lt;br&gt;
　　而中间的传输层，正好是承上启下。对于开发应用软件的程序猿/程序媛，“传输层”是他们能感知的最低一层。&lt;/p&gt;
&lt;h2 id=&#34;传输层的端口&#34;&gt;传输层的【端口】&lt;/h2&gt;
&lt;p&gt;刚才谈“传输层的必要性”，提到说——“网络层地址”只能标识【主机】，而传输层必须要能标识【进程】。为了达到这个目的，于是就引入了“传输层端口”这个概念（为了打字省力，后续讨论简称为“端口”）。&lt;br&gt;
　　在 OSI 模型中，“端口”的官方称呼是“传输服务访问点”（洋文缩写 TSAP）。但是作为程序员，俺已经习惯于“端口”这个称呼。后续介绍依然用“端口”一词。&lt;br&gt;
　　当程序员使用传输层提供的 API 开发网络软件时，通常把“端口”与“网络地址”一起使用（构成“二元组”），就可以定位到某个主机上的某个进程。&lt;/p&gt;
&lt;h1 id=&#34;传输层具体实例&#34;&gt;传输层：具体实例&lt;/h1&gt;
&lt;h2 id=&#34;传输层的协议&#34;&gt;传输层的【协议】&lt;/h2&gt;
&lt;p&gt;为了让程序员可以更爽地使用传输层来开发网络软件，传输层既要提供“有连接”的风格，也要提供“无连接”的风格。关于这两种风格的对比，前面已经聊过，这里不再浪费口水。&lt;br&gt;
　　具体到“互联网协议族”，有两个主要的传输层实现，分别是 TCP ＆ UDP（前者是“有连接”，后者是“无连接”）。&lt;br&gt;
　　除了 TCP ＆ UDP，“互联网协议族”还提供了其它一些传输层协议。因为比较冷门，俺就不介绍啦。&lt;/p&gt;
&lt;h2 id=&#34;传输层的协议实现&#34;&gt;传输层的【协议实现】&lt;/h2&gt;
&lt;p&gt;对于电脑主机（含移动设备），传输层的协议实现通常包含在操作系统自带的网络模块中（也就是“操作系统协议栈”）。具体参见如下示意图。&lt;br&gt;
　　另外，还有一些专门的【4层】网络设备，也提供传输层的功能（参见后续的小节）。&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.icu/post-images/1620196966096.png&#34; alt=&#34;&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;套接字socket-api&#34;&gt;套接字（socket API）&lt;/h2&gt;
&lt;p&gt;前面说了：传输层是面向程序员（让他们可以更方便地开发网络软件）。因此，就需要提供一些封装传输层的【库】（API）。程序员只需要调用这些【库】，就可以使用传输层的协议进行通讯啦。&lt;br&gt;
　　影响力最大的传输层封装库，当然是 socket API。它来自加州大学伯克利分校。&lt;br&gt;
　　在互联网诞生初期，伯克利分校开发了一个 UNIX 操作系统的的变种，叫做“伯克利 UNIX 发行版”（BSD Unix），也就是如今 BSD 操作系统的前身。伯克利发行版内置了一套用来进行网络编程的 API，当时叫做“伯克利套接字”（Berkeley sockets）。由于这套 API 用起来很方便，很多其它的 UNIX 变种也移植了这套 API，于是就逐渐成了业界的事实标准。到了上世纪90年代，Windows ＆ Linux 也都提供了这套 API。&lt;/p&gt;
&lt;h2 id=&#34;传输层相关的网络设备&#34;&gt;传输层相关的【网络设备】&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;4层交换机（Layer 4 switching）&lt;br&gt;
　　前面已经介绍了“3层交换机”，“4层交换机”是其进一步的改良，可以识别传输层的协议，获取 TCP or UDP 的端口号。&lt;br&gt;
　　有了这个能力，网管就可以在这种交换机上配置一些管理策略。比如说：（根据传输层端口号）过滤掉某种流量，或者对某种流量设置转发的优先级。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;2. 状态防火墙（&lt;a href=&#34;https://en.wikipedia.org/wiki/Stateful_firewall&#34;&gt;stateful firewall&lt;/a&gt;）&lt;br&gt;
　　网络防火墙分好几种，大部分属于这种。它能完全处理 TCP 协议的状态，显然它属于“4层”（传输层）。&lt;/p&gt;
&lt;h2 id=&#34;传输层相关的软件工具&#34;&gt;传输层相关的【软件工具】&lt;/h2&gt;
&lt;p&gt;1. &lt;a href=&#34;https://en.wikipedia.org/wiki/Netcat&#34;&gt;netcat&lt;/a&gt; 家族——传输层的“瑞士军刀”&lt;br&gt;
　　关于 netcat，俺已经写过一篇比较详细的教程：&lt;a href=&#34;https://program-think.blogspot.com/2019/09/Netcat-Tricks.html&#34;&gt;《扫盲 netcat（网猫）的 N 种用法——从“网络诊断”到“系统入侵”》&lt;/a&gt;。看完这篇教程，你肯定能体会它功能的强大——很多与 TCP/UDP 相关的事情，都可以用 netcat 搞定。&lt;br&gt;
　　另外，netcat 还有很多衍生品（衍生的开源项目），构成一个丰富的 netcat 家族。在上述教程也有介绍。&lt;/p&gt;
&lt;p&gt;2. netstat ＆ ss&lt;br&gt;
　　Windows 和 POSIX（Linux＆UNIX）都有一个 netstat 命令，可以查看当前系统的 TCP/UDP 状态（包括当前系统开启了哪些监听端口）。&lt;br&gt;
　　另外，Linux 上还有一个 ss 命令，功能更强（但这个命令在 Windows 上默认没有）&lt;/p&gt;
&lt;p&gt;3. &lt;a href=&#34;https://en.wikipedia.org/wiki/Nmap&#34;&gt;nmap&lt;/a&gt;&lt;br&gt;
　　这是最著名的开源的扫描器，可以扫描远程主机监听了哪些传输层端口（注：前面提到的“netcat 家族”也可以干这事儿）&lt;br&gt;
　　nmap 的功能很强，“端口扫描”只是其功能之一。&lt;/p&gt;
&lt;h1 id=&#34;业务层osi-上三层概述&#34;&gt;业务层（OSI 上三层）：概述&lt;/h1&gt;
&lt;p&gt;一不小心，这篇教程已经写了这么长。为了照顾那些有“阅读障碍”的读者，俺要稍微控制一下篇幅，就把 OSI 的【上三层】合在一起讨论。&lt;br&gt;
　　前面的章节说过：【上三层】更接近于“网络软件”，对应的是应用软件的业务逻辑，因此俺统称为“业务层”。&lt;br&gt;
　　注：有些书（比如《计算机网络》）会把 OSI 的上三层统称为“应用层”。由于 OSI 模型中本来就有一个“应用层”，俺认为这样容易搞混（尤其不利于技术菜鸟），所以另外起了一个“业务层”的名称。&lt;/p&gt;
&lt;h2 id=&#34;业务层的必要性&#34;&gt;业务层的必要性&lt;/h2&gt;
&lt;p&gt;业务层显然是必要滴。因为传输层位于操作系统，它不可能去了解网络软件的业务逻辑。为了让网络软件能够相互通讯，肯定要在传输层之上再定义更高层的协议。&lt;br&gt;
　　问题在于：网络软件千奇百怪，其业务逻辑各不相同，因此，“业务层如何设计”，【无】一定之规。有些软件只用一个协议来搞定所有的业务逻辑（只有一层）；有些软件会参考 OSI，把业务逻辑的协议分为三层；还有些软件可能会分出更多的层次。&lt;br&gt;
　　再强调一下：业务层的协议如何分层，完全看具体的业务逻辑，不要生搬硬套任何现有的参考模型。&lt;/p&gt;
&lt;h2 id=&#34;会话层-表示层-应用层&#34;&gt;会话层 ＆ 表示层 ＆ 应用层&lt;/h2&gt;
&lt;p&gt;对于大部分读者来说，【没必要】花时间去了解 OSI 最上面三层之间的区别。你只需把最上面三层视作【一坨】——他们都是与网络软件的业务逻辑密切相关滴。&lt;br&gt;
　　那么，哪些人需要详细了解“这三层的差异”捏？&lt;br&gt;
　　如果你是个程序员，并且你正好是开发【网络】软件，俺建议你了解一下 OSI 模型的最上面三层，有助于你更深刻地思考某些网络协议的设计。所谓的“更深刻”指的是：你不能光停留在 WHAT 层面，要提升到 HOW 甚至 WHY 层面（参见&lt;a href=&#34;https://program-think.blogspot.com/2009/02/study-technology-in-three-steps.html&#34;&gt;《学习技术的三部曲：WHAT、HOW、WHY》&lt;/a&gt;）&lt;/p&gt;
&lt;h1 id=&#34;业务层osi-上三层具体实例&#34;&gt;业务层（OSI 上三层）：具体实例&lt;/h1&gt;
&lt;h2 id=&#34;业务层的协议&#34;&gt;业务层的【协议】&lt;/h2&gt;
&lt;p&gt;业务层的协议非常多。即使光把各种协议的名称列出来，也很费劲。所以俺就偷懒一下，只点评几个特别重要的协议。&lt;/p&gt;
&lt;p&gt;HTTP 协议&lt;br&gt;
　　如果让俺评选最重要的业务层协议，俺首推 HTTP 协议。互联网的普及推动了 Web 的普及，而 Web 的普及使得 HTTP 成为信息时代的重要支柱。当你上网的时候，你看到的网页（HTML 页面）就是通过 HTTP 协议传输到你的浏览器上。&lt;br&gt;
　　如今 HTTP 已经不仅仅用来展示网页，还有很多业务层的协议是建立在 HTTP 协议之上。比如说：如果你用 RSS 订阅俺的博客，RSS 阅读器需要调用 blogspot 博客平台提供的 RSS 接口，这些 RSS 接口就是基于 HTTP 协议传输滴。&lt;br&gt;
　　考虑到本文的篇幅，俺不可能在这里细聊 HTTP 协议的规格，有兴趣的同学可以去看《HTTP 权威指南》这本书。&lt;/p&gt;
&lt;p&gt;SSL/TLS 协议&lt;br&gt;
　　最早的 HTTP 协议是【明文】滴；为了强化安全性，后来又设计了 SSL 协议，用来【加密】HTTP 流量；再后来，SSL 升级为 TLS（这俩是同义词）。如今经常看到的 HTTPS 相当于“HTTP over TLS”。&lt;br&gt;
　　SSL/TLS 设计得比较优雅（很灵活），使得其它业务层的协议可以很方便地架构在 SSL/TLS 之上。这样的好处是：其它协议就不用自己再设计一套加密机制＆认证机制。&lt;br&gt;
　　SSL/TLS 对于安全性很重要，因此俺专门写了一个系列教程（如下），详细介绍该协议的技术细节。&lt;br&gt;
&lt;a href=&#34;https://program-think.blogspot.com/2014/11/https-ssl-tls-0.html&#34;&gt;《扫盲 HTTPS 和 SSL／TLS 协议》&lt;/a&gt;（系列）&lt;/p&gt;
&lt;p&gt;域名相关的协议（DNS 及其它）&lt;br&gt;
　　域名相关的协议，也很重要。因为域名系统是整个互联网的基础设施。最早的域名查询协议是“DNS 协议”，由于这个协议【没有】加密，导致了一些安全隐患。因此，后来又设计了一系列新的域名协议，引入了加密的机制。&lt;br&gt;
　　关于这些协议的扫盲教程，可以参考如下博文：&lt;br&gt;
&lt;a href=&#34;https://program-think.blogspot.com/2018/10/Comparison-of-DNS-Protocols.html&#34;&gt;《对比4种强化域名安全的协议——DNSSEC，DNSCrypt，DNS over TLS，DNS over HTTPS》&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;业务层相关的网络设备&#34;&gt;业务层相关的【网络设备】&lt;/h2&gt;
&lt;p&gt;应用层防火墙（&lt;a href=&#34;https://en.wikipedia.org/wiki/Application_firewall&#34;&gt;application firewall&lt;/a&gt;）&lt;br&gt;
　　前面提到了：大多数网络防火墙处于4层（状态防火墙），另外还有少数处于7层，也就是“应用层防火墙”（有时候也称之为“7层防火墙”）。&lt;br&gt;
　　一般来说，这类防火墙具备了【深度包检测】（deep packet inspection，简称 DPI）的能力，可以分析应用层协议的【内容】。&lt;br&gt;
　　简单说一下“深度包检测”：&lt;br&gt;
　　如果某个网络设备，仅仅分析“应用层协议”本身，它还【不够格】称之为 DPI。为了做到 DPI，还要能理解应用层协议所承载的【内容】。&lt;br&gt;
　　比如说：某人通过【明文】的 HTTP 协议从网上下载了一个 zip 压缩包。对于这个下载行为，那些做得好的 DPI 设备不光能识别出“HTTP 协议的内容是 ZIP 压缩包”，而且还能从 ZIP 压缩包中提取出里面的文件。&lt;/p&gt;
&lt;p&gt;入侵检测（&lt;a href=&#34;https://en.wikipedia.org/wiki/Intrusion_detection_system&#34;&gt;intrusion detection system&lt;/a&gt;）&lt;br&gt;
　　一般来说，“入侵检测”如果不加定语，通常指“【网络】入侵检测”（洋文叫 NIDS）；另外还有一种“【主机】入侵检测”（洋文叫 HIDS）。HIDS 与本文无关。&lt;br&gt;
　　“入侵检测”是一种网络安全设备，它通过嗅探（sniffer）的方式抓取网上的数据包，然后进行分析，尝试发现网络中是否存在黑客/骇客的入侵的行为。故名“入侵检测”。&lt;br&gt;
　　由于 IDS 需要理解【应用层】（7层）的内容，因此它与“应用层防火墙”有个共同点，需要具备某种程度的 DPI（深度包检测）能力。它俩的一大差异是【部署方式】。&lt;br&gt;
　　考虑到很多读者是 IT 外行，简单说一下“旁路部署”——&lt;br&gt;
如果你学过中学物理，应该知道电路有“串联 ＆ 并联”。所谓的“旁路部署”类似于电路中的【并联】。通俗地说：IDS 是【并联】部署，防火墙是【串联】部署.&lt;/p&gt;
">计算机网络通讯的【系统性】扫盲——从“基本概念”到“OSI 模型”</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/about/"" data-c="
          &lt;p align=&#34;center&#34;&gt;
 &lt;img width=&#34;200px&#34; src=&#34;https://blog.gd1214b.icu/images/avatar.png&#34; align=&#34;center&#34; alt=&#34;gd1214b&#34; /&gt;
 &lt;h2 align=&#34;center&#34;&gt;gd1214b&lt;/h2&gt;
&lt;/p&gt;
&lt;h1 id=&#34;关于gd1214b&#34;&gt;关于gd1214b&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;GitHub: &lt;a href=&#34;https://github.com/gd1214b&#34;&gt;https://github.com/gd1214b&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Telegram: &lt;a href=&#34;https://t.me/gd1214b&#34;&gt;https://t.me/gd1214b&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Twitter: &lt;a href=&#34;https://twitter.com/gd1214b&#34;&gt;https://twitter.com/gd1214b&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Facebook: &lt;a href=&#34;https://www.facebook.com/gd1214b&#34;&gt;https://www.facebook.com/gd1214b&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Instagram: &lt;a href=&#34;https://www.instagram.com/gd1214b5&#34;&gt;https://www.instagram.com/gd1214b5&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Tumblr: &lt;a href=&#34;https://gd1214b.tumblr.com&#34;&gt;https://gd1214b.tumblr.com&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;编程语言&#34;&gt;编程语言&lt;/h2&gt;
&lt;h3 id=&#34;前端&#34;&gt;前端&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&amp;amp;logo=html5&amp;amp;logoColor=white&#34; alt=&#34;HTML5&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&amp;amp;logo=css3&amp;amp;logoColor=white&#34; alt=&#34;CSS3&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://img.shields.io/badge/JavaScript-323330?style=for-the-badge&amp;amp;logo=javascript&amp;amp;logoColor=F7DF1E&#34; alt=&#34;JavaScript&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://img.shields.io/badge/Markdown-000000?style=for-the-badge&amp;amp;logo=markdown&amp;amp;logoColor=white&#34; alt=&#34;Markdown&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;后端&#34;&gt;后端&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://img.shields.io/badge/C-00599C?style=for-the-badge&amp;amp;logo=c&amp;amp;logoColor=white&#34; alt=&#34;C&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://img.shields.io/badge/C%2B%2B-00599C?style=for-the-badge&amp;amp;logo=c%2B%2B&amp;amp;logoColor=white&#34; alt=&#34;C++&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://img.shields.io/badge/Python-14354C?style=for-the-badge&amp;amp;logo=python&amp;amp;logoColor=white&#34; alt=&#34;python&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;操作系统&#34;&gt;操作系统💻&lt;/h2&gt;
&lt;p&gt;&lt;img src=&#34;https://img.shields.io/badge/Ubuntu-E95420?style=for-the-badge&amp;amp;logo=ubuntu&amp;amp;logoColor=white&#34; alt=&#34;Ubuntu&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://img.shields.io/badge/Windows-0078D6?style=for-the-badge&amp;amp;logo=windows&amp;amp;logoColor=white&#34; alt=&#34;Windows&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
&lt;img src=&#34;https://img.shields.io/badge/Android-3DDC84?style=for-the-badge&amp;amp;logo=android&amp;amp;logoColor=white&#34; alt=&#34;Android&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;github-统计&#34;&gt;GitHub 统计&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/gd1214b&#34;&gt;&lt;img src=&#34;https://github-readme-stats.vercel.app/api?username=gd1214b&amp;amp;show_icons=true&amp;amp;theme=radical&#34; alt=&#34;gd1214b&#39;s GitHub stats&#34; loading=&#34;lazy&#34;&gt;&lt;/a&gt;&lt;br&gt;
&lt;a href=&#34;https://github.com/gd1214b&#34;&gt;&lt;img src=&#34;https://github-readme-stats.vercel.app/api/top-langs/?username=gd1214b&amp;amp;layout=compact&amp;amp;theme=radical&#34; alt=&#34;Top Langs&#34; loading=&#34;lazy&#34;&gt;&lt;/a&gt;&lt;br&gt;
&lt;img src=&#34;https://metrics.lecoq.io/gd1214b?template=classic&amp;amp;languages=1&amp;amp;isocalendar=1&amp;amp;introduction=1&amp;amp;habits=1&amp;amp;licenses=1&amp;amp;contributors=1&amp;amp;stars=1&amp;amp;topics=1&amp;amp;people=1&amp;amp;reactions=1&amp;amp;gists=1&amp;amp;followup=1&amp;amp;traffic=1&amp;amp;lines=1&amp;amp;stargazers=1&amp;amp;projects=1&amp;amp;activity=1&amp;amp;notable=1&amp;amp;support=1&amp;amp;achievements=1&amp;amp;skyline=1&amp;amp;pagespeed=1&amp;amp;tweets=1&amp;amp;anilist=1&amp;amp;music=1&amp;amp;stackoverflow=1&amp;amp;posts=1&amp;amp;rss=1&amp;amp;stock=1&amp;amp;screenshot=1&amp;amp;wakatime=1&amp;amp;nightscout=1&amp;amp;isocalendar.duration=half-year&amp;amp;languages.limit=8&amp;amp;languages.sections=most-used&amp;amp;languages.colors=github&amp;amp;languages.threshold=0%25&amp;amp;languages.indepth=false&amp;amp;languages.recent.load=300&amp;amp;languages.recent.days=14&amp;amp;introduction.title=true&amp;amp;habits.from=200&amp;amp;habits.days=14&amp;amp;habits.facts=true&amp;amp;habits.charts=false&amp;amp;licenses.ratio=false&amp;amp;licenses.legal=true&amp;amp;contributors.head=master&amp;amp;contributors.ignored=github-actions%5Bbot%5D%2C%20dependabot%5Bbot%5D%2C%20dependabot-preview%5Bbot%5D&amp;amp;contributors.contributions=false&amp;amp;stars.limit=4&amp;amp;topics.mode=starred&amp;amp;topics.sort=stars&amp;amp;topics.limit=15&amp;amp;reactions.limit=200&amp;amp;reactions.days=0&amp;amp;reactions.display=absolute&amp;amp;reactions.ignored=github-actions%5Bbot%5D%2C%20dependabot%5Bbot%5D%2C%20dependabot-preview%5Bbot%5D&amp;amp;people.limit=24&amp;amp;people.size=28&amp;amp;people.types=followers%2C%20following&amp;amp;people.identicons=false&amp;amp;people.shuffle=false&amp;amp;followup.sections=repositories&amp;amp;projects.limit=4&amp;amp;projects.descriptions=false&amp;amp;activity.limit=5&amp;amp;activity.load=300&amp;amp;activity.days=14&amp;amp;activity.filter=all&amp;amp;activity.visibility=all&amp;amp;activity.timestamps=false&amp;amp;achievements.threshold=C&amp;amp;achievements.secrets=true&amp;amp;achievements.limit=0&amp;amp;notable.repositories=false&amp;amp;skyline.year=current-year&amp;amp;skyline.frames=60&amp;amp;skyline.quality=0.5&amp;amp;skyline.compatibility=false&amp;amp;pagespeed.url=.user.website&amp;amp;pagespeed.detailed=false&amp;amp;pagespeed.screenshot=false&amp;amp;music.limit=4&amp;amp;music.played.at=false&amp;amp;music.user=.user.login&amp;amp;tweets.attachments=false&amp;amp;tweets.limit=2&amp;amp;tweets.user=gd1214b&amp;amp;anilist.medias=anime%2C%20manga&amp;amp;anilist.sections=favorites&amp;amp;anilist.limit=2&amp;amp;anilist.limit.characters=22&amp;amp;anilist.shuffle=true&amp;amp;anilist.user=.user.login&amp;amp;stackoverflow.user=13687440&amp;amp;stackoverflow.sections=answers-top%2C%20questions-recent&amp;amp;stackoverflow.limit=2&amp;amp;stackoverflow.lines=4&amp;amp;stackoverflow.lines.snippet=2&amp;amp;posts.descriptions=false&amp;amp;posts.covers=false&amp;amp;posts.limit=4&amp;amp;posts.user=.user.login&amp;amp;rss.limit=4&amp;amp;wakatime.days=7&amp;amp;wakatime.sections=time%2C%20projects%2C%20projects-graphs%2C%20languages%2C%20languages-graphs%2C%20editors%2C%20os&amp;amp;wakatime.limit=5&amp;amp;wakatime.url=https%3A%2F%2Fwakatime.com&amp;amp;wakatime.user=current&amp;amp;stock.duration=1d&amp;amp;stock.interval=5m&amp;amp;screenshot.title=Screenshot&amp;amp;screenshot.selector=body&amp;amp;screenshot.background=true&amp;amp;nightscout.url=https%3A%2F%2Fexample.herokuapp.com&amp;amp;nightscout.datapoints=12&amp;amp;nightscout.lowalert=80&amp;amp;nightscout.highalert=180&amp;amp;nightscout.urgentlowalert=50&amp;amp;nightscout.urgenthighalert=250&amp;amp;config.timezone=Asia%2FShanghai&#34; alt=&#34;Metrics&#34; loading=&#34;lazy&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;关于本站&#34;&gt;关于本站&lt;/h1&gt;
&lt;h2 id=&#34;gd1214b服务状态监控&#34;&gt;gd1214b服务状态监控&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://status.gd1214b.tk/&#34;&gt;https://status.gd1214b.tk/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;本站访问次数统计&#34;&gt;本站访问次数统计&lt;/h2&gt;
&lt;figure data-type=&#34;image&#34; tabindex=&#34;1&#34;&gt;&lt;img src=&#34;https://count.getloli.com/get/@gd1214b&#34; alt=&#34;访问次数统计&#34; loading=&#34;lazy&#34;&gt;&lt;/figure&gt;
&lt;h2 id=&#34;致谢&#34;&gt;致谢&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;本站源代码托管在&lt;a href=&#34;https://github.com/gd1214b/gd1214b.github.io&#34;&gt;Github&lt;/a&gt;上,欢迎各位大佬提交issues和pull requests.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;本站使用本站采用&lt;a href=&#34;https://gridea.dev/&#34;&gt;Gridea&lt;/a&gt;作为博客框架，并使用了&lt;a href=&#34;https://github.com/hsxyhao/gridea-theme-next&#34;&gt;NexT&lt;/a&gt;主题。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;本站部署在以下平台上：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://vercel.com/&#34;&gt;Vercel&lt;/a&gt;: &lt;a href=&#34;https://gd1214b.vercel.app/&#34;&gt;https://gd1214b.vercel.app/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://pages.github.com/&#34;&gt;GitHub Pages&lt;/a&gt;: &lt;a href=&#34;https://gd1214b.github.io/&#34;&gt;https://gd1214b.github.io/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://pages.cloudflare.com/&#34;&gt;Cloudflare Pages&lt;/a&gt;: &lt;a href=&#34;https://gd1214b.pages.dev/&#34;&gt;https://gd1214b.pages.dev/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.netlify.com/&#34;&gt;Netlify&lt;/a&gt;: &lt;a href=&#34;https://gd1214b.netlify.app/&#34;&gt;https://gd1214b.netlify.app/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;本站使用&lt;a href=&#34;https://www.jsdelivr.com/&#34;&gt;jsDelivr&lt;/a&gt;作为全球内容分发网络.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;本站使用&lt;a href=&#34;https://valine.js.org/&#34;&gt;Valine&lt;/a&gt;评论系统,&lt;a href=&#34;https://github.com/DesertsP/Valine-Admin&#34;&gt;Valine Admin&lt;/a&gt;评论管理系统,并部署在&lt;a href=&#34;https://leancloud.app/&#34;&gt;LeanCloud&lt;/a&gt;上.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;本站的&lt;a href=&#34;https://apibug.cn/doc/ipqm.html&#34;&gt;IP签名档&lt;/a&gt;和&lt;a href=&#34;https://apibug.cn/doc/ecy.html&#34;&gt;背景图片&lt;/a&gt;使用了&lt;a href=&#34;https://apibug.cn/&#34;&gt;Aipbug&lt;/a&gt;提供的API.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
">关于</a>
      </div>
      
      <div class="item">
        <a class="result-title" style="opacity: 0;" href="https://blog.gd1214b.icu/post/QQ4EPGT87/"" data-c="
          &lt;h1 id=&#34;markdown-标题&#34;&gt;Markdown 标题&lt;/h1&gt;
&lt;h1 id=&#34;一级标题&#34;&gt;一级标题&lt;/h1&gt;
&lt;h2 id=&#34;二级标题&#34;&gt;二级标题&lt;/h2&gt;
&lt;h3 id=&#34;三级标题&#34;&gt;三级标题&lt;/h3&gt;
&lt;h4 id=&#34;四级标题&#34;&gt;四级标题&lt;/h4&gt;
&lt;h5 id=&#34;五级标题&#34;&gt;五级标题&lt;/h5&gt;
&lt;h6 id=&#34;六级标题&#34;&gt;六级标题&lt;/h6&gt;
&lt;h1 id=&#34;markdown-段落&#34;&gt;Markdown 段落&lt;/h1&gt;
&lt;h2 id=&#34;字体&#34;&gt;字体&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;斜体文本&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;粗体文本&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;粗斜体文本&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&#34;分隔线&#34;&gt;分隔线&lt;/h2&gt;
&lt;p&gt;下面是分割线:&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;删除线&#34;&gt;删除线&lt;/h2&gt;
&lt;p&gt;&lt;s&gt;这是一条带有删除线的文本.&lt;/s&gt;&lt;/p&gt;
&lt;h2 id=&#34;下划线&#34;&gt;下划线&lt;/h2&gt;
&lt;p&gt;&lt;u&gt;这是一条带有下划线的文本.&lt;/u&gt;&lt;/p&gt;
&lt;h1 id=&#34;markdown-列表&#34;&gt;Markdown 列表&lt;/h1&gt;
&lt;h2 id=&#34;无序列表&#34;&gt;无序列表&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;第一项&lt;/li&gt;
&lt;li&gt;第二项&lt;/li&gt;
&lt;li&gt;第三项&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;有序列表&#34;&gt;有序列表&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;第一项&lt;/li&gt;
&lt;li&gt;第二项&lt;/li&gt;
&lt;li&gt;第三项&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;嵌套列表&#34;&gt;嵌套列表&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;第一项：
&lt;ul&gt;
&lt;li&gt;第一项嵌套的第一个元素&lt;/li&gt;
&lt;li&gt;第一项嵌套的第二个元素&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;第二项：
&lt;ul&gt;
&lt;li&gt;第二项嵌套的第一个元素&lt;/li&gt;
&lt;li&gt;第二项嵌套的第二个元素&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id=&#34;markdown-区块&#34;&gt;Markdown 区块&lt;/h1&gt;
&lt;h2 id=&#34;区块引用&#34;&gt;区块引用&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;文本1&lt;br&gt;
文本2&lt;br&gt;
文本3&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;区块嵌套&#34;&gt;区块嵌套&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;最外层&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;第一层嵌套&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;第二层嵌套&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;第三层嵌套&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;区块中使用列表&#34;&gt;区块中使用列表&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;区块中使用列表&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;第一项&lt;/li&gt;
&lt;li&gt;第二项&lt;/li&gt;
&lt;li&gt;第三项&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;第一项&lt;/li&gt;
&lt;li&gt;第二项&lt;/li&gt;
&lt;li&gt;第三项&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;列表中使用区块&#34;&gt;列表中使用区块&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;第一项
&lt;blockquote&gt;
&lt;p&gt;文本1&lt;br&gt;
文本2&lt;br&gt;
文本3&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;第二项&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;markdown-代码&#34;&gt;Markdown 代码&lt;/h1&gt;
&lt;h2 id=&#34;在文本中引用代码&#34;&gt;在文本中引用代码&lt;/h2&gt;
&lt;p&gt;格式化输出函数&lt;code&gt;printf()&lt;/code&gt;的主要功能是向标准输出设备按规定格式输出信息。&lt;/p&gt;
&lt;h2 id=&#34;代码区块&#34;&gt;代码区块&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;#include &amp;lt;stdio.h&amp;gt;

int main()
{
    printf(&amp;quot;Hello, World! \n&amp;quot;);
    return 0;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;markdown-链接&#34;&gt;Markdown 链接&lt;/h1&gt;
&lt;p&gt;这是一个链接&lt;a href=&#34;https://blog.gd1214b.tk/&#34;&gt;https://blog.gd1214b.tk/&lt;/a&gt;&lt;br&gt;
这是一个超链接:&lt;a href=&#34;https://blog.gd1214b.tk/&#34;&gt;gd1214b&#39;s blog&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;markdown-图片&#34;&gt;Markdown 图片&lt;/h1&gt;
&lt;p&gt;下面是本网站的图标:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.tk/images/avatar.png&#34; alt=&#34;gd1214b&#39;s blog 图标&#34; title=&#34;gd1214b&#34; loading=&#34;lazy&#34;&gt;&lt;br&gt;
缩放图片:&lt;br&gt;
&lt;img src=&#34;https://blog.gd1214b.tk/images/avatar.png&#34; width=&#34;50%&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;markdown-表格&#34;&gt;Markdown 表格&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;表头&lt;/th&gt;
&lt;th&gt;表头&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;单元格&lt;/td&gt;
&lt;td&gt;单元格&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;单元格&lt;/td&gt;
&lt;td&gt;单元格&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;左对齐&lt;/th&gt;
&lt;th style=&#34;text-align:right&#34;&gt;右对齐&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;居中对齐&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;单元格&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;单元格&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;单元格&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;单元格&lt;/td&gt;
&lt;td style=&#34;text-align:right&#34;&gt;单元格&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;单元格&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h1 id=&#34;数学公式&#34;&gt;数学公式&lt;/h1&gt;
&lt;p class=&#39;katex-block&#39;&gt;&lt;span class=&#34;katex-display&#34;&gt;&lt;span class=&#34;katex&#34;&gt;&lt;span class=&#34;katex-mathml&#34;&gt;&lt;math&gt;&lt;semantics&gt;&lt;mrow&gt;&lt;mo fence=&#34;true&#34;&gt;∣&lt;/mo&gt;&lt;mtable&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mi mathvariant=&#34;bold&#34;&gt;i&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mi mathvariant=&#34;bold&#34;&gt;j&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mi mathvariant=&#34;bold&#34;&gt;k&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;∂&lt;/mi&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;∂&lt;/mi&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;∂&lt;/mi&gt;&lt;mi&gt;Y&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;∂&lt;/mi&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;∂&lt;/mi&gt;&lt;mi&gt;X&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;∂&lt;/mi&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;∂&lt;/mi&gt;&lt;mi&gt;Y&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mi mathvariant=&#34;normal&#34;&gt;∂&lt;/mi&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mstyle scriptlevel=&#34;0&#34; displaystyle=&#34;false&#34;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/mstyle&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;mo fence=&#34;true&#34;&gt;∣&lt;/mo&gt;&lt;/mrow&gt;&lt;annotation encoding=&#34;application/x-tex&#34;&gt;\begin{vmatrix} 
\mathbf{i} &amp;amp; \mathbf{j} &amp;amp; \mathbf{k} \\
\frac{\partial X}{\partial u} &amp;amp;  \frac{\partial Y}{\partial u} &amp;amp; 0 \\
\frac{\partial X}{\partial v} &amp;amp;  \frac{\partial Y}{\partial v} &amp;amp; 0 \\
\end{vmatrix}
&lt;/annotation&gt;&lt;/semantics&gt;&lt;/math&gt;&lt;/span&gt;&lt;span class=&#34;katex-html&#34; aria-hidden=&#34;true&#34;&gt;&lt;span class=&#34;base&#34;&gt;&lt;span class=&#34;strut&#34; style=&#34;height:3.6802159999999997em;vertical-align:-1.590108em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;minner&#34;&gt;&lt;span class=&#34;mopen&#34;&gt;&lt;span class=&#34;delimsizing mult&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:2.08597em;&#34;&gt;&lt;span style=&#34;top:-1.05597em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.606em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size1&#34;&gt;&lt;span&gt;∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-1.6619700000000002em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.606em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size1&#34;&gt;&lt;span&gt;∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.26797em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.606em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size1&#34;&gt;&lt;span&gt;∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.87397em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.606em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size1&#34;&gt;&lt;span&gt;∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.47997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.606em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size1&#34;&gt;&lt;span&gt;∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-4.08597em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.606em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size1&#34;&gt;&lt;span&gt;∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.5500299999999998em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mtable&#34;&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:2.090108em;&#34;&gt;&lt;span style=&#34;top:-4.250108em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathbf&#34;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.0099999999999993em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8801079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.6550000000000002em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34; style=&#34;margin-right:0.05556em;&#34;&gt;∂&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;u&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.394em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34; style=&#34;margin-right:0.05556em;&#34;&gt;∂&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.07847em;&#34;&gt;X&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.345em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-1.769892em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8801079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.6550000000000002em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34; style=&#34;margin-right:0.05556em;&#34;&gt;∂&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.394em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34; style=&#34;margin-right:0.05556em;&#34;&gt;∂&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.07847em;&#34;&gt;X&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.345em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.590108em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:2.090108em;&#34;&gt;&lt;span style=&#34;top:-4.250108em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathbf&#34;&gt;j&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.0099999999999993em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8801079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.6550000000000002em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34; style=&#34;margin-right:0.05556em;&#34;&gt;∂&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34;&gt;u&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.394em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34; style=&#34;margin-right:0.05556em;&#34;&gt;∂&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.22222em;&#34;&gt;Y&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.345em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-1.769892em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mopen nulldelimiter&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mfrac&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.8801079999999999em;&#34;&gt;&lt;span style=&#34;top:-2.6550000000000002em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34; style=&#34;margin-right:0.05556em;&#34;&gt;∂&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.03588em;&#34;&gt;v&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.23em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;frac-line&#34; style=&#34;border-bottom-width:0.04em;&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.394em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sizing reset-size6 size3 mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34;&gt;&lt;span class=&#34;mord mtight&#34; style=&#34;margin-right:0.05556em;&#34;&gt;∂&lt;/span&gt;&lt;span class=&#34;mord mathdefault mtight&#34; style=&#34;margin-right:0.22222em;&#34;&gt;Y&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:0.345em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose nulldelimiter&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.590108em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;arraycolsep&#34; style=&#34;width:0.5em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;col-align-c&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:2.090108em;&#34;&gt;&lt;span style=&#34;top:-4.250108em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord mathbf&#34;&gt;k&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.0099999999999993em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-1.769892em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:3em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;mord&#34;&gt;&lt;span class=&#34;mord&#34;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.590108em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;mclose&#34;&gt;&lt;span class=&#34;delimsizing mult&#34;&gt;&lt;span class=&#34;vlist-t vlist-t2&#34;&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:2.08597em;&#34;&gt;&lt;span style=&#34;top:-1.05597em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.606em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size1&#34;&gt;&lt;span&gt;∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-1.6619700000000002em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.606em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size1&#34;&gt;&lt;span&gt;∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.26797em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.606em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size1&#34;&gt;&lt;span&gt;∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-2.87397em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.606em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size1&#34;&gt;&lt;span&gt;∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-3.47997em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.606em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size1&#34;&gt;&lt;span&gt;∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;top:-4.08597em;&#34;&gt;&lt;span class=&#34;pstrut&#34; style=&#34;height:2.606em;&#34;&gt;&lt;/span&gt;&lt;span class=&#34;delimsizinginner delim-size1&#34;&gt;&lt;span&gt;∣&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-s&#34;&gt;​&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;vlist-r&#34;&gt;&lt;span class=&#34;vlist&#34; style=&#34;height:1.5500299999999998em;&#34;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
">测试博客</a>
      </div>
      
    </div>
    <div class="page">
      <div id="page_ul"></div>
    </div>
  </div>
</div>
<script>
  !function () {
    let searchMask = document.querySelector('#search_mask');
    let result = document.querySelector('#result');
    let items = document.querySelectorAll('.item');
    let searchBox = document.querySelector('#search');
    let statCount = document.querySelector('#stat_count');
    let statTimes = document.querySelector('#stat_times');
    let pageUl = document.querySelector('#page_ul');
    let close = document.querySelector('#close');
    
    close.addEventListener('click', function() {
      searchMask.style = 'display: none;'
    })

    let finds = [];
    let contents = [];
    let pageSize = 10;
    items.forEach(item => {
      let a = item.querySelector('a');
      contents.push({
        title: a.innerText,
        details: a.dataset.c,
        link: a.href
      })
      item.remove();
    })

    function insertStr(soure, start, count) {
      let newStr = soure.substr(start, count);
      return soure.slice(0, start) + '<em>' + newStr + '</em>' + soure.slice(start + count);
    }

    pageUl.addEventListener('click', function(event) {
      let target = event.target;
      if (target.__proto__ === HTMLSpanElement.prototype) {
        appendResults(parseInt(target.dataset.i));
      }
    })

    function appendResults(index) {
      let htmlResult = '';
      let start = index || 0;
      let end = Math.min(start + pageSize, finds.length);
      for (let i = start; i < end; i++) {
        const current = finds[i];
        let html = current.title;
        let sum = 0;
        let positions = current.positions;
        positions.forEach(position => {
          html = insertStr(html, position.start + sum, position.count);
          sum += 9;
        })
        htmlResult += `<div class="item"><a class="result-title" href="${current.link}">${html}</a></div>`;
      }
      result.innerHTML = htmlResult;
      pageUl.innerHTML = '';
      let count = finds.length / pageSize;
      let lis = '';
      if (start !== 0) {
        lis += `<span class="fa fa-angle-left" data-i='${start - 1}'></span>`;
      }
      for (let i = 0; i < count; i++) {
        lis += `<span class='${i === start?'current':''}' data-i='${i}'>${i+1}</span>`;     
      }
      if (start+1 < count) {
        lis += `<span class="fa fa-angle-right" data-i='${start+1}'></span>`;  
      }
      pageUl.innerHTML = lis;
    }

    function search(delay) {
      let timer = null
      return function () {
        clearTimeout(timer)
        timer = setTimeout(() => {
          let start = Date.now();
          let segments = searchBox.value.split(' ').filter(c => c != '');
          if (segments.length <= 0) {
            return;
          }
          finds = [];
          let htmlResult = '';
          contents.forEach(content => {
            let title = content.title;
            let positions = [];
            let find = false;
            segments.forEach((segment) => {
              if (content.title.includes(segment)) {
                find = true;
                positions.push({
                  start: content.title.indexOf(segment),
                  count: segment.length
                })
              } else if (content.details.includes(segment)) {
                find = true;
              }
            });
            if (find) {
              finds.push({
                title: content.title,
                link: content.link,
                positions
              });
            }
          })
          appendResults(0);
          statCount.textContent = finds.length;
          statTimes.textContent = Date.now() - start;
        }, delay)
      }
    }
    searchBox.addEventListener('input', search(200));
  }()
</script>

<input hidden id="copy" />
<script>
  !function () {
    let times = document.querySelectorAll('.publish-time');
    for (let i = 0; i < times.length; i++) {
      let date = times[i].dataset.t;
      let time = Math.floor((new Date().getTime() - new Date(date).getTime()) / 1000);
      if (time < 60) {
        str = time + '秒之前';
      } else if (time < 3600) {
        str = Math.floor(time / 60) + '分钟之前';
      } else if (time >= 3600 && time < 86400) {
        str = Math.floor(time / 3600) + '小时之前';
      } else if (time >= 86400 && time < 259200) {
        str = Math.floor(time / 86400) + '天之前';
      } else {
        str = times[i].textContent;
      }
      times[i].textContent = str;
    }
  }();
</script>

<script>
  let language = '';
  if (language !== '') {
    let map = new Map();
    if (language === 'en') {
      map.set('search', 'Search');
      map.set('category', 'Categories');
      map.set('article', 'Articles');
      map.set('tag', 'Tags');
      map.set('top', 'Top');
      map.set('publish', 'published');
      map.set('minute', ' minutes');
      map.set('read-more', 'Read More');
      map.set('view', 'View');
      map.set('words', ' words');
      map.set('category-in', 'category in');
      map.set('preview', 'Meta');
      map.set('index', 'Toc');
      map.set('no-archives', "You haven't created yet");
      map.set('archives', " articles in total");
      map.set('cloud-tags', " tags in total");
      map.set('copyright', "Copyright: ");
      map.set('author', "Author: ");
      map.set('link', "Link: ");
      map.set('leave-message', "Leave a message");
      map.set('format', "Links Format");
      map.set('site-name', "Name: ");
      map.set('site-link', "Link: ");
      map.set('site-desc', "Desc: ");
      map.set('stat', " related results, taking ");
      map.set('stat-time', " ms");
      map.set('site-img', "Image: ");
    }

    if (map.size > 0) {
      let lanElems = document.querySelectorAll('.language');
      lanElems.forEach(elem => {
        let lan = elem.dataset.lan, text = map.get(lan);
        if (elem.__proto__ === HTMLInputElement.prototype) {
          elem.placeholder = text
        } else {
          if (elem.dataset.count) {
            text = elem.dataset.count + text;
          }
          elem.textContent = text;
        }
      })
    }
  }
  //拿来主义(真香)^_^，Clipboard 实现摘自掘金 https://juejin.im/post/5aefeb6e6fb9a07aa43c20af
  window.Clipboard = (function (window, document, navigator) {
    var textArea,
      copy;

    // 判断是不是ios端
    function isOS() {
      return navigator.userAgent.match(/ipad|iphone/i);
    }
    //创建文本元素
    function createTextArea(text) {
      textArea = document.createElement('textArea');
      textArea.value = text;
      textArea.style.width = 0;
      textArea.style.height = 0;
      textArea.clientHeight = 0;
      textArea.clientWidth = 0;
      document.body.appendChild(textArea);
    }
    //选择内容
    function selectText() {
      var range,
        selection;

      if (isOS()) {
        range = document.createRange();
        range.selectNodeContents(textArea);
        selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
        textArea.setSelectionRange(0, 999999);
      } else {
        textArea.select();
      }
    }

    //复制到剪贴板
    function copyToClipboard() {
      try {
        document.execCommand("Copy")
      } catch (err) {
        alert("复制错误！请手动复制！")
      }
      document.body.removeChild(textArea);
    }

    copy = function (text) {
      createTextArea(text);
      selectText();
      copyToClipboard();
    };

    return {
      copy: copy
    };
  })(window, document, navigator);

  function copyCode(e) {
    if (e.srcElement.tagName === 'SPAN' && e.srcElement.classList.contains('copy-code')) {
      let code = e.currentTarget.querySelector('code');
      var text = code.innerText;
      if (e.srcElement.textContent === '复制成功') {
        return;
      }
      e.srcElement.textContent = '复制成功';
      (function (elem) {
        setTimeout(() => {
          if (elem.textContent === '复制成功') {
            elem.textContent = '复制代码'
          }
        }, 1000);
      })(e.srcElement)
      Clipboard.copy(text);
    }
  }

  let pres = document.querySelectorAll('pre');
  pres.forEach(pre => {
    let code = pre.querySelector('code');
    let copyElem = document.createElement('span');
    copyElem.classList.add('copy-code');
    copyElem.textContent = '复制代码';
    pre.appendChild(copyElem);
    pre.onclick = copyCode
  })

</script>
<script src="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/media/js/motion.js"></script>


<script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
<script>
  var scroll = new SmoothScroll('a[href*="#"]', {
    speed: 200
  });
</script>


<canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas>
<script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/media/js/mouse/fireworks.js"></script>


<script src="https://cdn.jsdelivr.net/gh/gd1214b/gd1214b.github.io@latest/media/js/cool.js"></script>



<script src="https://cdn.jsdelivr.net/gh/lete114/CDN/Sum/sakura.js"></script>


</html>